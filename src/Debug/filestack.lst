Zilog eZ80 Macro Assembler Version 4.3 (19073001) RELISTED01-Mar-23     16:39:41     page:   1


PC     Object              I  Line    Source 
                           A     1    ; Zilog eZ80 ANSI C Compiler Release 3.4
                           A     2    ; -nomodsect -optsize -noreduceopt -nopadbranch
                           A     3    ; -peephole -globalopt -localcse -const=ROM 
                           A     4    	FILE	"..\filestack.c"
                           A     5    	.assume ADL=1
                           A     6    .DEBUG "C"
                           A     7    	SEGMENT CODE
                           A     8    .BEGREC "fmt_type",19
                           A     9    .DEFINE "status"
                           A    10    .VALUE 0
                           A    11    .CLASS 8
                           A    12    .TYPE 12
                           A    13    .ENDEF
                           A    14    .DEFINE "flags"
                           A    15    .VALUE 1
                           A    16    .CLASS 8
                           A    17    .TYPE 12
                           A    18    .ENDEF
                           A    19    .DEFINE "size"
                           A    20    .VALUE 2
                           A    21    .CLASS 8
                           A    22    .TYPE 2
                           A    23    .ENDEF
                           A    24    .DEFINE "chr"
                           A    25    .VALUE 3
                           A    26    .CLASS 8
                           A    27    .TYPE 2
                           A    28    .ENDEF
                           A    29    .DEFINE "type"
                           A    30    .VALUE 4
                           A    31    .CLASS 8
                           A    32    .TYPE 2
                           A    33    .ENDEF
                           A    34    .DEFINE "field_width"
                           A    35    .VALUE 5
                           A    36    .CLASS 8
                           A    37    .TYPE 2
                           A    38    .ENDEF
                           A    39    .DEFINE "precision"
                           A    40    .VALUE 6
                           A    41    .CLASS 8
                           A    42    .TYPE 2
                           A    43    .ENDEF
                           A    44    .DEFINE "set_begin"
                           A    45    .VALUE 7
                           A    46    .CLASS 8
                           A    47    .TYPE 34
                           A    48    .ENDEF
                           A    49    .DEFINE "set_end"
                           A    50    .VALUE 10
                           A    51    .CLASS 8
                           A    52    .TYPE 34
                           A    53    .ENDEF
                           A    54    .DEFINE "pad_whole"
                           A    55    .VALUE 13
                           A    56    .CLASS 8
                           A    57    .TYPE 12
                           A    58    .ENDEF
                           A    59    .DEFINE "pad_pre_fract"
                           A    60    .VALUE 14
                           A    61    .CLASS 8
                           A    62    .TYPE 12
                           A    63    .ENDEF
                           A    64    .DEFINE "pad_post_fract"
                           A    65    .VALUE 15
                           A    66    .CLASS 8
                           A    67    .TYPE 12
                           A    68    .ENDEF
                           A    69    .DEFINE "pad_at"
                           A    70    .VALUE 16
                           A    71    .CLASS 8
                           A    72    .TYPE 34
                           A    73    .ENDEF
                           A    74    .ENDREC "fmt_type"
                           A    75    .BEGREC "flt_info",12
                           A    76    .DEFINE "flags"
                           A    77    .VALUE 0
                           A    78    .CLASS 8
                           A    79    .TYPE 12
                           A    80    .ENDEF
                           A    81    .DEFINE "exp"
                           A    82    .VALUE 1
                           A    83    .CLASS 8
                           A    84    .TYPE 2
                           A    85    .ENDEF
                           A    86    .DEFINE "digits"
                           A    87    .VALUE 2
                           A    88    .CLASS 8
                           A    89    .DIM 10
                           A    90    .TYPE 108
                           A    91    .ENDEF
                           A    92    .ENDREC "flt_info"
                           A    93    .BEGREC "NONAME0",15
                           A    94    .DEFINE "reg"
                           A    95    .VALUE 0
                           A    96    .CLASS 8
                           A    97    .TYPE 4
                           A    98    .ENDEF
                           A    99    .DEFINE "reg_index"
                           A   100    .VALUE 3
                           A   101    .CLASS 8
                           A   102    .TYPE 12
                           A   103    .ENDEF
                           A   104    .DEFINE "indirect"
                           A   105    .VALUE 4
                           A   106    .CLASS 8
                           A   107    .TYPE 12
                           A   108    .ENDEF
                           A   109    .DEFINE "cc"
                           A   110    .VALUE 5
                           A   111    .CLASS 8
                           A   112    .TYPE 12
                           A   113    .ENDEF
                           A   114    .DEFINE "cc_index"
                           A   115    .VALUE 6
                           A   116    .CLASS 8
                           A   117    .TYPE 12
                           A   118    .ENDEF
                           A   119    .DEFINE "displacement"
                           A   120    .VALUE 7
                           A   121    .CLASS 8
                           A   122    .TYPE 3
                           A   123    .ENDEF
                           A   124    .DEFINE "displacement_provided"
                           A   125    .VALUE 9
                           A   126    .CLASS 8
                           A   127    .TYPE 12
                           A   128    .ENDEF
                           A   129    .DEFINE "immediate_provided"
                           A   130    .VALUE 10
                           A   131    .CLASS 8
                           A   132    .TYPE 12
                           A   133    .ENDEF
                           A   134    .DEFINE "immediate"
                           A   135    .VALUE 11
                           A   136    .CLASS 8
                           A   137    .TYPE 4
                           A   138    .ENDEF
                           A   139    .DEFINE "wasLabel"
                           A   140    .VALUE 14
                           A   141    .CLASS 8
                           A   142    .TYPE 12
                           A   143    .ENDEF
                           A   144    .ENDREC "NONAME0"
                           A   145    .BEGREC "NONAME1",4
                           A   146    .DEFINE "suffix"
                           A   147    .VALUE 0
                           A   148    .CLASS 8
                           A   149    .TYPE 12
                           A   150    .ENDEF
                           A   151    .DEFINE "prefix1"
                           A   152    .VALUE 1
                           A   153    .CLASS 8
                           A   154    .TYPE 12
                           A   155    .ENDEF
                           A   156    .DEFINE "prefix2"
                           A   157    .VALUE 2
                           A   158    .CLASS 8
                           A   159    .TYPE 12
                           A   160    .ENDEF
                           A   161    .DEFINE "opcode"
                           A   162    .VALUE 3
                           A   163    .CLASS 8
                           A   164    .TYPE 12
                           A   165    .ENDEF
                           A   166    .ENDREC "NONAME1"
                           A   167    .BEGREC "NONAME2",16
                           A   168    .DEFINE "operandA"
                           A   169    .VALUE 0
                           A   170    .CLASS 8
                           A   171    .TYPE 4
                           A   172    .ENDEF
                           A   173    .DEFINE "operandB"
                           A   174    .VALUE 3
                           A   175    .CLASS 8
                           A   176    .TYPE 4
                           A   177    .ENDEF
                           A   178    .DEFINE "ddfdpermitted"
                           A   179    .VALUE 6
                           A   180    .CLASS 8
                           A   181    .TYPE 12
                           A   182    .ENDEF
                           A   183    .DEFINE "transformA"
                           A   184    .VALUE 7
                           A   185    .CLASS 8
                           A   186    .TYPE 4
                           A   187    .ENDEF
                           A   188    .DEFINE "transformB"
                           A   189    .VALUE 10
                           A   190    .CLASS 8
                           A   191    .TYPE 4
                           A   192    .ENDEF
                           A   193    .DEFINE "prefix"
                           A   194    .VALUE 13
                           A   195    .CLASS 8
                           A   196    .TYPE 12
                           A   197    .ENDEF
                           A   198    .DEFINE "opcode"
                           A   199    .VALUE 14
                           A   200    .CLASS 8
                           A   201    .TYPE 12
                           A   202    .ENDEF
                           A   203    .DEFINE "adl"
                           A   204    .VALUE 15
                           A   205    .CLASS 8
                           A   206    .TYPE 12
                           A   207    .ENDEF
                           A   208    .ENDREC "NONAME2"
                           A   209    .BEGREC "NONAME3",17
                           A   210    .DEFINE "name"
                           A   211    .VALUE 0
                           A   212    .CLASS 8
                           A   213    .DIM 8
                           A   214    .TYPE 98
                           A   215    .ENDEF
                           A   216    .DEFINE "type"
                           A   217    .VALUE 8
                           A   218    .CLASS 8
                           A   219    .TYPE 12
                           A   220    .ENDEF
                           A   221    .DEFINE "asmtype"
                           A   222    .VALUE 9
                           A   223    .CLASS 8
                           A   224    .TYPE 12
                           A   225    .ENDEF
                           A   226    .DEFINE "listnumber"
                           A   227    .VALUE 10
                           A   228    .CLASS 8
                           A   229    .TYPE 12
                           A   230    .ENDEF
                           A   231    .DEFINE "list"
                           A   232    .VALUE 11
                           A   233    .CLASS 8
                           A   234    .TAG "NONAME2"
                           A   235    .TYPE 40
                           A   236    .ENDEF
                           A   237    .DEFINE "asmargument"
                           A   238    .VALUE 14
                           A   239    .CLASS 8
                           A   240    .TYPE 4
                           A   241    .ENDEF
                           A   242    .ENDREC "NONAME3"
                           A   243    .BEGREC "NONAME4",6
                           A   244    .DEFINE "type"
                           A   245    .VALUE 0
                           A   246    .CLASS 8
                           A   247    .TYPE 4
                           A   248    .ENDEF
                           A   249    .DEFINE "match"
                           A   250    .VALUE 3
                           A   251    .CLASS 8
                           A   252    .TYPE 556
                           A   253    .ENDEF
                           A   254    .ENDREC "NONAME4"
                           A   255    .BEGREC "NONAME5",264
                           A   256    .DEFINE "current_instruction"
                           A   257    .VALUE 0
                           A   258    .CLASS 8
                           A   259    .TAG "NONAME3"
                           A   260    .TYPE 40
                           A   261    .ENDEF
                           A   262    .DEFINE "next"
                           A   263    .VALUE 3
                           A   264    .CLASS 8
                           A   265    .TYPE 34
                           A   266    .ENDEF
                           A   267    .DEFINE "label"
                           A   268    .VALUE 6
                           A   269    .CLASS 8
                           A   270    .DIM 32
                           A   271    .TYPE 98
                           A   272    .ENDEF
                           A   273    .DEFINE "mnemonic"
                           A   274    .VALUE 38
                           A   275    .CLASS 8
                           A   276    .DIM 16
                           A   277    .TYPE 98
                           A   278    .ENDEF
                           A   279    .DEFINE "suffix"
                           A   280    .VALUE 54
                           A   281    .CLASS 8
                           A   282    .DIM 16
                           A   283    .TYPE 98
                           A   284    .ENDEF
                           A   285    .DEFINE "operand1"
                           A   286    .VALUE 70
                           A   287    .CLASS 8
                           A   288    .DIM 32
                           A   289    .TYPE 98
                           A   290    .ENDEF
                           A   291    .DEFINE "operand2"
                           A   292    .VALUE 102
                           A   293    .CLASS 8
                           A   294    .DIM 32
                           A   295    .TYPE 98
                           A   296    .ENDEF
                           A   297    .DEFINE "comment"
                           A   298    .VALUE 134
                           A   299    .CLASS 8
                           A   300    .DIM 128
                           A   301    .TYPE 98
                           A   302    .ENDEF
                           A   303    .DEFINE "size"
                           A   304    .VALUE 262
                           A   305    .CLASS 8
                           A   306    .TYPE 13
                           A   307    .ENDEF
                           A   308    .ENDREC "NONAME5"
                           A   309    .BEGREC "NONAME6",67
                           A   310    .DEFINE "linenumber"
                           A   311    .VALUE 0
                           A   312    .CLASS 8
                           A   313    .TYPE 13
                           A   314    .ENDEF
                           A   315    .DEFINE "fp"
                           A   316    .VALUE 2
                           A   317    .CLASS 8
                           A   318    .TYPE 12
                           A   319    .ENDEF
                           A   320    .DEFINE "filename"
                           A   321    .VALUE 3
                           A   322    .CLASS 8
                           A   323    .DIM 64
                           A   324    .TYPE 98
                           A   325    .ENDEF
                           A   326    .ENDREC "NONAME6"
                           A   327    .BEGREC "NONAME7",133
                           A   328    .DEFINE "start"
                           A   329    .VALUE 0
                           A   330    .CLASS 8
                           A   331    .DIM 128
                           A   332    .TYPE 98
                           A   333    .ENDEF
                           A   334    .DEFINE "length"
                           A   335    .VALUE 128
                           A   336    .CLASS 8
                           A   337    .TYPE 12
                           A   338    .ENDEF
                           A   339    .DEFINE "next"
                           A   340    .VALUE 129
                           A   341    .CLASS 8
                           A   342    .TYPE 34
                           A   343    .ENDEF
                           A   344    .DEFINE "terminator"
                           A   345    .VALUE 132
                           A   346    .CLASS 8
                           A   347    .TYPE 2
                           A   348    .ENDEF
                           A   349    .ENDREC "NONAME7"
                           A   350    	SEGMENT BSS
0484BA                     A   351    __filestack:
0484BA                     A   352    	DS	268
                           A   353    .DEFINE "_filestack"
                           A   354    .ALIAS "__filestack"
                           A   355    .CLASS 83
                           A   356    .VALUE __filestack
                           A   357    .DIM 4
                           A   358    .TAG "NONAME6"
                           A   359    .TYPE 104
                           A   360    .ENDEF
0485C6                     A   361    __filestackCount:
0485C6                     A   362    	DS	1
                           A   363    .DEFINE "_filestackCount"
                           A   364    .ALIAS "__filestackCount"
                           A   365    .CLASS 83
                           A   366    .VALUE __filestackCount
                           A   367    .TYPE 12
                           A   368    .ENDEF
                           A   369    ;    1	#include <string.h>
                           A   370    ;    2	#include "filestack.h"
                           A   371    ;    3	#include "utils.h"
                           A   372    ;    4	
                           A   373    ;    5	filestackitem _filestack[FILESTACK_MAXF
                           A   374    ;    6	uint8_t       _filestackCount;
                           A   375    	SEGMENT CODE
                           A   376    ;    7	
                           A   377    ;    8	void filestackInit(void) {
042CF8                     A   378    _filestackInit:
                           A   379    .DEFINE "_filestackInit"
                           A   380    
                           A   381    .VALUE _filestackInit
                           A   382    
                           A   383    .CLASS 2
                           A   384    
                           A   385    .TYPE 65
                           A   386    
                           A   387    .ENDEF
                           A   388    
                           A   389    .BEGFUNC "filestackInit",8,"_filestackInit"
                           A   390    
042CF8 DDE5                A   391    	PUSH	IX
042CFA DD210000 00         A   392    	LD	IX,0
042CFF DD39                A   393    	ADD	IX,SP
                           A   394    ;    9	    _filestackCount = 0;
                           A   395    .LINE 9
                           A   396    
042D01 AF                  A   397    	XOR	A,A
042D02 32 C6 85 04         A   398    	LD	(__filestackCount),A
                           A   399    ;   10	}
                           A   400    .LINE 10
                           A   401    
042D06 DDF9                A   402    	LD	SP,IX
042D08 DDE1                A   403    	POP	IX
042D0A C9                  A   404    	RET	
                           A   405    
                           A   406    
                           A   407    ;**************************** _filestackInit **
                           A   408    ;Name                         Addr/Register   S
                           A   409    ;__filestackCount                    STATIC    
                           A   410    
                           A   411    
                           A   412    ; Stack Frame Size: 6 (bytes)
                           A   413    ;       Spill Code: 0 (instruction)
                           A   414    
                           A   415    
                           A   416    .ENDFUNC "filestackInit",10,"_filestackInit"
                           A   417    ;   11	
                           A   418    ;   12	uint8_t filestackCount(void) {
042D0B                     A   419    _filestackCount:
                           A   420    .DEFINE "_filestackCount"
                           A   421    
                           A   422    .VALUE _filestackCount
                           A   423    
                           A   424    .CLASS 2
                           A   425    
                           A   426    .TYPE 76
                           A   427    
                           A   428    .ENDEF
                           A   429    
                           A   430    .BEGFUNC "filestackCount",12,"_filestackCount"
                           A   431    
042D0B DDE5                A   432    	PUSH	IX
042D0D DD210000 00         A   433    	LD	IX,0
042D12 DD39                A   434    	ADD	IX,SP
                           A   435    ;   13	    return _filestackCount;
                           A   436    .LINE 13
                           A   437    
042D14 3A C6 85 04         A   438    	LD	A,(__filestackCount)
                           A   439    ;   14	}
                           A   440    .LINE 14
                           A   441    
042D18 DDF9                A   442    	LD	SP,IX
042D1A DDE1                A   443    	POP	IX
042D1C C9                  A   444    	RET	
                           A   445    
                           A   446    
                           A   447    ;**************************** _filestackCount *
                           A   448    ;Name                         Addr/Register   S
                           A   449    ;__filestackCount                    STATIC    
                           A   450    
                           A   451    
                           A   452    ; Stack Frame Size: 6 (bytes)
                           A   453    ;       Spill Code: 0 (instruction)
                           A   454    
                           A   455    
                           A   456    .ENDFUNC "filestackCount",14,"_filestackCount"
                           A   457    ;   15	
                           A   458    ;   16	bool filestackPush(filestackitem *fs) {
042D1D                     A   459    _filestackPush:
                           A   460    .DEFINE "_filestackPush"
                           A   461    
                           A   462    .VALUE _filestackPush
                           A   463    
                           A   464    .CLASS 2
                           A   465    
                           A   466    .TYPE 76
                           A   467    
                           A   468    .ENDEF
                           A   469    
                           A   470    .BEGFUNC "filestackPush",16,"_filestackPush"
                           A   471    
                           A   472    .LINE 16
                           A   473    
                           A   474    .DEFINE "fs"
                           A   475    
                           A   476    .CLASS 65
                           A   477    
                           A   478    .VALUE 6
                           A   479    
                           A   480    .TAG "NONAME6"
                           A   481    
                           A   482    .TYPE 40
                           A   483    
                           A   484    .ENDEF
                           A   485    
042D1D DDE5                A   486    	PUSH	IX
042D1F DD210000 00         A   487    	LD	IX,0
042D24 DD39                A   488    	ADD	IX,SP
042D26 C5                  A   489    	PUSH	BC
                           A   490    ;   17	    if(_filestackCount < FILESTACK_MAXF
                           A   491    .LINE 17
                           A   492    
042D27 3A C6 85 04         A   493    	LD	A,(__filestackCount)
042D2B FE04                A   494    	CP	A,%4
042D2D 30 63               A   495    	JR	NC,L_4
                           A   496    ;   18	        _filestack[_filestackCount].lin
                           A   497    .LINE 18
                           A   498    
042D2F 3A C6 85 04         A   499    	LD	A,(__filestackCount)
042D33 B7ED62              A   500    	UEXT	HL
042D36 6F                  A   501    	LD	L,A
042D37 3E43                A   502    	LD	A,%43
042D39 CD A4 63 04         A   503    	CALL	__imul_b
042D3D 01 BA 84 04         A   504    	LD	BC,__filestack
042D41 09                  A   505    	ADD	HL,BC
042D42 DD2FFD              A   506    	LD	(IX+%FFFFFFFD),HL
042D45 DD3106              A   507    	LD	IY,(IX+%6)
042D48 FD0700              A   508    	LD	BC,(IY+%0)
042D4B DD31FD              A   509    	LD	IY,(IX+%FFFFFFFD)
042D4E FD7100              A   510    	LD	(IY+%0),C
042D51 FD7001              A   511    	LD	(IY+%1),B
                           A   512    ;   19	        _filestack[_filestackCount].fp 
                           A   513    .LINE 19
                           A   514    
042D54 DD3106              A   515    	LD	IY,(IX+%6)
042D57 FD7E02              A   516    	LD	A,(IY+%2)
042D5A DD31FD              A   517    	LD	IY,(IX+%FFFFFFFD)
042D5D FD7702              A   518    	LD	(IY+%2),A
                           A   519    ;   20	        strcpy(_filestack[_filestackCou
                           A   520    .LINE 20
                           A   521    
042D60 DD3106              A   522    	LD	IY,(IX+%6)
042D63 ED6603              A   523    	PEA	IY+%3
042D66 3A C6 85 04         A   524    	LD	A,(__filestackCount)
042D6A B7ED62              A   525    	UEXT	HL
042D6D 6F                  A   526    	LD	L,A
042D6E 3E43                A   527    	LD	A,%43
042D70 CD A4 63 04         A   528    	CALL	__imul_b
042D74 01 BA 84 04         A   529    	LD	BC,__filestack
042D78 09                  A   530    	ADD	HL,BC
042D79 E5FDE1              A   531    	LD	IY,HL
042D7C ED6603              A   532    	PEA	IY+%3
042D7F CD 09 61 04         A   533    	CALL	_strcpy
042D83 C1                  A   534    	POP	BC
042D84 C1                  A   535    	POP	BC
                           A   536    ;   21	        _filestackCount++;
                           A   537    .LINE 21
                           A   538    
042D85 3A C6 85 04         A   539    	LD	A,(__filestackCount)
042D89 3C                  A   540    	INC	A
042D8A 32 C6 85 04         A   541    	LD	(__filestackCount),A
                           A   542    ;   22	        return true;
                           A   543    .LINE 22
                           A   544    
042D8E 3E01                A   545    	LD	A,%1
042D90 18 0D               A   546    	JR	L_6
                           A   547    ;   23	    }
                           A   548    ;   24	    else error(message[ERROR_MAXINCLUDE
042D92                     A   549    L_4:
                           A   550    .LINE 24
                           A   551    
042D92 21 BA 64 04         A   552    	LD	HL,_message+120
042D96 ED07                A   553    	LD	BC,(HL)
042D98 C5                  A   554    	PUSH	BC
042D99 CD DC 4B 04         A   555    	CALL	_error
042D9D C1                  A   556    	POP	BC
                           A   557    ;   25	    return false;
                           A   558    .LINE 25
                           A   559    
042D9E AF                  A   560    	XOR	A,A
                           A   561    ;   26	}
042D9F                     A   562    L_6:
                           A   563    .LINE 26
                           A   564    
042D9F DDF9                A   565    	LD	SP,IX
042DA1 DDE1                A   566    	POP	IX
042DA3 C9                  A   567    	RET	
                           A   568    
                           A   569    
                           A   570    ;**************************** _filestackPush **
                           A   571    ;Name                         Addr/Register   S
                           A   572    ;_message                            IMPORT  un
                           A   573    ;_error                              IMPORT  --
                           A   574    ;_strcpy                             IMPORT  --
                           A   575    ;__filestack                         STATIC    
                           A   576    ;__filestackCount                    STATIC    
                           A   577    ;fs                                    IX+6    
                           A   578    
                           A   579    
                           A   580    ; Stack Frame Size: 12 (bytes)
                           A   581    ;       Spill Code: 0 (instruction)
                           A   582    
                           A   583    
                           A   584    .ENDFUNC "filestackPush",26,"_filestackPush"
                           A   585    ;   27	
                           A   586    ;   28	bool filestackPop(filestackitem *fs) {
042DA4                     A   587    _filestackPop:
                           A   588    .DEFINE "_filestackPop"
                           A   589    
                           A   590    .VALUE _filestackPop
                           A   591    
                           A   592    .CLASS 2
                           A   593    
                           A   594    .TYPE 76
                           A   595    
                           A   596    .ENDEF
                           A   597    
                           A   598    .BEGFUNC "filestackPop",28,"_filestackPop"
                           A   599    
                           A   600    .LINE 28
                           A   601    
                           A   602    .DEFINE "fs"
                           A   603    
                           A   604    .CLASS 65
                           A   605    
                           A   606    .VALUE 6
                           A   607    
                           A   608    .TAG "NONAME6"
                           A   609    
                           A   610    .TYPE 40
                           A   611    
                           A   612    .ENDEF
                           A   613    
042DA4 DDE5                A   614    	PUSH	IX
042DA6 DD210000 00         A   615    	LD	IX,0
042DAB DD39                A   616    	ADD	IX,SP
                           A   617    ;   29	    if(_filestackCount) {
                           A   618    .LINE 29
                           A   619    
042DAD 3A C6 85 04         A   620    	LD	A,(__filestackCount)
042DB1 B7                  A   621    	OR	A,A
042DB2 28 6B               A   622    	JR	Z,L_9
                           A   623    ;   30	        _filestackCount--;
                           A   624    .LINE 30
                           A   625    
042DB4 3A C6 85 04         A   626    	LD	A,(__filestackCount)
042DB8 3D                  A   627    	DEC	A
042DB9 32 C6 85 04         A   628    	LD	(__filestackCount),A
                           A   629    ;   31	        fs->linenumber = _filestack[_fi
                           A   630    .LINE 31
                           A   631    
042DBD B7ED62              A   632    	UEXT	HL
042DC0 6F                  A   633    	LD	L,A
042DC1 3E43                A   634    	LD	A,%43
042DC3 CD A4 63 04         A   635    	CALL	__imul_b
042DC7 01 BA 84 04         A   636    	LD	BC,__filestack
042DCB 09                  A   637    	ADD	HL,BC
042DCC E5FDE1              A   638    	LD	IY,HL
042DCF FD0700              A   639    	LD	BC,(IY+%0)
042DD2 DD3106              A   640    	LD	IY,(IX+%6)
042DD5 FD7100              A   641    	LD	(IY+%0),C
042DD8 FD7001              A   642    	LD	(IY+%1),B
                           A   643    ;   32	        fs->fp = _filestack[_filestackC
                           A   644    .LINE 32
                           A   645    
042DDB 3A C6 85 04         A   646    	LD	A,(__filestackCount)
042DDF B7ED62              A   647    	UEXT	HL
042DE2 6F                  A   648    	LD	L,A
042DE3 3E43                A   649    	LD	A,%43
042DE5 CD A4 63 04         A   650    	CALL	__imul_b
042DE9 01 BA 84 04         A   651    	LD	BC,__filestack
042DED 09                  A   652    	ADD	HL,BC
042DEE E5FDE1              A   653    	LD	IY,HL
042DF1 FD7E02              A   654    	LD	A,(IY+%2)
042DF4 DD3106              A   655    	LD	IY,(IX+%6)
042DF7 FD7702              A   656    	LD	(IY+%2),A
                           A   657    ;   33	        strcpy(fs->filename, _filestack
                           A   658    .LINE 33
                           A   659    
042DFA 3A C6 85 04         A   660    	LD	A,(__filestackCount)
042DFE B7ED62              A   661    	UEXT	HL
042E01 6F                  A   662    	LD	L,A
042E02 3E43                A   663    	LD	A,%43
042E04 CD A4 63 04         A   664    	CALL	__imul_b
042E08 09                  A   665    	ADD	HL,BC
042E09 E5FDE1              A   666    	LD	IY,HL
042E0C ED6603              A   667    	PEA	IY+%3
042E0F DD3106              A   668    	LD	IY,(IX+%6)
042E12 ED6603              A   669    	PEA	IY+%3
042E15 CD 09 61 04         A   670    	CALL	_strcpy
042E19 C1                  A   671    	POP	BC
042E1A C1                  A   672    	POP	BC
                           A   673    ;   34	        return true;
                           A   674    .LINE 34
                           A   675    
042E1B 3E01                A   676    	LD	A,%1
042E1D 18 01               A   677    	JR	L_10
                           A   678    ;   35	    }
042E1F                     A   679    L_9:
                           A   680    .LINE 35
                           A   681    
                           A   682    ;   36	    return false;
                           A   683    .LINE 36
                           A   684    
042E1F AF                  A   685    	XOR	A,A
                           A   686    ;   37	}
042E20                     A   687    L_10:
                           A   688    .LINE 37
                           A   689    
042E20 DDF9                A   690    	LD	SP,IX
042E22 DDE1                A   691    	POP	IX
042E24 C9                  A   692    	RET	
                           A   693    
                           A   694    
                           A   695    ;**************************** _filestackPop ***
                           A   696    ;Name                         Addr/Register   S
                           A   697    ;_strcpy                             IMPORT  --
                           A   698    ;__filestack                         STATIC    
                           A   699    ;__filestackCount                    STATIC    
                           A   700    ;fs                                    IX+6    
                           A   701    
                           A   702    
                           A   703    ; Stack Frame Size: 9 (bytes)
                           A   704    ;       Spill Code: 0 (instruction)
                           A   705    
                           A   706    
                           A   707    .ENDFUNC "filestackPop",37,"_filestackPop"
                           A   708    	XREF _error:ROM
                           A   709    	XREF _message:ROM
                           A   710    	XREF _strcpy:ROM
                           A   711    	XREF __imul_b:ROM
                           A   712    	XDEF _filestackPop
                           A   713    	XDEF _filestackPush
                           A   714    	XDEF _filestackCount
                           A   715    	XDEF _filestackInit
                           A   716    	XDEF __filestackCount
                           A   717    	XDEF __filestack
                           A   718    	END


Errors: 0
Warnings: 0
Lines Assembled: 719
