Zilog eZ80 Macro Assembler Version 4.3 (19073001) RELISTED01-Mar-23     14:26:44     page:   1


PC     Object              I  Line    Source 
                           A     1    ; Zilog eZ80 ANSI C Compiler Release 3.4
                           A     2    ; -nomodsect -optsize -noreduceopt -nopadbranch
                           A     3    ; -peephole -globalopt -localcse -const=ROM 
                           A     4    	FILE	"..\vdp.c"
                           A     5    	.assume ADL=1
                           A     6    .DEBUG "C"
                           A     7    	SEGMENT CODE
                           A     8    ;    1	#include <defines.h>
                           A     9    ;    2	#include "mos-interface.h"
                           A    10    ;    3	
                           A    11    ;    4	// Generic functions
                           A    12    ;    5	
                           A    13    ;    6	void write16bit(UINT16 w)
                           A    14    ;    7	{
0401F2                     A    15    _write16bit:
                           A    16    .DEFINE "_write16bit"
                           A    17    
                           A    18    .VALUE _write16bit
                           A    19    
                           A    20    .CLASS 2
                           A    21    
                           A    22    .TYPE 65
                           A    23    
                           A    24    .ENDEF
                           A    25    
                           A    26    .BEGFUNC "write16bit",7,"_write16bit"
                           A    27    
                           A    28    .LINE 7
                           A    29    
                           A    30    .DEFINE "w"
                           A    31    
                           A    32    .CLASS 65
                           A    33    
                           A    34    .VALUE 6
                           A    35    
                           A    36    .TYPE 13
                           A    37    
                           A    38    .ENDEF
                           A    39    
0401F2 DDE5                A    40    	PUSH	IX
0401F4 DD210000 00         A    41    	LD	IX,0
0401F9 DD39                A    42    	ADD	IX,SP
                           A    43    ;    8		putch(w & 0xFF); // write LSB
                           A    44    .LINE 8
                           A    45    
0401FB DD0706              A    46    	LD	BC,(IX+%6)
0401FE CD 96 66 04         A    47    	CALL	__stoiu
040202 7D                  A    48    	LD	A,L
040203 B7ED62              A    49    	UEXT	HL
040206 6F                  A    50    	LD	L,A
040207 E5                  A    51    	PUSH	HL
040208 CD EC 0C 04         A    52    	CALL	_putch
04020C C1                  A    53    	POP	BC
                           A    54    ;    9		putch(w >> 8);	 // write MSB	
                           A    55    .LINE 9
                           A    56    
04020D DD0706              A    57    	LD	BC,(IX+%6)
040210 CD 96 66 04         A    58    	CALL	__stoiu
040214 3E08                A    59    	LD	A,%8
040216 CD 9F 64 04         A    60    	CALL	__ishrs_b
04021A E5                  A    61    	PUSH	HL
04021B CD EC 0C 04         A    62    	CALL	_putch
04021F C1                  A    63    	POP	BC
                           A    64    ;   10	}
                           A    65    .LINE 10
                           A    66    
040220 DDF9                A    67    	LD	SP,IX
040222 DDE1                A    68    	POP	IX
040224 C9                  A    69    	RET	
                           A    70    
                           A    71    
                           A    72    ;**************************** _write16bit *****
                           A    73    ;Name                         Addr/Register   S
                           A    74    ;_putch                              IMPORT  --
                           A    75    ;w                                     IX+6    
                           A    76    
                           A    77    
                           A    78    ; Stack Frame Size: 9 (bytes)
                           A    79    ;       Spill Code: 0 (instruction)
                           A    80    
                           A    81    
                           A    82    .ENDFUNC "write16bit",10,"_write16bit"
                           A    83    ;   11	
                           A    84    ;   12	void write32bit(UINT32 l)
                           A    85    ;   13	{
040225                     A    86    _write32bit:
                           A    87    .DEFINE "_write32bit"
                           A    88    
                           A    89    .VALUE _write32bit
                           A    90    
                           A    91    .CLASS 2
                           A    92    
                           A    93    .TYPE 65
                           A    94    
                           A    95    .ENDEF
                           A    96    
                           A    97    .BEGFUNC "write32bit",13,"_write32bit"
                           A    98    
                           A    99    .LINE 13
                           A   100    
                           A   101    .DEFINE "l"
                           A   102    
                           A   103    .CLASS 65
                           A   104    
                           A   105    .VALUE 6
                           A   106    
                           A   107    .TYPE 15
                           A   108    
                           A   109    .ENDEF
                           A   110    
                           A   111    .DEFINE "temp"
                           A   112    
                           A   113    .CLASS 65
                           A   114    
                           A   115    .VALUE -4
                           A   116    
                           A   117    .TYPE 15
                           A   118    
                           A   119    .ENDEF
                           A   120    
040225 DDE5                A   121    	PUSH	IX
040227 DD210000 00         A   122    	LD	IX,0
04022C DD39                A   123    	ADD	IX,SP
04022E C5                  A   124    	PUSH	BC
04022F 3B                  A   125    	DEC	SP
                           A   126    ;   14		UINT32 temp = l;
                           A   127    ;   15		
                           A   128    ;   16		putch(temp & 0xFF); // write LSB
                           A   129    .LINE 16
                           A   130    
040230 DD2706              A   131    	LD	HL,(IX+%6)
040233 7D                  A   132    	LD	A,L
040234 B7ED62              A   133    	UEXT	HL
040237 6F                  A   134    	LD	L,A
040238 E5                  A   135    	PUSH	HL
040239 CD EC 0C 04         A   136    	CALL	_putch
04023D C1                  A   137    	POP	BC
                           A   138    ;   17		temp = temp >> 8;
                           A   139    .LINE 17
                           A   140    
04023E DD0706              A   141    	LD	BC,(IX+%6)
040241 DD7E09              A   142    	LD	A,(IX+%9)
040244 2E08                A   143    	LD	L,%8
040246 CD 9D 6A 04         A   144    	CALL	__lshru
04024A DD0FFC              A   145    	LD	(IX+%FFFFFFFC),BC
04024D DD77FF              A   146    	LD	(IX+%FFFFFFFF),A
                           A   147    ;   18		putch(temp & 0xFF);
                           A   148    .LINE 18
                           A   149    
040250 C5E1                A   150    	LD	HL,BC
040252 7D                  A   151    	LD	A,L
040253 B7ED62              A   152    	UEXT	HL
040256 6F                  A   153    	LD	L,A
040257 E5                  A   154    	PUSH	HL
040258 CD EC 0C 04         A   155    	CALL	_putch
04025C C1                  A   156    	POP	BC
                           A   157    ;   19		temp = temp >> 8;
                           A   158    .LINE 19
                           A   159    
04025D DD07FC              A   160    	LD	BC,(IX+%FFFFFFFC)
040260 DD7EFF              A   161    	LD	A,(IX+%FFFFFFFF)
040263 2E08                A   162    	LD	L,%8
040265 CD 9D 6A 04         A   163    	CALL	__lshru
040269 DD0FFC              A   164    	LD	(IX+%FFFFFFFC),BC
04026C DD77FF              A   165    	LD	(IX+%FFFFFFFF),A
                           A   166    ;   20		putch(temp & 0xFF);
                           A   167    .LINE 20
                           A   168    
04026F C5E1                A   169    	LD	HL,BC
040271 7D                  A   170    	LD	A,L
040272 B7ED62              A   171    	UEXT	HL
040275 6F                  A   172    	LD	L,A
040276 E5                  A   173    	PUSH	HL
040277 CD EC 0C 04         A   174    	CALL	_putch
04027B C1                  A   175    	POP	BC
                           A   176    ;   21		temp = temp >> 8;
                           A   177    .LINE 21
                           A   178    
04027C DD07FC              A   179    	LD	BC,(IX+%FFFFFFFC)
04027F DD7EFF              A   180    	LD	A,(IX+%FFFFFFFF)
040282 2E08                A   181    	LD	L,%8
040284 CD 9D 6A 04         A   182    	CALL	__lshru
040288 DD0FFC              A   183    	LD	(IX+%FFFFFFFC),BC
04028B DD77FF              A   184    	LD	(IX+%FFFFFFFF),A
                           A   185    ;   22		putch(temp & 0xFF);
                           A   186    .LINE 22
                           A   187    
04028E C5E1                A   188    	LD	HL,BC
040290 7D                  A   189    	LD	A,L
040291 B7ED62              A   190    	UEXT	HL
040294 6F                  A   191    	LD	L,A
040295 E5                  A   192    	PUSH	HL
040296 CD EC 0C 04         A   193    	CALL	_putch
04029A C1                  A   194    	POP	BC
                           A   195    ;   23		return;	
                           A   196    ;   24	}
                           A   197    .LINE 24
                           A   198    
04029B DDF9                A   199    	LD	SP,IX
04029D DDE1                A   200    	POP	IX
04029F C9                  A   201    	RET	
                           A   202    
                           A   203    
                           A   204    ;**************************** _write32bit *****
                           A   205    ;Name                         Addr/Register   S
                           A   206    ;_putch                              IMPORT  --
                           A   207    ;temp                                  IX-4    
                           A   208    ;l                                     IX+6    
                           A   209    
                           A   210    
                           A   211    ; Stack Frame Size: 16 (bytes)
                           A   212    ;       Spill Code: 0 (instruction)
                           A   213    
                           A   214    
                           A   215    .ENDFUNC "write32bit",24,"_write32bit"
                           A   216    ;   25	
                           A   217    ;   26	void vdp_mode(unsigned char mode)
                           A   218    ;   27	{
0402A0                     A   219    _vdp_mode:
                           A   220    .DEFINE "_vdp_mode"
                           A   221    
                           A   222    .VALUE _vdp_mode
                           A   223    
                           A   224    .CLASS 2
                           A   225    
                           A   226    .TYPE 65
                           A   227    
                           A   228    .ENDEF
                           A   229    
                           A   230    .BEGFUNC "vdp_mode",27,"_vdp_mode"
                           A   231    
                           A   232    .LINE 27
                           A   233    
                           A   234    .DEFINE "mode"
                           A   235    
                           A   236    .CLASS 65
                           A   237    
                           A   238    .VALUE 6
                           A   239    
                           A   240    .TYPE 12
                           A   241    
                           A   242    .ENDEF
                           A   243    
0402A0 DDE5                A   244    	PUSH	IX
0402A2 DD210000 00         A   245    	LD	IX,0
0402A7 DD39                A   246    	ADD	IX,SP
                           A   247    ;   28	    putch(22);
                           A   248    .LINE 28
                           A   249    
0402A9 01160000            A   250    	LD	BC,22
0402AD C5                  A   251    	PUSH	BC
0402AE CD EC 0C 04         A   252    	CALL	_putch
0402B2 C1                  A   253    	POP	BC
                           A   254    ;   29	    putch(mode);
                           A   255    .LINE 29
                           A   256    
0402B3 DD7E06              A   257    	LD	A,(IX+%6)
0402B6 B7ED62              A   258    	UEXT	HL
0402B9 6F                  A   259    	LD	L,A
0402BA E5                  A   260    	PUSH	HL
0402BB CD EC 0C 04         A   261    	CALL	_putch
0402BF C1                  A   262    	POP	BC
                           A   263    ;   30	}
                           A   264    .LINE 30
                           A   265    
0402C0 DDF9                A   266    	LD	SP,IX
0402C2 DDE1                A   267    	POP	IX
0402C4 C9                  A   268    	RET	
                           A   269    
                           A   270    
                           A   271    ;**************************** _vdp_mode *******
                           A   272    ;Name                         Addr/Register   S
                           A   273    ;_putch                              IMPORT  --
                           A   274    ;mode                                  IX+6    
                           A   275    
                           A   276    
                           A   277    ; Stack Frame Size: 9 (bytes)
                           A   278    ;       Spill Code: 0 (instruction)
                           A   279    
                           A   280    
                           A   281    .ENDFUNC "vdp_mode",30,"_vdp_mode"
                           A   282    ;   31	
                           A   283    ;   32	// Text functions
                           A   284    ;   33	void vdp_cls()
                           A   285    ;   34	{
0402C5                     A   286    _vdp_cls:
                           A   287    .DEFINE "_vdp_cls"
                           A   288    
                           A   289    .VALUE _vdp_cls
                           A   290    
                           A   291    .CLASS 2
                           A   292    
                           A   293    .TYPE 65
                           A   294    
                           A   295    .ENDEF
                           A   296    
                           A   297    .BEGFUNC "vdp_cls",34,"_vdp_cls"
                           A   298    
0402C5 DDE5                A   299    	PUSH	IX
0402C7 DD210000 00         A   300    	LD	IX,0
0402CC DD39                A   301    	ADD	IX,SP
                           A   302    ;   35	    putch(12);
                           A   303    .LINE 35
                           A   304    
0402CE 010C0000            A   305    	LD	BC,12
0402D2 C5                  A   306    	PUSH	BC
0402D3 CD EC 0C 04         A   307    	CALL	_putch
0402D7 C1                  A   308    	POP	BC
                           A   309    ;   36	}
                           A   310    .LINE 36
                           A   311    
0402D8 DDF9                A   312    	LD	SP,IX
0402DA DDE1                A   313    	POP	IX
0402DC C9                  A   314    	RET	
                           A   315    
                           A   316    
                           A   317    ;**************************** _vdp_cls ********
                           A   318    ;Name                         Addr/Register   S
                           A   319    ;_putch                              IMPORT  --
                           A   320    
                           A   321    
                           A   322    ; Stack Frame Size: 6 (bytes)
                           A   323    ;       Spill Code: 0 (instruction)
                           A   324    
                           A   325    
                           A   326    .ENDFUNC "vdp_cls",36,"_vdp_cls"
                           A   327    ;   37	
                           A   328    ;   38	void vdp_cursorHome()
                           A   329    ;   39	{
0402DD                     A   330    _vdp_cursorHome:
                           A   331    .DEFINE "_vdp_cursorHome"
                           A   332    
                           A   333    .VALUE _vdp_cursorHome
                           A   334    
                           A   335    .CLASS 2
                           A   336    
                           A   337    .TYPE 65
                           A   338    
                           A   339    .ENDEF
                           A   340    
                           A   341    .BEGFUNC "vdp_cursorHome",39,"_vdp_cursorHome"
                           A   342    
0402DD DDE5                A   343    	PUSH	IX
0402DF DD210000 00         A   344    	LD	IX,0
0402E4 DD39                A   345    	ADD	IX,SP
                           A   346    ;   40	    putch(30);
                           A   347    .LINE 40
                           A   348    
0402E6 011E0000            A   349    	LD	BC,30
0402EA C5                  A   350    	PUSH	BC
0402EB CD EC 0C 04         A   351    	CALL	_putch
0402EF C1                  A   352    	POP	BC
                           A   353    ;   41	}
                           A   354    .LINE 41
                           A   355    
0402F0 DDF9                A   356    	LD	SP,IX
0402F2 DDE1                A   357    	POP	IX
0402F4 C9                  A   358    	RET	
                           A   359    
                           A   360    
                           A   361    ;**************************** _vdp_cursorHome *
                           A   362    ;Name                         Addr/Register   S
                           A   363    ;_putch                              IMPORT  --
                           A   364    
                           A   365    
                           A   366    ; Stack Frame Size: 6 (bytes)
                           A   367    ;       Spill Code: 0 (instruction)
                           A   368    
                           A   369    
                           A   370    .ENDFUNC "vdp_cursorHome",41,"_vdp_cursorHome"
                           A   371    ;   42	
                           A   372    ;   43	void vdp_cursorUp()
                           A   373    ;   44	{
0402F5                     A   374    _vdp_cursorUp:
                           A   375    .DEFINE "_vdp_cursorUp"
                           A   376    
                           A   377    .VALUE _vdp_cursorUp
                           A   378    
                           A   379    .CLASS 2
                           A   380    
                           A   381    .TYPE 65
                           A   382    
                           A   383    .ENDEF
                           A   384    
                           A   385    .BEGFUNC "vdp_cursorUp",44,"_vdp_cursorUp"
                           A   386    
0402F5 DDE5                A   387    	PUSH	IX
0402F7 DD210000 00         A   388    	LD	IX,0
0402FC DD39                A   389    	ADD	IX,SP
                           A   390    ;   45	    putch(11);
                           A   391    .LINE 45
                           A   392    
0402FE 010B0000            A   393    	LD	BC,11
040302 C5                  A   394    	PUSH	BC
040303 CD EC 0C 04         A   395    	CALL	_putch
040307 C1                  A   396    	POP	BC
                           A   397    ;   46	}
                           A   398    .LINE 46
                           A   399    
040308 DDF9                A   400    	LD	SP,IX
04030A DDE1                A   401    	POP	IX
04030C C9                  A   402    	RET	
                           A   403    
                           A   404    
                           A   405    ;**************************** _vdp_cursorUp ***
                           A   406    ;Name                         Addr/Register   S
                           A   407    ;_putch                              IMPORT  --
                           A   408    
                           A   409    
                           A   410    ; Stack Frame Size: 6 (bytes)
                           A   411    ;       Spill Code: 0 (instruction)
                           A   412    
                           A   413    
                           A   414    .ENDFUNC "vdp_cursorUp",46,"_vdp_cursorUp"
                           A   415    ;   47	
                           A   416    ;   48	void vdp_cursorGoto(unsigned char x, un
                           A   417    ;   49	{
04030D                     A   418    _vdp_cursorGoto:
                           A   419    .DEFINE "_vdp_cursorGoto"
                           A   420    
                           A   421    .VALUE _vdp_cursorGoto
                           A   422    
                           A   423    .CLASS 2
                           A   424    
                           A   425    .TYPE 65
                           A   426    
                           A   427    .ENDEF
                           A   428    
                           A   429    .BEGFUNC "vdp_cursorGoto",49,"_vdp_cursorGoto"
                           A   430    
                           A   431    .LINE 49
                           A   432    
                           A   433    .DEFINE "x"
                           A   434    
                           A   435    .CLASS 65
                           A   436    
                           A   437    .VALUE 6
                           A   438    
                           A   439    .TYPE 12
                           A   440    
                           A   441    .ENDEF
                           A   442    
                           A   443    .DEFINE "y"
                           A   444    
                           A   445    .CLASS 65
                           A   446    
                           A   447    .VALUE 9
                           A   448    
                           A   449    .TYPE 12
                           A   450    
                           A   451    .ENDEF
                           A   452    
04030D DDE5                A   453    	PUSH	IX
04030F DD210000 00         A   454    	LD	IX,0
040314 DD39                A   455    	ADD	IX,SP
                           A   456    ;   50	    putch(31); // TAB
                           A   457    .LINE 50
                           A   458    
040316 011F0000            A   459    	LD	BC,31
04031A C5                  A   460    	PUSH	BC
04031B CD EC 0C 04         A   461    	CALL	_putch
04031F C1                  A   462    	POP	BC
                           A   463    ;   51	    putch(x);
                           A   464    .LINE 51
                           A   465    
040320 DD7E06              A   466    	LD	A,(IX+%6)
040323 B7ED62              A   467    	UEXT	HL
040326 6F                  A   468    	LD	L,A
040327 E5                  A   469    	PUSH	HL
040328 CD EC 0C 04         A   470    	CALL	_putch
04032C C1                  A   471    	POP	BC
                           A   472    ;   52	    putch(y);
                           A   473    .LINE 52
                           A   474    
04032D DD7E09              A   475    	LD	A,(IX+%9)
040330 B7ED62              A   476    	UEXT	HL
040333 6F                  A   477    	LD	L,A
040334 E5                  A   478    	PUSH	HL
040335 CD EC 0C 04         A   479    	CALL	_putch
040339 C1                  A   480    	POP	BC
                           A   481    ;   53	}
                           A   482    .LINE 53
                           A   483    
04033A DDF9                A   484    	LD	SP,IX
04033C DDE1                A   485    	POP	IX
04033E C9                  A   486    	RET	
                           A   487    
                           A   488    
                           A   489    ;**************************** _vdp_cursorGoto *
                           A   490    ;Name                         Addr/Register   S
                           A   491    ;_putch                              IMPORT  --
                           A   492    ;y                                     IX+9    
                           A   493    ;x                                     IX+6    
                           A   494    
                           A   495    
                           A   496    ; Stack Frame Size: 12 (bytes)
                           A   497    ;       Spill Code: 0 (instruction)
                           A   498    
                           A   499    
                           A   500    .ENDFUNC "vdp_cursorGoto",53,"_vdp_cursorGoto"
                           A   501    ;   54	
                           A   502    ;   55	void vdp_colour(unsigned char foregroun
                           A   503    ;   56	{
04033F                     A   504    _vdp_colour:
                           A   505    .DEFINE "_vdp_colour"
                           A   506    
                           A   507    .VALUE _vdp_colour
                           A   508    
                           A   509    .CLASS 2
                           A   510    
                           A   511    .TYPE 65
                           A   512    
                           A   513    .ENDEF
                           A   514    
                           A   515    .BEGFUNC "vdp_colour",56,"_vdp_colour"
                           A   516    
                           A   517    .LINE 56
                           A   518    
                           A   519    .DEFINE "foreground"
                           A   520    
                           A   521    .CLASS 65
                           A   522    
                           A   523    .VALUE 6
                           A   524    
                           A   525    .TYPE 12
                           A   526    
                           A   527    .ENDEF
                           A   528    
                           A   529    .DEFINE "r"
                           A   530    
                           A   531    .CLASS 65
                           A   532    
                           A   533    .VALUE 9
                           A   534    
                           A   535    .TYPE 12
                           A   536    
                           A   537    .ENDEF
                           A   538    
                           A   539    .DEFINE "g"
                           A   540    
                           A   541    .CLASS 65
                           A   542    
                           A   543    .VALUE 12
                           A   544    
                           A   545    .TYPE 12
                           A   546    
                           A   547    .ENDEF
                           A   548    
                           A   549    .DEFINE "b"
                           A   550    
                           A   551    .CLASS 65
                           A   552    
                           A   553    .VALUE 15
                           A   554    
                           A   555    .TYPE 12
                           A   556    
                           A   557    .ENDEF
                           A   558    
04033F DDE5                A   559    	PUSH	IX
040341 DD210000 00         A   560    	LD	IX,0
040346 DD39                A   561    	ADD	IX,SP
040348 C5                  A   562    	PUSH	BC
                           A   563    ;   57	    putch(17); // COLOUR
                           A   564    .LINE 57
                           A   565    
040349 01110000            A   566    	LD	BC,17
04034D C5                  A   567    	PUSH	BC
04034E CD EC 0C 04         A   568    	CALL	_putch
040352 C1                  A   569    	POP	BC
                           A   570    ;   58	    putch(!foreground);
                           A   571    .LINE 58
                           A   572    
040353 DD7E06              A   573    	LD	A,(IX+%6)
040356 B7                  A   574    	OR	A,A
040357 20 09               A   575    	JR	NZ,L_8
040359 01010000            A   576    	LD	BC,1
04035D DD0FFD              A   577    	LD	(IX+%FFFFFFFD),BC
040360 18 07               A   578    	JR	L_9
040362                     A   579    L_8:
040362 01000000            A   580    	LD	BC,0
040366 DD0FFD              A   581    	LD	(IX+%FFFFFFFD),BC
040369                     A   582    L_9:
040369 DD07FD              A   583    	LD	BC,(IX+%FFFFFFFD)
04036C C5                  A   584    	PUSH	BC
04036D CD EC 0C 04         A   585    	CALL	_putch
040371 C1                  A   586    	POP	BC
                           A   587    ;   59	    putch(r);
                           A   588    .LINE 59
                           A   589    
040372 DD7E09              A   590    	LD	A,(IX+%9)
040375 B7ED62              A   591    	UEXT	HL
040378 6F                  A   592    	LD	L,A
040379 E5                  A   593    	PUSH	HL
04037A CD EC 0C 04         A   594    	CALL	_putch
04037E C1                  A   595    	POP	BC
                           A   596    ;   60	    putch(g);
                           A   597    .LINE 60
                           A   598    
04037F DD7E0C              A   599    	LD	A,(IX+%C)
040382 B7ED62              A   600    	UEXT	HL
040385 6F                  A   601    	LD	L,A
040386 E5                  A   602    	PUSH	HL
040387 CD EC 0C 04         A   603    	CALL	_putch
04038B C1                  A   604    	POP	BC
                           A   605    ;   61	    putch(b);
                           A   606    .LINE 61
                           A   607    
04038C DD7E0F              A   608    	LD	A,(IX+%F)
04038F B7ED62              A   609    	UEXT	HL
040392 6F                  A   610    	LD	L,A
040393 E5                  A   611    	PUSH	HL
040394 CD EC 0C 04         A   612    	CALL	_putch
040398 C1                  A   613    	POP	BC
                           A   614    ;   62	}
                           A   615    .LINE 62
                           A   616    
040399 DDF9                A   617    	LD	SP,IX
04039B DDE1                A   618    	POP	IX
04039D C9                  A   619    	RET	
                           A   620    
                           A   621    
                           A   622    ;**************************** _vdp_colour *****
                           A   623    ;Name                         Addr/Register   S
                           A   624    ;_putch                              IMPORT  --
                           A   625    ;temp10                                IX-3    
                           A   626    ;b                                    IX+15    
                           A   627    ;g                                    IX+12    
                           A   628    ;r                                     IX+9    
                           A   629    ;foreground                            IX+6    
                           A   630    
                           A   631    
                           A   632    ; Stack Frame Size: 21 (bytes)
                           A   633    ;       Spill Code: 0 (instruction)
                           A   634    
                           A   635    
                           A   636    .ENDFUNC "vdp_colour",62,"_vdp_colour"
                           A   637    ;   63	
                           A   638    ;   64	void vdp_fgcolour(unsigned char r, unsi
                           A   639    ;   65	{
04039E                     A   640    _vdp_fgcolour:
                           A   641    .DEFINE "_vdp_fgcolour"
                           A   642    
                           A   643    .VALUE _vdp_fgcolour
                           A   644    
                           A   645    .CLASS 2
                           A   646    
                           A   647    .TYPE 65
                           A   648    
                           A   649    .ENDEF
                           A   650    
                           A   651    .BEGFUNC "vdp_fgcolour",65,"_vdp_fgcolour"
                           A   652    
                           A   653    .LINE 65
                           A   654    
                           A   655    .DEFINE "r"
                           A   656    
                           A   657    .CLASS 65
                           A   658    
                           A   659    .VALUE 6
                           A   660    
                           A   661    .TYPE 12
                           A   662    
                           A   663    .ENDEF
                           A   664    
                           A   665    .DEFINE "g"
                           A   666    
                           A   667    .CLASS 65
                           A   668    
                           A   669    .VALUE 9
                           A   670    
                           A   671    .TYPE 12
                           A   672    
                           A   673    .ENDEF
                           A   674    
                           A   675    .DEFINE "b"
                           A   676    
                           A   677    .CLASS 65
                           A   678    
                           A   679    .VALUE 12
                           A   680    
                           A   681    .TYPE 12
                           A   682    
                           A   683    .ENDEF
                           A   684    
04039E DDE5                A   685    	PUSH	IX
0403A0 DD210000 00         A   686    	LD	IX,0
0403A5 DD39                A   687    	ADD	IX,SP
                           A   688    ;   66	    vdp_colour(1,r,g,b);
                           A   689    .LINE 66
                           A   690    
0403A7 DD4E0C              A   691    	LD	C,(IX+%C)
0403AA 0600                A   692    	LD	B,%0
0403AC C5                  A   693    	PUSH	BC
0403AD DD4E09              A   694    	LD	C,(IX+%9)
0403B0 C5                  A   695    	PUSH	BC
0403B1 DD4E06              A   696    	LD	C,(IX+%6)
0403B4 C5                  A   697    	PUSH	BC
0403B5 01010000            A   698    	LD	BC,1
0403B9 C5                  A   699    	PUSH	BC
0403BA CD 3F 03 04         A   700    	CALL	_vdp_colour
0403BE C1                  A   701    	POP	BC
0403BF C1                  A   702    	POP	BC
0403C0 C1                  A   703    	POP	BC
0403C1 C1                  A   704    	POP	BC
                           A   705    ;   67	}
                           A   706    .LINE 67
                           A   707    
0403C2 DDF9                A   708    	LD	SP,IX
0403C4 DDE1                A   709    	POP	IX
0403C6 C9                  A   710    	RET	
                           A   711    
                           A   712    
                           A   713    ;**************************** _vdp_fgcolour ***
                           A   714    ;Name                         Addr/Register   S
                           A   715    ;b                                    IX+12    
                           A   716    ;g                                     IX+9    
                           A   717    ;r                                     IX+6    
                           A   718    
                           A   719    
                           A   720    ; Stack Frame Size: 15 (bytes)
                           A   721    ;       Spill Code: 0 (instruction)
                           A   722    
                           A   723    
                           A   724    .ENDFUNC "vdp_fgcolour",67,"_vdp_fgcolour"
                           A   725    ;   68	
                           A   726    ;   69	void vdp_bgcolour(unsigned char r, unsi
                           A   727    ;   70	{
0403C7                     A   728    _vdp_bgcolour:
                           A   729    .DEFINE "_vdp_bgcolour"
                           A   730    
                           A   731    .VALUE _vdp_bgcolour
                           A   732    
                           A   733    .CLASS 2
                           A   734    
                           A   735    .TYPE 65
                           A   736    
                           A   737    .ENDEF
                           A   738    
                           A   739    .BEGFUNC "vdp_bgcolour",70,"_vdp_bgcolour"
                           A   740    
                           A   741    .LINE 70
                           A   742    
                           A   743    .DEFINE "r"
                           A   744    
                           A   745    .CLASS 65
                           A   746    
                           A   747    .VALUE 6
                           A   748    
                           A   749    .TYPE 12
                           A   750    
                           A   751    .ENDEF
                           A   752    
                           A   753    .DEFINE "g"
                           A   754    
                           A   755    .CLASS 65
                           A   756    
                           A   757    .VALUE 9
                           A   758    
                           A   759    .TYPE 12
                           A   760    
                           A   761    .ENDEF
                           A   762    
                           A   763    .DEFINE "b"
                           A   764    
                           A   765    .CLASS 65
                           A   766    
                           A   767    .VALUE 12
                           A   768    
                           A   769    .TYPE 12
                           A   770    
                           A   771    .ENDEF
                           A   772    
0403C7 DDE5                A   773    	PUSH	IX
0403C9 DD210000 00         A   774    	LD	IX,0
0403CE DD39                A   775    	ADD	IX,SP
                           A   776    ;   71	    vdp_colour(0,r,g,b);
                           A   777    .LINE 71
                           A   778    
0403D0 DD4E0C              A   779    	LD	C,(IX+%C)
0403D3 0600                A   780    	LD	B,%0
0403D5 C5                  A   781    	PUSH	BC
0403D6 DD4E09              A   782    	LD	C,(IX+%9)
0403D9 C5                  A   783    	PUSH	BC
0403DA DD4E06              A   784    	LD	C,(IX+%6)
0403DD C5                  A   785    	PUSH	BC
0403DE 01000000            A   786    	LD	BC,0
0403E2 C5                  A   787    	PUSH	BC
0403E3 CD 3F 03 04         A   788    	CALL	_vdp_colour
0403E7 C1                  A   789    	POP	BC
0403E8 C1                  A   790    	POP	BC
0403E9 C1                  A   791    	POP	BC
0403EA C1                  A   792    	POP	BC
                           A   793    ;   72	}
                           A   794    .LINE 72
                           A   795    
0403EB DDF9                A   796    	LD	SP,IX
0403ED DDE1                A   797    	POP	IX
0403EF C9                  A   798    	RET	
                           A   799    
                           A   800    
                           A   801    ;**************************** _vdp_bgcolour ***
                           A   802    ;Name                         Addr/Register   S
                           A   803    ;b                                    IX+12    
                           A   804    ;g                                     IX+9    
                           A   805    ;r                                     IX+6    
                           A   806    
                           A   807    
                           A   808    ; Stack Frame Size: 15 (bytes)
                           A   809    ;       Spill Code: 0 (instruction)
                           A   810    
                           A   811    
                           A   812    .ENDFUNC "vdp_bgcolour",72,"_vdp_bgcolour"
                           A   813    ;   73	
                           A   814    ;   74	//
                           A   815    ;   75	// Graphics functions
                           A   816    ;   76	//
                           A   817    ;   77	
                           A   818    ;   78	void vdp_clearGraphics()
                           A   819    ;   79	{
0403F0                     A   820    _vdp_clearGraphics:
                           A   821    .DEFINE "_vdp_clearGraphics"
                           A   822    
                           A   823    .VALUE _vdp_clearGraphics
                           A   824    
                           A   825    .CLASS 2
                           A   826    
                           A   827    .TYPE 65
                           A   828    
                           A   829    .ENDEF
                           A   830    
                           A   831    .BEGFUNC "vdp_clearGraphics",79,"_vdp_clearGrap
                           A   832    
0403F0 DDE5                A   833    	PUSH	IX
0403F2 DD210000 00         A   834    	LD	IX,0
0403F7 DD39                A   835    	ADD	IX,SP
                           A   836    ;   80	    putch(16);    
                           A   837    .LINE 80
                           A   838    
0403F9 01100000            A   839    	LD	BC,16
0403FD C5                  A   840    	PUSH	BC
0403FE CD EC 0C 04         A   841    	CALL	_putch
040402 C1                  A   842    	POP	BC
                           A   843    ;   81	}
                           A   844    .LINE 81
                           A   845    
040403 DDF9                A   846    	LD	SP,IX
040405 DDE1                A   847    	POP	IX
040407 C9                  A   848    	RET	
                           A   849    
                           A   850    
                           A   851    ;**************************** _vdp_clearGraphic
                           A   852    ;Name                         Addr/Register   S
                           A   853    ;_putch                              IMPORT  --
                           A   854    
                           A   855    
                           A   856    ; Stack Frame Size: 6 (bytes)
                           A   857    ;       Spill Code: 0 (instruction)
                           A   858    
                           A   859    
                           A   860    .ENDFUNC "vdp_clearGraphics",81,"_vdp_clearGrap
                           A   861    ;   82	
                           A   862    ;   83	void vdp_plotColour(unsigned char r, un
                           A   863    ;   84	{
040408                     A   864    _vdp_plotColour:
                           A   865    .DEFINE "_vdp_plotColour"
                           A   866    
                           A   867    .VALUE _vdp_plotColour
                           A   868    
                           A   869    .CLASS 2
                           A   870    
                           A   871    .TYPE 65
                           A   872    
                           A   873    .ENDEF
                           A   874    
                           A   875    .BEGFUNC "vdp_plotColour",84,"_vdp_plotColour"
                           A   876    
                           A   877    .LINE 84
                           A   878    
                           A   879    .DEFINE "r"
                           A   880    
                           A   881    .CLASS 65
                           A   882    
                           A   883    .VALUE 6
                           A   884    
                           A   885    .TYPE 12
                           A   886    
                           A   887    .ENDEF
                           A   888    
                           A   889    .DEFINE "g"
                           A   890    
                           A   891    .CLASS 65
                           A   892    
                           A   893    .VALUE 9
                           A   894    
                           A   895    .TYPE 12
                           A   896    
                           A   897    .ENDEF
                           A   898    
                           A   899    .DEFINE "b"
                           A   900    
                           A   901    .CLASS 65
                           A   902    
                           A   903    .VALUE 12
                           A   904    
                           A   905    .TYPE 12
                           A   906    
                           A   907    .ENDEF
                           A   908    
040408 DDE5                A   909    	PUSH	IX
04040A DD210000 00         A   910    	LD	IX,0
04040F DD39                A   911    	ADD	IX,SP
                           A   912    ;   85	    putch(18); // GCOL
                           A   913    .LINE 85
                           A   914    
040411 01120000            A   915    	LD	BC,18
040415 C5                  A   916    	PUSH	BC
040416 CD EC 0C 04         A   917    	CALL	_putch
04041A C1                  A   918    	POP	BC
                           A   919    ;   86	    putch(0);
                           A   920    .LINE 86
                           A   921    
04041B 01000000            A   922    	LD	BC,0
04041F C5                  A   923    	PUSH	BC
040420 CD EC 0C 04         A   924    	CALL	_putch
040424 C1                  A   925    	POP	BC
                           A   926    ;   87	    putch(r);
                           A   927    .LINE 87
                           A   928    
040425 DD7E06              A   929    	LD	A,(IX+%6)
040428 B7ED62              A   930    	UEXT	HL
04042B 6F                  A   931    	LD	L,A
04042C E5                  A   932    	PUSH	HL
04042D CD EC 0C 04         A   933    	CALL	_putch
040431 C1                  A   934    	POP	BC
                           A   935    ;   88	    putch(g);
                           A   936    .LINE 88
                           A   937    
040432 DD7E09              A   938    	LD	A,(IX+%9)
040435 B7ED62              A   939    	UEXT	HL
040438 6F                  A   940    	LD	L,A
040439 E5                  A   941    	PUSH	HL
04043A CD EC 0C 04         A   942    	CALL	_putch
04043E C1                  A   943    	POP	BC
                           A   944    ;   89	    putch(b);
                           A   945    .LINE 89
                           A   946    
04043F DD7E0C              A   947    	LD	A,(IX+%C)
040442 B7ED62              A   948    	UEXT	HL
040445 6F                  A   949    	LD	L,A
040446 E5                  A   950    	PUSH	HL
040447 CD EC 0C 04         A   951    	CALL	_putch
04044B C1                  A   952    	POP	BC
                           A   953    ;   90	}
                           A   954    .LINE 90
                           A   955    
04044C DDF9                A   956    	LD	SP,IX
04044E DDE1                A   957    	POP	IX
040450 C9                  A   958    	RET	
                           A   959    
                           A   960    
                           A   961    ;**************************** _vdp_plotColour *
                           A   962    ;Name                         Addr/Register   S
                           A   963    ;_putch                              IMPORT  --
                           A   964    ;b                                    IX+12    
                           A   965    ;g                                     IX+9    
                           A   966    ;r                                     IX+6    
                           A   967    
                           A   968    
                           A   969    ; Stack Frame Size: 15 (bytes)
                           A   970    ;       Spill Code: 0 (instruction)
                           A   971    
                           A   972    
                           A   973    .ENDFUNC "vdp_plotColour",90,"_vdp_plotColour"
                           A   974    ;   91	
                           A   975    ;   92	// internal function
                           A   976    ;   93	void vdp_plot(unsigned char mode, unsig
                           A   977    ;   94	{
040451                     A   978    _vdp_plot:
                           A   979    .DEFINE "_vdp_plot"
                           A   980    
                           A   981    .VALUE _vdp_plot
                           A   982    
                           A   983    .CLASS 2
                           A   984    
                           A   985    .TYPE 65
                           A   986    
                           A   987    .ENDEF
                           A   988    
                           A   989    .BEGFUNC "vdp_plot",94,"_vdp_plot"
                           A   990    
                           A   991    .LINE 94
                           A   992    
                           A   993    .DEFINE "mode"
                           A   994    
                           A   995    .CLASS 65
                           A   996    
                           A   997    .VALUE 6
                           A   998    
                           A   999    .TYPE 12
                           A  1000    
                           A  1001    .ENDEF
                           A  1002    
                           A  1003    .DEFINE "x"
                           A  1004    
                           A  1005    .CLASS 65
                           A  1006    
                           A  1007    .VALUE 9
                           A  1008    
                           A  1009    .TYPE 14
                           A  1010    
                           A  1011    .ENDEF
                           A  1012    
                           A  1013    .DEFINE "y"
                           A  1014    
                           A  1015    .CLASS 65
                           A  1016    
                           A  1017    .VALUE 12
                           A  1018    
                           A  1019    .TYPE 14
                           A  1020    
                           A  1021    .ENDEF
                           A  1022    
040451 DDE5                A  1023    	PUSH	IX
040453 DD210000 00         A  1024    	LD	IX,0
040458 DD39                A  1025    	ADD	IX,SP
                           A  1026    ;   95	    putch(25); // PLOT
                           A  1027    .LINE 95
                           A  1028    
04045A 01190000            A  1029    	LD	BC,25
04045E C5                  A  1030    	PUSH	BC
04045F CD EC 0C 04         A  1031    	CALL	_putch
040463 C1                  A  1032    	POP	BC
                           A  1033    ;   96	    putch(mode);
                           A  1034    .LINE 96
                           A  1035    
040464 DD7E06              A  1036    	LD	A,(IX+%6)
040467 B7ED62              A  1037    	UEXT	HL
04046A 6F                  A  1038    	LD	L,A
04046B E5                  A  1039    	PUSH	HL
04046C CD EC 0C 04         A  1040    	CALL	_putch
040470 C1                  A  1041    	POP	BC
                           A  1042    ;   97	    putch(x & 0xFF);
                           A  1043    .LINE 97
                           A  1044    
040471 DD7E09              A  1045    	LD	A,(IX+%9)
040474 B7ED62              A  1046    	UEXT	HL
040477 6F                  A  1047    	LD	L,A
040478 E5                  A  1048    	PUSH	HL
040479 CD EC 0C 04         A  1049    	CALL	_putch
04047D C1                  A  1050    	POP	BC
                           A  1051    ;   98	    putch(x >> 8);
                           A  1052    .LINE 98
                           A  1053    
04047E DD2709              A  1054    	LD	HL,(IX+%9)
040481 3E08                A  1055    	LD	A,%8
040483 CD F1 6D 04         A  1056    	CALL	__ishru_b
040487 E5                  A  1057    	PUSH	HL
040488 CD EC 0C 04         A  1058    	CALL	_putch
04048C C1                  A  1059    	POP	BC
                           A  1060    ;   99	    putch(y & 0xFF);
                           A  1061    .LINE 99
                           A  1062    
04048D DD7E0C              A  1063    	LD	A,(IX+%C)
040490 B7ED62              A  1064    	UEXT	HL
040493 6F                  A  1065    	LD	L,A
040494 E5                  A  1066    	PUSH	HL
040495 CD EC 0C 04         A  1067    	CALL	_putch
040499 C1                  A  1068    	POP	BC
                           A  1069    ;  100	    putch(y >> 8);
                           A  1070    .LINE 100
                           A  1071    
04049A DD270C              A  1072    	LD	HL,(IX+%C)
04049D 3E08                A  1073    	LD	A,%8
04049F CD F1 6D 04         A  1074    	CALL	__ishru_b
0404A3 E5                  A  1075    	PUSH	HL
0404A4 CD EC 0C 04         A  1076    	CALL	_putch
0404A8 C1                  A  1077    	POP	BC
                           A  1078    ;  101	}
                           A  1079    .LINE 101
                           A  1080    
0404A9 DDF9                A  1081    	LD	SP,IX
0404AB DDE1                A  1082    	POP	IX
0404AD C9                  A  1083    	RET	
                           A  1084    
                           A  1085    
                           A  1086    ;**************************** _vdp_plot *******
                           A  1087    ;Name                         Addr/Register   S
                           A  1088    ;_putch                              IMPORT  --
                           A  1089    ;y                                    IX+12    
                           A  1090    ;x                                     IX+9    
                           A  1091    ;mode                                  IX+6    
                           A  1092    
                           A  1093    
                           A  1094    ; Stack Frame Size: 15 (bytes)
                           A  1095    ;       Spill Code: 0 (instruction)
                           A  1096    
                           A  1097    
                           A  1098    .ENDFUNC "vdp_plot",101,"_vdp_plot"
                           A  1099    ;  102	
                           A  1100    ;  103	void vdp_plotMoveTo(unsigned int x, uns
                           A  1101    ;  104	{
0404AE                     A  1102    _vdp_plotMoveTo:
                           A  1103    .DEFINE "_vdp_plotMoveTo"
                           A  1104    
                           A  1105    .VALUE _vdp_plotMoveTo
                           A  1106    
                           A  1107    .CLASS 2
                           A  1108    
                           A  1109    .TYPE 65
                           A  1110    
                           A  1111    .ENDEF
                           A  1112    
                           A  1113    .BEGFUNC "vdp_plotMoveTo",104,"_vdp_plotMoveTo"
                           A  1114    
                           A  1115    .LINE 104
                           A  1116    
                           A  1117    .DEFINE "x"
                           A  1118    
                           A  1119    .CLASS 65
                           A  1120    
                           A  1121    .VALUE 6
                           A  1122    
                           A  1123    .TYPE 14
                           A  1124    
                           A  1125    .ENDEF
                           A  1126    
                           A  1127    .DEFINE "y"
                           A  1128    
                           A  1129    .CLASS 65
                           A  1130    
                           A  1131    .VALUE 9
                           A  1132    
                           A  1133    .TYPE 14
                           A  1134    
                           A  1135    .ENDEF
                           A  1136    
0404AE DDE5                A  1137    	PUSH	IX
0404B0 DD210000 00         A  1138    	LD	IX,0
0404B5 DD39                A  1139    	ADD	IX,SP
                           A  1140    ;  105		vdp_plot(0x04,x,y);
                           A  1141    .LINE 105
                           A  1142    
0404B7 DD0709              A  1143    	LD	BC,(IX+%9)
0404BA C5                  A  1144    	PUSH	BC
0404BB DD0706              A  1145    	LD	BC,(IX+%6)
0404BE C5                  A  1146    	PUSH	BC
0404BF 01040000            A  1147    	LD	BC,4
0404C3 C5                  A  1148    	PUSH	BC
0404C4 CD 51 04 04         A  1149    	CALL	_vdp_plot
0404C8 C1                  A  1150    	POP	BC
0404C9 C1                  A  1151    	POP	BC
0404CA C1                  A  1152    	POP	BC
                           A  1153    ;  106	}
                           A  1154    .LINE 106
                           A  1155    
0404CB DDF9                A  1156    	LD	SP,IX
0404CD DDE1                A  1157    	POP	IX
0404CF C9                  A  1158    	RET	
                           A  1159    
                           A  1160    
                           A  1161    ;**************************** _vdp_plotMoveTo *
                           A  1162    ;Name                         Addr/Register   S
                           A  1163    ;y                                     IX+9    
                           A  1164    ;x                                     IX+6    
                           A  1165    
                           A  1166    
                           A  1167    ; Stack Frame Size: 12 (bytes)
                           A  1168    ;       Spill Code: 0 (instruction)
                           A  1169    
                           A  1170    
                           A  1171    .ENDFUNC "vdp_plotMoveTo",106,"_vdp_plotMoveTo"
                           A  1172    ;  107	
                           A  1173    ;  108	void vdp_plotLineTo(unsigned int x, uns
                           A  1174    ;  109	{
0404D0                     A  1175    _vdp_plotLineTo:
                           A  1176    .DEFINE "_vdp_plotLineTo"
                           A  1177    
                           A  1178    .VALUE _vdp_plotLineTo
                           A  1179    
                           A  1180    .CLASS 2
                           A  1181    
                           A  1182    .TYPE 65
                           A  1183    
                           A  1184    .ENDEF
                           A  1185    
                           A  1186    .BEGFUNC "vdp_plotLineTo",109,"_vdp_plotLineTo"
                           A  1187    
                           A  1188    .LINE 109
                           A  1189    
                           A  1190    .DEFINE "x"
                           A  1191    
                           A  1192    .CLASS 65
                           A  1193    
                           A  1194    .VALUE 6
                           A  1195    
                           A  1196    .TYPE 14
                           A  1197    
                           A  1198    .ENDEF
                           A  1199    
                           A  1200    .DEFINE "y"
                           A  1201    
                           A  1202    .CLASS 65
                           A  1203    
                           A  1204    .VALUE 9
                           A  1205    
                           A  1206    .TYPE 14
                           A  1207    
                           A  1208    .ENDEF
                           A  1209    
0404D0 DDE5                A  1210    	PUSH	IX
0404D2 DD210000 00         A  1211    	LD	IX,0
0404D7 DD39                A  1212    	ADD	IX,SP
                           A  1213    ;  110		vdp_plot(0x05,x,y);
                           A  1214    .LINE 110
                           A  1215    
0404D9 DD0709              A  1216    	LD	BC,(IX+%9)
0404DC C5                  A  1217    	PUSH	BC
0404DD DD0706              A  1218    	LD	BC,(IX+%6)
0404E0 C5                  A  1219    	PUSH	BC
0404E1 01050000            A  1220    	LD	BC,5
0404E5 C5                  A  1221    	PUSH	BC
0404E6 CD 51 04 04         A  1222    	CALL	_vdp_plot
0404EA C1                  A  1223    	POP	BC
0404EB C1                  A  1224    	POP	BC
0404EC C1                  A  1225    	POP	BC
                           A  1226    ;  111	}
                           A  1227    .LINE 111
                           A  1228    
0404ED DDF9                A  1229    	LD	SP,IX
0404EF DDE1                A  1230    	POP	IX
0404F1 C9                  A  1231    	RET	
                           A  1232    
                           A  1233    
                           A  1234    ;**************************** _vdp_plotLineTo *
                           A  1235    ;Name                         Addr/Register   S
                           A  1236    ;y                                     IX+9    
                           A  1237    ;x                                     IX+6    
                           A  1238    
                           A  1239    
                           A  1240    ; Stack Frame Size: 12 (bytes)
                           A  1241    ;       Spill Code: 0 (instruction)
                           A  1242    
                           A  1243    
                           A  1244    .ENDFUNC "vdp_plotLineTo",111,"_vdp_plotLineTo"
                           A  1245    ;  112	
                           A  1246    ;  113	void vdp_plotPoint(unsigned int x, unsi
                           A  1247    ;  114	{
0404F2                     A  1248    _vdp_plotPoint:
                           A  1249    .DEFINE "_vdp_plotPoint"
                           A  1250    
                           A  1251    .VALUE _vdp_plotPoint
                           A  1252    
                           A  1253    .CLASS 2
                           A  1254    
                           A  1255    .TYPE 65
                           A  1256    
                           A  1257    .ENDEF
                           A  1258    
                           A  1259    .BEGFUNC "vdp_plotPoint",114,"_vdp_plotPoint"
                           A  1260    
                           A  1261    .LINE 114
                           A  1262    
                           A  1263    .DEFINE "x"
                           A  1264    
                           A  1265    .CLASS 65
                           A  1266    
                           A  1267    .VALUE 6
                           A  1268    
                           A  1269    .TYPE 14
                           A  1270    
                           A  1271    .ENDEF
                           A  1272    
                           A  1273    .DEFINE "y"
                           A  1274    
                           A  1275    .CLASS 65
                           A  1276    
                           A  1277    .VALUE 9
                           A  1278    
                           A  1279    .TYPE 14
                           A  1280    
                           A  1281    .ENDEF
                           A  1282    
0404F2 DDE5                A  1283    	PUSH	IX
0404F4 DD210000 00         A  1284    	LD	IX,0
0404F9 DD39                A  1285    	ADD	IX,SP
                           A  1286    ;  115		vdp_plot(0x40,x,y);
                           A  1287    .LINE 115
                           A  1288    
0404FB DD0709              A  1289    	LD	BC,(IX+%9)
0404FE C5                  A  1290    	PUSH	BC
0404FF DD0706              A  1291    	LD	BC,(IX+%6)
040502 C5                  A  1292    	PUSH	BC
040503 01400000            A  1293    	LD	BC,64
040507 C5                  A  1294    	PUSH	BC
040508 CD 51 04 04         A  1295    	CALL	_vdp_plot
04050C C1                  A  1296    	POP	BC
04050D C1                  A  1297    	POP	BC
04050E C1                  A  1298    	POP	BC
                           A  1299    ;  116	}
                           A  1300    .LINE 116
                           A  1301    
04050F DDF9                A  1302    	LD	SP,IX
040511 DDE1                A  1303    	POP	IX
040513 C9                  A  1304    	RET	
                           A  1305    
                           A  1306    
                           A  1307    ;**************************** _vdp_plotPoint **
                           A  1308    ;Name                         Addr/Register   S
                           A  1309    ;y                                     IX+9    
                           A  1310    ;x                                     IX+6    
                           A  1311    
                           A  1312    
                           A  1313    ; Stack Frame Size: 12 (bytes)
                           A  1314    ;       Spill Code: 0 (instruction)
                           A  1315    
                           A  1316    
                           A  1317    .ENDFUNC "vdp_plotPoint",116,"_vdp_plotPoint"
                           A  1318    ;  117	
                           A  1319    ;  118	void vdp_plotTriangle(unsigned int x, u
                           A  1320    ;  119	{
040514                     A  1321    _vdp_plotTriangle:
                           A  1322    .DEFINE "_vdp_plotTriangle"
                           A  1323    
                           A  1324    .VALUE _vdp_plotTriangle
                           A  1325    
                           A  1326    .CLASS 2
                           A  1327    
                           A  1328    .TYPE 65
                           A  1329    
                           A  1330    .ENDEF
                           A  1331    
                           A  1332    .BEGFUNC "vdp_plotTriangle",119,"_vdp_plotTrian
                           A  1333    
                           A  1334    .LINE 119
                           A  1335    
                           A  1336    .DEFINE "x"
                           A  1337    
                           A  1338    .CLASS 65
                           A  1339    
                           A  1340    .VALUE 6
                           A  1341    
                           A  1342    .TYPE 14
                           A  1343    
                           A  1344    .ENDEF
                           A  1345    
                           A  1346    .DEFINE "y"
                           A  1347    
                           A  1348    .CLASS 65
                           A  1349    
                           A  1350    .VALUE 9
                           A  1351    
                           A  1352    .TYPE 14
                           A  1353    
                           A  1354    .ENDEF
                           A  1355    
040514 DDE5                A  1356    	PUSH	IX
040516 DD210000 00         A  1357    	LD	IX,0
04051B DD39                A  1358    	ADD	IX,SP
                           A  1359    ;  120		vdp_plot(0x50,x,y);
                           A  1360    .LINE 120
                           A  1361    
04051D DD0709              A  1362    	LD	BC,(IX+%9)
040520 C5                  A  1363    	PUSH	BC
040521 DD0706              A  1364    	LD	BC,(IX+%6)
040524 C5                  A  1365    	PUSH	BC
040525 01500000            A  1366    	LD	BC,80
040529 C5                  A  1367    	PUSH	BC
04052A CD 51 04 04         A  1368    	CALL	_vdp_plot
04052E C1                  A  1369    	POP	BC
04052F C1                  A  1370    	POP	BC
040530 C1                  A  1371    	POP	BC
                           A  1372    ;  121	}
                           A  1373    .LINE 121
                           A  1374    
040531 DDF9                A  1375    	LD	SP,IX
040533 DDE1                A  1376    	POP	IX
040535 C9                  A  1377    	RET	
                           A  1378    
                           A  1379    
                           A  1380    ;**************************** _vdp_plotTriangle
                           A  1381    ;Name                         Addr/Register   S
                           A  1382    ;y                                     IX+9    
                           A  1383    ;x                                     IX+6    
                           A  1384    
                           A  1385    
                           A  1386    ; Stack Frame Size: 12 (bytes)
                           A  1387    ;       Spill Code: 0 (instruction)
                           A  1388    
                           A  1389    
                           A  1390    .ENDFUNC "vdp_plotTriangle",121,"_vdp_plotTrian
                           A  1391    ;  122	
                           A  1392    ;  123	void vdp_plotCircleRadius(unsigned int 
                           A  1393    ;  124	{
040536                     A  1394    _vdp_plotCircleRadius:
                           A  1395    .DEFINE "_vdp_plotCircleRadius"
                           A  1396    
                           A  1397    .VALUE _vdp_plotCircleRadius
                           A  1398    
                           A  1399    .CLASS 2
                           A  1400    
                           A  1401    .TYPE 65
                           A  1402    
                           A  1403    .ENDEF
                           A  1404    
                           A  1405    .BEGFUNC "vdp_plotCircleRadius",124,"_vdp_plotC
                           A  1406    
                           A  1407    .LINE 124
                           A  1408    
                           A  1409    .DEFINE "r"
                           A  1410    
                           A  1411    .CLASS 65
                           A  1412    
                           A  1413    .VALUE 6
                           A  1414    
                           A  1415    .TYPE 14
                           A  1416    
                           A  1417    .ENDEF
                           A  1418    
040536 DDE5                A  1419    	PUSH	IX
040538 DD210000 00         A  1420    	LD	IX,0
04053D DD39                A  1421    	ADD	IX,SP
                           A  1422    ;  125		vdp_plot(0x90,r,0);
                           A  1423    .LINE 125
                           A  1424    
04053F 01000000            A  1425    	LD	BC,0
040543 C5                  A  1426    	PUSH	BC
040544 DD0706              A  1427    	LD	BC,(IX+%6)
040547 C5                  A  1428    	PUSH	BC
040548 01900000            A  1429    	LD	BC,144
04054C C5                  A  1430    	PUSH	BC
04054D CD 51 04 04         A  1431    	CALL	_vdp_plot
040551 C1                  A  1432    	POP	BC
040552 C1                  A  1433    	POP	BC
040553 C1                  A  1434    	POP	BC
                           A  1435    ;  126	}
                           A  1436    .LINE 126
                           A  1437    
040554 DDF9                A  1438    	LD	SP,IX
040556 DDE1                A  1439    	POP	IX
040558 C9                  A  1440    	RET	
                           A  1441    
                           A  1442    
                           A  1443    ;**************************** _vdp_plotCircleRa
                           A  1444    ;Name                         Addr/Register   S
                           A  1445    ;r                                     IX+6    
                           A  1446    
                           A  1447    
                           A  1448    ; Stack Frame Size: 9 (bytes)
                           A  1449    ;       Spill Code: 0 (instruction)
                           A  1450    
                           A  1451    
                           A  1452    .ENDFUNC "vdp_plotCircleRadius",126,"_vdp_plotC
                           A  1453    ;  127	
                           A  1454    ;  128	void vdp_plotCircleCircumference(unsign
                           A  1455    ;  129	{
040559                     A  1456    _vdp_plotCircleCircumference:
                           A  1457    .DEFINE "_vdp_plotCircleCircumference"
                           A  1458    
                           A  1459    .VALUE _vdp_plotCircleCircumference
                           A  1460    
                           A  1461    .CLASS 2
                           A  1462    
                           A  1463    .TYPE 65
                           A  1464    
                           A  1465    .ENDEF
                           A  1466    
                           A  1467    .BEGFUNC "vdp_plotCircleCircumference",129,"_vd
                           A  1468    
                           A  1469    .LINE 129
                           A  1470    
                           A  1471    .DEFINE "x"
                           A  1472    
                           A  1473    .CLASS 65
                           A  1474    
                           A  1475    .VALUE 6
                           A  1476    
                           A  1477    .TYPE 14
                           A  1478    
                           A  1479    .ENDEF
                           A  1480    
                           A  1481    .DEFINE "y"
                           A  1482    
                           A  1483    .CLASS 65
                           A  1484    
                           A  1485    .VALUE 9
                           A  1486    
                           A  1487    .TYPE 14
                           A  1488    
                           A  1489    .ENDEF
                           A  1490    
040559 DDE5                A  1491    	PUSH	IX
04055B DD210000 00         A  1492    	LD	IX,0
040560 DD39                A  1493    	ADD	IX,SP
                           A  1494    ;  130		vdp_plot(0x95,x,y);
                           A  1495    .LINE 130
                           A  1496    
040562 DD0709              A  1497    	LD	BC,(IX+%9)
040565 C5                  A  1498    	PUSH	BC
040566 DD0706              A  1499    	LD	BC,(IX+%6)
040569 C5                  A  1500    	PUSH	BC
04056A 01950000            A  1501    	LD	BC,149
04056E C5                  A  1502    	PUSH	BC
04056F CD 51 04 04         A  1503    	CALL	_vdp_plot
040573 C1                  A  1504    	POP	BC
040574 C1                  A  1505    	POP	BC
040575 C1                  A  1506    	POP	BC
                           A  1507    ;  131	}
                           A  1508    .LINE 131
                           A  1509    
040576 DDF9                A  1510    	LD	SP,IX
040578 DDE1                A  1511    	POP	IX
04057A C9                  A  1512    	RET	
                           A  1513    
                           A  1514    
                           A  1515    ;**************************** _vdp_plotCircleCi
                           A  1516    ;Name                         Addr/Register   S
                           A  1517    ;y                                     IX+9    
                           A  1518    ;x                                     IX+6    
                           A  1519    
                           A  1520    
                           A  1521    ; Stack Frame Size: 12 (bytes)
                           A  1522    ;       Spill Code: 0 (instruction)
                           A  1523    
                           A  1524    
                           A  1525    .ENDFUNC "vdp_plotCircleCircumference",131,"_vd
                           A  1526    ;  132	
                           A  1527    ;  133	void vdp_plotSetOrigin(unsigned int x, 
                           A  1528    ;  134	{
04057B                     A  1529    _vdp_plotSetOrigin:
                           A  1530    .DEFINE "_vdp_plotSetOrigin"
                           A  1531    
                           A  1532    .VALUE _vdp_plotSetOrigin
                           A  1533    
                           A  1534    .CLASS 2
                           A  1535    
                           A  1536    .TYPE 65
                           A  1537    
                           A  1538    .ENDEF
                           A  1539    
                           A  1540    .BEGFUNC "vdp_plotSetOrigin",134,"_vdp_plotSetO
                           A  1541    
                           A  1542    .LINE 134
                           A  1543    
                           A  1544    .DEFINE "x"
                           A  1545    
                           A  1546    .CLASS 65
                           A  1547    
                           A  1548    .VALUE 6
                           A  1549    
                           A  1550    .TYPE 14
                           A  1551    
                           A  1552    .ENDEF
                           A  1553    
                           A  1554    .DEFINE "y"
                           A  1555    
                           A  1556    .CLASS 65
                           A  1557    
                           A  1558    .VALUE 9
                           A  1559    
                           A  1560    .TYPE 14
                           A  1561    
                           A  1562    .ENDEF
                           A  1563    
04057B DDE5                A  1564    	PUSH	IX
04057D DD210000 00         A  1565    	LD	IX,0
040582 DD39                A  1566    	ADD	IX,SP
                           A  1567    ;  135	    putch(29); //Graphics ORIGIN
                           A  1568    .LINE 135
                           A  1569    
040584 011D0000            A  1570    	LD	BC,29
040588 C5                  A  1571    	PUSH	BC
040589 CD EC 0C 04         A  1572    	CALL	_putch
04058D C1                  A  1573    	POP	BC
                           A  1574    ;  136	    putch(x & 0xF);
                           A  1575    .LINE 136
                           A  1576    
04058E DD7E06              A  1577    	LD	A,(IX+%6)
040591 E60F                A  1578    	AND	A,%F
040593 B7ED62              A  1579    	UEXT	HL
040596 6F                  A  1580    	LD	L,A
040597 E5                  A  1581    	PUSH	HL
040598 CD EC 0C 04         A  1582    	CALL	_putch
04059C C1                  A  1583    	POP	BC
                           A  1584    ;  137	    putch(x >> 8);
                           A  1585    .LINE 137
                           A  1586    
04059D DD2706              A  1587    	LD	HL,(IX+%6)
0405A0 3E08                A  1588    	LD	A,%8
0405A2 CD F1 6D 04         A  1589    	CALL	__ishru_b
0405A6 E5                  A  1590    	PUSH	HL
0405A7 CD EC 0C 04         A  1591    	CALL	_putch
0405AB C1                  A  1592    	POP	BC
                           A  1593    ;  138	    putch(y & 0xF);
                           A  1594    .LINE 138
                           A  1595    
0405AC DD7E09              A  1596    	LD	A,(IX+%9)
0405AF E60F                A  1597    	AND	A,%F
0405B1 B7ED62              A  1598    	UEXT	HL
0405B4 6F                  A  1599    	LD	L,A
0405B5 E5                  A  1600    	PUSH	HL
0405B6 CD EC 0C 04         A  1601    	CALL	_putch
0405BA C1                  A  1602    	POP	BC
                           A  1603    ;  139	    putch(y >> 8);
                           A  1604    .LINE 139
                           A  1605    
0405BB DD2709              A  1606    	LD	HL,(IX+%9)
0405BE 3E08                A  1607    	LD	A,%8
0405C0 CD F1 6D 04         A  1608    	CALL	__ishru_b
0405C4 E5                  A  1609    	PUSH	HL
0405C5 CD EC 0C 04         A  1610    	CALL	_putch
0405C9 C1                  A  1611    	POP	BC
                           A  1612    ;  140	}
                           A  1613    .LINE 140
                           A  1614    
0405CA DDF9                A  1615    	LD	SP,IX
0405CC DDE1                A  1616    	POP	IX
0405CE C9                  A  1617    	RET	
                           A  1618    
                           A  1619    
                           A  1620    ;**************************** _vdp_plotSetOrigi
                           A  1621    ;Name                         Addr/Register   S
                           A  1622    ;_putch                              IMPORT  --
                           A  1623    ;y                                     IX+9    
                           A  1624    ;x                                     IX+6    
                           A  1625    
                           A  1626    
                           A  1627    ; Stack Frame Size: 12 (bytes)
                           A  1628    ;       Spill Code: 0 (instruction)
                           A  1629    
                           A  1630    
                           A  1631    .ENDFUNC "vdp_plotSetOrigin",140,"_vdp_plotSetO
                           A  1632    ;  141	
                           A  1633    ;  142	// Bitmap VDP functions
                           A  1634    ;  143	void vdp_bitmapSelect(UINT8 id)
                           A  1635    ;  144	{
0405CF                     A  1636    _vdp_bitmapSelect:
                           A  1637    .DEFINE "_vdp_bitmapSelect"
                           A  1638    
                           A  1639    .VALUE _vdp_bitmapSelect
                           A  1640    
                           A  1641    .CLASS 2
                           A  1642    
                           A  1643    .TYPE 65
                           A  1644    
                           A  1645    .ENDEF
                           A  1646    
                           A  1647    .BEGFUNC "vdp_bitmapSelect",144,"_vdp_bitmapSel
                           A  1648    
                           A  1649    .LINE 144
                           A  1650    
                           A  1651    .DEFINE "id"
                           A  1652    
                           A  1653    .CLASS 65
                           A  1654    
                           A  1655    .VALUE 6
                           A  1656    
                           A  1657    .TYPE 12
                           A  1658    
                           A  1659    .ENDEF
                           A  1660    
0405CF DDE5                A  1661    	PUSH	IX
0405D1 DD210000 00         A  1662    	LD	IX,0
0405D6 DD39                A  1663    	ADD	IX,SP
                           A  1664    ;  145		putch(23); // vdu_sys
                           A  1665    .LINE 145
                           A  1666    
0405D8 01170000            A  1667    	LD	BC,23
0405DC C5                  A  1668    	PUSH	BC
0405DD CD EC 0C 04         A  1669    	CALL	_putch
0405E1 C1                  A  1670    	POP	BC
                           A  1671    ;  146		putch(27); // sprite command
                           A  1672    .LINE 146
                           A  1673    
0405E2 011B0000            A  1674    	LD	BC,27
0405E6 C5                  A  1675    	PUSH	BC
0405E7 CD EC 0C 04         A  1676    	CALL	_putch
0405EB C1                  A  1677    	POP	BC
                           A  1678    ;  147		putch(0);  // select command
                           A  1679    .LINE 147
                           A  1680    
0405EC 01000000            A  1681    	LD	BC,0
0405F0 C5                  A  1682    	PUSH	BC
0405F1 CD EC 0C 04         A  1683    	CALL	_putch
0405F5 C1                  A  1684    	POP	BC
                           A  1685    ;  148		putch(id); // bitmap_id
                           A  1686    .LINE 148
                           A  1687    
0405F6 DD7E06              A  1688    	LD	A,(IX+%6)
0405F9 B7ED62              A  1689    	UEXT	HL
0405FC 6F                  A  1690    	LD	L,A
0405FD E5                  A  1691    	PUSH	HL
0405FE CD EC 0C 04         A  1692    	CALL	_putch
040602 C1                  A  1693    	POP	BC
                           A  1694    ;  149		return;	
                           A  1695    ;  150	}
                           A  1696    .LINE 150
                           A  1697    
040603 DDF9                A  1698    	LD	SP,IX
040605 DDE1                A  1699    	POP	IX
040607 C9                  A  1700    	RET	
                           A  1701    
                           A  1702    
                           A  1703    ;**************************** _vdp_bitmapSelect
                           A  1704    ;Name                         Addr/Register   S
                           A  1705    ;_putch                              IMPORT  --
                           A  1706    ;id                                    IX+6    
                           A  1707    
                           A  1708    
                           A  1709    ; Stack Frame Size: 9 (bytes)
                           A  1710    ;       Spill Code: 0 (instruction)
                           A  1711    
                           A  1712    
                           A  1713    .ENDFUNC "vdp_bitmapSelect",150,"_vdp_bitmapSel
                           A  1714    ;  151	
                           A  1715    ;  152	void vdp_bitmapSendDataSelected(UINT16 
                           A  1716    ;  153	{
040608                     A  1717    _vdp_bitmapSendDataSelected:
                           A  1718    .DEFINE "_vdp_bitmapSendDataSelected"
                           A  1719    
                           A  1720    .VALUE _vdp_bitmapSendDataSelected
                           A  1721    
                           A  1722    .CLASS 2
                           A  1723    
                           A  1724    .TYPE 65
                           A  1725    
                           A  1726    .ENDEF
                           A  1727    
                           A  1728    .BEGFUNC "vdp_bitmapSendDataSelected",153,"_vdp
                           A  1729    
                           A  1730    .LINE 153
                           A  1731    
                           A  1732    .DEFINE "width"
                           A  1733    
                           A  1734    .CLASS 65
                           A  1735    
                           A  1736    .VALUE 6
                           A  1737    
                           A  1738    .TYPE 13
                           A  1739    
                           A  1740    .ENDEF
                           A  1741    
                           A  1742    .DEFINE "height"
                           A  1743    
                           A  1744    .CLASS 65
                           A  1745    
                           A  1746    .VALUE 9
                           A  1747    
                           A  1748    .TYPE 13
                           A  1749    
                           A  1750    .ENDEF
                           A  1751    
                           A  1752    .DEFINE "data"
                           A  1753    
                           A  1754    .CLASS 65
                           A  1755    
                           A  1756    .VALUE 12
                           A  1757    
                           A  1758    .TYPE 47
                           A  1759    
                           A  1760    .ENDEF
                           A  1761    
                           A  1762    .DEFINE "n"
                           A  1763    
                           A  1764    .CLASS 65
                           A  1765    
                           A  1766    .VALUE -2
                           A  1767    
                           A  1768    .TYPE 13
                           A  1769    
                           A  1770    .ENDEF
                           A  1771    
040608 DDE5                A  1772    	PUSH	IX
04060A DD210000 00         A  1773    	LD	IX,0
04060F DD39                A  1774    	ADD	IX,SP
040611 3B                  A  1775    	DEC	SP
040612 3B                  A  1776    	DEC	SP
                           A  1777    ;  154		UINT16 n;
                           A  1778    ;  155		
                           A  1779    ;  156		putch(23); // vdu_sys
                           A  1780    .LINE 156
                           A  1781    
040613 01170000            A  1782    	LD	BC,23
040617 C5                  A  1783    	PUSH	BC
040618 CD EC 0C 04         A  1784    	CALL	_putch
04061C C1                  A  1785    	POP	BC
                           A  1786    ;  157		putch(27); // sprite command
                           A  1787    .LINE 157
                           A  1788    
04061D 011B0000            A  1789    	LD	BC,27
040621 C5                  A  1790    	PUSH	BC
040622 CD EC 0C 04         A  1791    	CALL	_putch
040626 C1                  A  1792    	POP	BC
                           A  1793    ;  158		putch(1);  // send data to selected
                           A  1794    .LINE 158
                           A  1795    
040627 01010000            A  1796    	LD	BC,1
04062B C5                  A  1797    	PUSH	BC
04062C CD EC 0C 04         A  1798    	CALL	_putch
040630 C1                  A  1799    	POP	BC
                           A  1800    ;  159		
                           A  1801    ;  160		write16bit(width);
                           A  1802    .LINE 160
                           A  1803    
040631 DD0706              A  1804    	LD	BC,(IX+%6)
040634 C5                  A  1805    	PUSH	BC
040635 CD F2 01 04         A  1806    	CALL	_write16bit
040639 C1                  A  1807    	POP	BC
                           A  1808    ;  161		write16bit(height);
                           A  1809    .LINE 161
                           A  1810    
04063A DD0709              A  1811    	LD	BC,(IX+%9)
04063D C5                  A  1812    	PUSH	BC
04063E CD F2 01 04         A  1813    	CALL	_write16bit
040642 C1                  A  1814    	POP	BC
                           A  1815    ;  162		
                           A  1816    ;  163		for(n = 0; n < (width*height); n++)
                           A  1817    .LINE 163
                           A  1818    
040643 DD36FE00            A  1819    	LD	(IX+%FFFFFFFE),%0
040647 DD36FF00            A  1820    	LD	(IX+%FFFFFFFF),%0
04064B 18 2B               A  1821    	JR	L_28
04064D                     A  1822    L_26:
                           A  1823    ;  164		{
                           A  1824    ;  165			write32bit(data[n]);
                           A  1825    .LINE 165
                           A  1826    
04064D DD07FE              A  1827    	LD	BC,(IX+%FFFFFFFE)
040650 CD 96 66 04         A  1828    	CALL	__stoiu
040654 29                  A  1829    	ADD	HL,HL
040655 29                  A  1830    	ADD	HL,HL
040656 DD070C              A  1831    	LD	BC,(IX+%C)
040659 09                  A  1832    	ADD	HL,BC
04065A E5FDE1              A  1833    	LD	IY,HL
04065D FD0700              A  1834    	LD	BC,(IY)
040660 FD7E03              A  1835    	LD	A,(IY+%3)
040663 2600                A  1836    	LD	H,%0
040665 6F                  A  1837    	LD	L,A
040666 E5                  A  1838    	PUSH	HL
040667 C5                  A  1839    	PUSH	BC
040668 CD 25 02 04         A  1840    	CALL	_write32bit
04066C C1                  A  1841    	POP	BC
04066D C1                  A  1842    	POP	BC
04066E DD27FE              A  1843    	LD	HL,(IX+%FFFFFFFE)
040671 23                  A  1844    	INC	HL
040672 DD75FE              A  1845    	LD	(IX+%FFFFFFFE),L
040675 DD74FF              A  1846    	LD	(IX+%FFFFFFFF),H
                           A  1847    ;  166			//delayms(1);
                           A  1848    ;  167		}
040678                     A  1849    L_28:
                           A  1850    .LINE 167
                           A  1851    
040678 DD0706              A  1852    	LD	BC,(IX+%6)
04067B CD 96 66 04         A  1853    	CALL	__stoiu
04067F E5D1                A  1854    	LD	DE,HL
040681 DD0709              A  1855    	LD	BC,(IX+%9)
040684 CD 96 66 04         A  1856    	CALL	__stoiu
040688 E5C1                A  1857    	LD	BC,HL
04068A D5E1                A  1858    	LD	HL,DE
04068C CD B5 6D 04         A  1859    	CALL	__imuls
040690 E5D1                A  1860    	LD	DE,HL
040692 DD07FE              A  1861    	LD	BC,(IX+%FFFFFFFE)
040695 CD 96 66 04         A  1862    	CALL	__stoiu
040699 B7                  A  1863    	OR	A,A
04069A ED52                A  1864    	SBC	HL,DE
04069C FA 4D 06 04         A  1865    	JP	M,L_26
                           A  1866    ;  168		return;		
                           A  1867    ;  169	}
                           A  1868    .LINE 169
                           A  1869    
0406A0 DDF9                A  1870    	LD	SP,IX
0406A2 DDE1                A  1871    	POP	IX
0406A4 C9                  A  1872    	RET	
                           A  1873    
                           A  1874    
                           A  1875    ;**************************** _vdp_bitmapSendDa
                           A  1876    ;Name                         Addr/Register   S
                           A  1877    ;_putch                              IMPORT  --
                           A  1878    ;n                                     IX-2    
                           A  1879    ;data                                 IX+12    
                           A  1880    ;height                                IX+9    
                           A  1881    ;width                                 IX+6    
                           A  1882    
                           A  1883    
                           A  1884    ; Stack Frame Size: 17 (bytes)
                           A  1885    ;       Spill Code: 0 (instruction)
                           A  1886    
                           A  1887    
                           A  1888    .ENDFUNC "vdp_bitmapSendDataSelected",169,"_vdp
                           A  1889    ;  170	
                           A  1890    ;  171	void vdp_bitmapSendData(UINT8 id, UINT1
                           A  1891    ;  172	{
0406A5                     A  1892    _vdp_bitmapSendData:
                           A  1893    .DEFINE "_vdp_bitmapSendData"
                           A  1894    
                           A  1895    .VALUE _vdp_bitmapSendData
                           A  1896    
                           A  1897    .CLASS 2
                           A  1898    
                           A  1899    .TYPE 65
                           A  1900    
                           A  1901    .ENDEF
                           A  1902    
                           A  1903    .BEGFUNC "vdp_bitmapSendData",172,"_vdp_bitmapS
                           A  1904    
                           A  1905    .LINE 172
                           A  1906    
                           A  1907    .DEFINE "id"
                           A  1908    
                           A  1909    .CLASS 65
                           A  1910    
                           A  1911    .VALUE 6
                           A  1912    
                           A  1913    .TYPE 12
                           A  1914    
                           A  1915    .ENDEF
                           A  1916    
                           A  1917    .DEFINE "width"
                           A  1918    
                           A  1919    .CLASS 65
                           A  1920    
                           A  1921    .VALUE 9
                           A  1922    
                           A  1923    .TYPE 13
                           A  1924    
                           A  1925    .ENDEF
                           A  1926    
                           A  1927    .DEFINE "height"
                           A  1928    
                           A  1929    .CLASS 65
                           A  1930    
                           A  1931    .VALUE 12
                           A  1932    
                           A  1933    .TYPE 13
                           A  1934    
                           A  1935    .ENDEF
                           A  1936    
                           A  1937    .DEFINE "data"
                           A  1938    
                           A  1939    .CLASS 65
                           A  1940    
                           A  1941    .VALUE 15
                           A  1942    
                           A  1943    .TYPE 47
                           A  1944    
                           A  1945    .ENDEF
                           A  1946    
0406A5 DDE5                A  1947    	PUSH	IX
0406A7 DD210000 00         A  1948    	LD	IX,0
0406AC DD39                A  1949    	ADD	IX,SP
                           A  1950    ;  173		vdp_bitmapSelect(id);
                           A  1951    .LINE 173
                           A  1952    
0406AE DD4E06              A  1953    	LD	C,(IX+%6)
0406B1 0600                A  1954    	LD	B,%0
0406B3 C5                  A  1955    	PUSH	BC
0406B4 CD CF 05 04         A  1956    	CALL	_vdp_bitmapSelect
0406B8 C1                  A  1957    	POP	BC
                           A  1958    ;  174		vdp_bitmapSendDataSelected(width, h
                           A  1959    .LINE 174
                           A  1960    
0406B9 DD070F              A  1961    	LD	BC,(IX+%F)
0406BC C5                  A  1962    	PUSH	BC
0406BD DD070C              A  1963    	LD	BC,(IX+%C)
0406C0 C5                  A  1964    	PUSH	BC
0406C1 DD0709              A  1965    	LD	BC,(IX+%9)
0406C4 C5                  A  1966    	PUSH	BC
0406C5 CD 08 06 04         A  1967    	CALL	_vdp_bitmapSendDataSelected
0406C9 C1                  A  1968    	POP	BC
0406CA C1                  A  1969    	POP	BC
0406CB C1                  A  1970    	POP	BC
                           A  1971    ;  175		return;	
                           A  1972    ;  176	}
                           A  1973    .LINE 176
                           A  1974    
0406CC DDF9                A  1975    	LD	SP,IX
0406CE DDE1                A  1976    	POP	IX
0406D0 C9                  A  1977    	RET	
                           A  1978    
                           A  1979    
                           A  1980    ;**************************** _vdp_bitmapSendDa
                           A  1981    ;Name                         Addr/Register   S
                           A  1982    ;data                                 IX+15    
                           A  1983    ;height                               IX+12    
                           A  1984    ;width                                 IX+9    
                           A  1985    ;id                                    IX+6    
                           A  1986    
                           A  1987    
                           A  1988    ; Stack Frame Size: 18 (bytes)
                           A  1989    ;       Spill Code: 0 (instruction)
                           A  1990    
                           A  1991    
                           A  1992    .ENDFUNC "vdp_bitmapSendData",176,"_vdp_bitmapS
                           A  1993    ;  177	
                           A  1994    ;  178	void vdp_bitmapDrawSelected(UINT16 x, U
                           A  1995    ;  179	{
0406D1                     A  1996    _vdp_bitmapDrawSelected:
                           A  1997    .DEFINE "_vdp_bitmapDrawSelected"
                           A  1998    
                           A  1999    .VALUE _vdp_bitmapDrawSelected
                           A  2000    
                           A  2001    .CLASS 2
                           A  2002    
                           A  2003    .TYPE 65
                           A  2004    
                           A  2005    .ENDEF
                           A  2006    
                           A  2007    .BEGFUNC "vdp_bitmapDrawSelected",179,"_vdp_bit
                           A  2008    
                           A  2009    .LINE 179
                           A  2010    
                           A  2011    .DEFINE "x"
                           A  2012    
                           A  2013    .CLASS 65
                           A  2014    
                           A  2015    .VALUE 6
                           A  2016    
                           A  2017    .TYPE 13
                           A  2018    
                           A  2019    .ENDEF
                           A  2020    
                           A  2021    .DEFINE "y"
                           A  2022    
                           A  2023    .CLASS 65
                           A  2024    
                           A  2025    .VALUE 9
                           A  2026    
                           A  2027    .TYPE 13
                           A  2028    
                           A  2029    .ENDEF
                           A  2030    
0406D1 DDE5                A  2031    	PUSH	IX
0406D3 DD210000 00         A  2032    	LD	IX,0
0406D8 DD39                A  2033    	ADD	IX,SP
                           A  2034    ;  180		putch(23); // vdu_sys
                           A  2035    .LINE 180
                           A  2036    
0406DA 01170000            A  2037    	LD	BC,23
0406DE C5                  A  2038    	PUSH	BC
0406DF CD EC 0C 04         A  2039    	CALL	_putch
0406E3 C1                  A  2040    	POP	BC
                           A  2041    ;  181		putch(27); // sprite command
                           A  2042    .LINE 181
                           A  2043    
0406E4 011B0000            A  2044    	LD	BC,27
0406E8 C5                  A  2045    	PUSH	BC
0406E9 CD EC 0C 04         A  2046    	CALL	_putch
0406ED C1                  A  2047    	POP	BC
                           A  2048    ;  182		putch(3);  // draw selected bitmap
                           A  2049    .LINE 182
                           A  2050    
0406EE 01030000            A  2051    	LD	BC,3
0406F2 C5                  A  2052    	PUSH	BC
0406F3 CD EC 0C 04         A  2053    	CALL	_putch
0406F7 C1                  A  2054    	POP	BC
                           A  2055    ;  183		
                           A  2056    ;  184		write16bit(x);
                           A  2057    .LINE 184
                           A  2058    
0406F8 DD0706              A  2059    	LD	BC,(IX+%6)
0406FB C5                  A  2060    	PUSH	BC
0406FC CD F2 01 04         A  2061    	CALL	_write16bit
040700 C1                  A  2062    	POP	BC
                           A  2063    ;  185		write16bit(y);
                           A  2064    .LINE 185
                           A  2065    
040701 DD0709              A  2066    	LD	BC,(IX+%9)
040704 C5                  A  2067    	PUSH	BC
040705 CD F2 01 04         A  2068    	CALL	_write16bit
040709 C1                  A  2069    	POP	BC
                           A  2070    ;  186		
                           A  2071    ;  187		return;
                           A  2072    ;  188	}
                           A  2073    .LINE 188
                           A  2074    
04070A DDF9                A  2075    	LD	SP,IX
04070C DDE1                A  2076    	POP	IX
04070E C9                  A  2077    	RET	
                           A  2078    
                           A  2079    
                           A  2080    ;**************************** _vdp_bitmapDrawSe
                           A  2081    ;Name                         Addr/Register   S
                           A  2082    ;_putch                              IMPORT  --
                           A  2083    ;y                                     IX+9    
                           A  2084    ;x                                     IX+6    
                           A  2085    
                           A  2086    
                           A  2087    ; Stack Frame Size: 12 (bytes)
                           A  2088    ;       Spill Code: 0 (instruction)
                           A  2089    
                           A  2090    
                           A  2091    .ENDFUNC "vdp_bitmapDrawSelected",188,"_vdp_bit
                           A  2092    ;  189	
                           A  2093    ;  190	void vdp_bitmapDraw(UINT8 id, UINT16 x,
                           A  2094    ;  191	{
04070F                     A  2095    _vdp_bitmapDraw:
                           A  2096    .DEFINE "_vdp_bitmapDraw"
                           A  2097    
                           A  2098    .VALUE _vdp_bitmapDraw
                           A  2099    
                           A  2100    .CLASS 2
                           A  2101    
                           A  2102    .TYPE 65
                           A  2103    
                           A  2104    .ENDEF
                           A  2105    
                           A  2106    .BEGFUNC "vdp_bitmapDraw",191,"_vdp_bitmapDraw"
                           A  2107    
                           A  2108    .LINE 191
                           A  2109    
                           A  2110    .DEFINE "id"
                           A  2111    
                           A  2112    .CLASS 65
                           A  2113    
                           A  2114    .VALUE 6
                           A  2115    
                           A  2116    .TYPE 12
                           A  2117    
                           A  2118    .ENDEF
                           A  2119    
                           A  2120    .DEFINE "x"
                           A  2121    
                           A  2122    .CLASS 65
                           A  2123    
                           A  2124    .VALUE 9
                           A  2125    
                           A  2126    .TYPE 13
                           A  2127    
                           A  2128    .ENDEF
                           A  2129    
                           A  2130    .DEFINE "y"
                           A  2131    
                           A  2132    .CLASS 65
                           A  2133    
                           A  2134    .VALUE 12
                           A  2135    
                           A  2136    .TYPE 13
                           A  2137    
                           A  2138    .ENDEF
                           A  2139    
04070F DDE5                A  2140    	PUSH	IX
040711 DD210000 00         A  2141    	LD	IX,0
040716 DD39                A  2142    	ADD	IX,SP
                           A  2143    ;  192		vdp_bitmapSelect(id);
                           A  2144    .LINE 192
                           A  2145    
040718 DD4E06              A  2146    	LD	C,(IX+%6)
04071B 0600                A  2147    	LD	B,%0
04071D C5                  A  2148    	PUSH	BC
04071E CD CF 05 04         A  2149    	CALL	_vdp_bitmapSelect
040722 C1                  A  2150    	POP	BC
                           A  2151    ;  193		vdp_bitmapDrawSelected(x,y);
                           A  2152    .LINE 193
                           A  2153    
040723 DD070C              A  2154    	LD	BC,(IX+%C)
040726 C5                  A  2155    	PUSH	BC
040727 DD0709              A  2156    	LD	BC,(IX+%9)
04072A C5                  A  2157    	PUSH	BC
04072B CD D1 06 04         A  2158    	CALL	_vdp_bitmapDrawSelected
04072F C1                  A  2159    	POP	BC
040730 C1                  A  2160    	POP	BC
                           A  2161    ;  194		return;	
                           A  2162    ;  195	}
                           A  2163    .LINE 195
                           A  2164    
040731 DDF9                A  2165    	LD	SP,IX
040733 DDE1                A  2166    	POP	IX
040735 C9                  A  2167    	RET	
                           A  2168    
                           A  2169    
                           A  2170    ;**************************** _vdp_bitmapDraw *
                           A  2171    ;Name                         Addr/Register   S
                           A  2172    ;y                                    IX+12    
                           A  2173    ;x                                     IX+9    
                           A  2174    ;id                                    IX+6    
                           A  2175    
                           A  2176    
                           A  2177    ; Stack Frame Size: 15 (bytes)
                           A  2178    ;       Spill Code: 0 (instruction)
                           A  2179    
                           A  2180    
                           A  2181    .ENDFUNC "vdp_bitmapDraw",195,"_vdp_bitmapDraw"
                           A  2182    ;  196	
                           A  2183    ;  197	void vdp_bitmapCreateSolidColorSelected
                           A  2184    ;  198	{
040736                     A  2185    _vdp_bitmapCreateSolidColorSelected:
                           A  2186    .DEFINE "_vdp_bitmapCreateSolidColorSelected"
                           A  2187    
                           A  2188    .VALUE _vdp_bitmapCreateSolidColorSelected
                           A  2189    
                           A  2190    .CLASS 2
                           A  2191    
                           A  2192    .TYPE 65
                           A  2193    
                           A  2194    .ENDEF
                           A  2195    
                           A  2196    .BEGFUNC "vdp_bitmapCreateSolidColorSelected",1
                           A  2197    
                           A  2198    .LINE 198
                           A  2199    
                           A  2200    .DEFINE "width"
                           A  2201    
                           A  2202    .CLASS 65
                           A  2203    
                           A  2204    .VALUE 6
                           A  2205    
                           A  2206    .TYPE 13
                           A  2207    
                           A  2208    .ENDEF
                           A  2209    
                           A  2210    .DEFINE "height"
                           A  2211    
                           A  2212    .CLASS 65
                           A  2213    
                           A  2214    .VALUE 9
                           A  2215    
                           A  2216    .TYPE 13
                           A  2217    
                           A  2218    .ENDEF
                           A  2219    
                           A  2220    .DEFINE "abgr"
                           A  2221    
                           A  2222    .CLASS 65
                           A  2223    
                           A  2224    .VALUE 12
                           A  2225    
                           A  2226    .TYPE 15
                           A  2227    
                           A  2228    .ENDEF
                           A  2229    
040736 DDE5                A  2230    	PUSH	IX
040738 DD210000 00         A  2231    	LD	IX,0
04073D DD39                A  2232    	ADD	IX,SP
                           A  2233    ;  199		putch(23); // vdu_sys
                           A  2234    .LINE 199
                           A  2235    
04073F 01170000            A  2236    	LD	BC,23
040743 C5                  A  2237    	PUSH	BC
040744 CD EC 0C 04         A  2238    	CALL	_putch
040748 C1                  A  2239    	POP	BC
                           A  2240    ;  200		putch(27); // sprite command
                           A  2241    .LINE 200
                           A  2242    
040749 011B0000            A  2243    	LD	BC,27
04074D C5                  A  2244    	PUSH	BC
04074E CD EC 0C 04         A  2245    	CALL	_putch
040752 C1                  A  2246    	POP	BC
                           A  2247    ;  201		putch(2);  // define in single colo
                           A  2248    .LINE 201
                           A  2249    
040753 01020000            A  2250    	LD	BC,2
040757 C5                  A  2251    	PUSH	BC
040758 CD EC 0C 04         A  2252    	CALL	_putch
04075C C1                  A  2253    	POP	BC
                           A  2254    ;  202		
                           A  2255    ;  203		write16bit(width);
                           A  2256    .LINE 203
                           A  2257    
04075D DD0706              A  2258    	LD	BC,(IX+%6)
040760 C5                  A  2259    	PUSH	BC
040761 CD F2 01 04         A  2260    	CALL	_write16bit
040765 C1                  A  2261    	POP	BC
                           A  2262    ;  204		write16bit(height);
                           A  2263    .LINE 204
                           A  2264    
040766 DD0709              A  2265    	LD	BC,(IX+%9)
040769 C5                  A  2266    	PUSH	BC
04076A CD F2 01 04         A  2267    	CALL	_write16bit
04076E C1                  A  2268    	POP	BC
                           A  2269    ;  205		write32bit(abgr);
                           A  2270    .LINE 205
                           A  2271    
04076F DD4E0F              A  2272    	LD	C,(IX+%F)
040772 0600                A  2273    	LD	B,%0
040774 C5                  A  2274    	PUSH	BC
040775 DD070C              A  2275    	LD	BC,(IX+%C)
040778 C5                  A  2276    	PUSH	BC
040779 CD 25 02 04         A  2277    	CALL	_write32bit
04077D C1                  A  2278    	POP	BC
04077E C1                  A  2279    	POP	BC
                           A  2280    ;  206		return;		
                           A  2281    ;  207	}
                           A  2282    .LINE 207
                           A  2283    
04077F DDF9                A  2284    	LD	SP,IX
040781 DDE1                A  2285    	POP	IX
040783 C9                  A  2286    	RET	
                           A  2287    
                           A  2288    
                           A  2289    ;**************************** _vdp_bitmapCreate
                           A  2290    ;Name                         Addr/Register   S
                           A  2291    ;_putch                              IMPORT  --
                           A  2292    ;abgr                                 IX+12    
                           A  2293    ;height                                IX+9    
                           A  2294    ;width                                 IX+6    
                           A  2295    
                           A  2296    
                           A  2297    ; Stack Frame Size: 18 (bytes)
                           A  2298    ;       Spill Code: 0 (instruction)
                           A  2299    
                           A  2300    
                           A  2301    .ENDFUNC "vdp_bitmapCreateSolidColorSelected",2
                           A  2302    ;  208	
                           A  2303    ;  209	void vdp_bitmapCreateSolidColor(UINT8 i
                           A  2304    ;  210	{
040784                     A  2305    _vdp_bitmapCreateSolidColor:
                           A  2306    .DEFINE "_vdp_bitmapCreateSolidColor"
                           A  2307    
                           A  2308    .VALUE _vdp_bitmapCreateSolidColor
                           A  2309    
                           A  2310    .CLASS 2
                           A  2311    
                           A  2312    .TYPE 65
                           A  2313    
                           A  2314    .ENDEF
                           A  2315    
                           A  2316    .BEGFUNC "vdp_bitmapCreateSolidColor",210,"_vdp
                           A  2317    
                           A  2318    .LINE 210
                           A  2319    
                           A  2320    .DEFINE "id"
                           A  2321    
                           A  2322    .CLASS 65
                           A  2323    
                           A  2324    .VALUE 6
                           A  2325    
                           A  2326    .TYPE 12
                           A  2327    
                           A  2328    .ENDEF
                           A  2329    
                           A  2330    .DEFINE "width"
                           A  2331    
                           A  2332    .CLASS 65
                           A  2333    
                           A  2334    .VALUE 9
                           A  2335    
                           A  2336    .TYPE 13
                           A  2337    
                           A  2338    .ENDEF
                           A  2339    
                           A  2340    .DEFINE "height"
                           A  2341    
                           A  2342    .CLASS 65
                           A  2343    
                           A  2344    .VALUE 12
                           A  2345    
                           A  2346    .TYPE 13
                           A  2347    
                           A  2348    .ENDEF
                           A  2349    
                           A  2350    .DEFINE "abgr"
                           A  2351    
                           A  2352    .CLASS 65
                           A  2353    
                           A  2354    .VALUE 15
                           A  2355    
                           A  2356    .TYPE 15
                           A  2357    
                           A  2358    .ENDEF
                           A  2359    
040784 DDE5                A  2360    	PUSH	IX
040786 DD210000 00         A  2361    	LD	IX,0
04078B DD39                A  2362    	ADD	IX,SP
                           A  2363    ;  211		vdp_bitmapSelect(id);
                           A  2364    .LINE 211
                           A  2365    
04078D DD4E06              A  2366    	LD	C,(IX+%6)
040790 0600                A  2367    	LD	B,%0
040792 C5                  A  2368    	PUSH	BC
040793 CD CF 05 04         A  2369    	CALL	_vdp_bitmapSelect
040797 C1                  A  2370    	POP	BC
                           A  2371    ;  212		vdp_bitmapCreateSolidColorSelected(
                           A  2372    .LINE 212
                           A  2373    
040798 DD4E12              A  2374    	LD	C,(IX+%12)
04079B 0600                A  2375    	LD	B,%0
04079D C5                  A  2376    	PUSH	BC
04079E DD070F              A  2377    	LD	BC,(IX+%F)
0407A1 C5                  A  2378    	PUSH	BC
0407A2 DD070C              A  2379    	LD	BC,(IX+%C)
0407A5 C5                  A  2380    	PUSH	BC
0407A6 DD0709              A  2381    	LD	BC,(IX+%9)
0407A9 C5                  A  2382    	PUSH	BC
0407AA CD 36 07 04         A  2383    	CALL	_vdp_bitmapCreateSolidColorSelected
0407AE C1                  A  2384    	POP	BC
0407AF C1                  A  2385    	POP	BC
0407B0 C1                  A  2386    	POP	BC
0407B1 C1                  A  2387    	POP	BC
                           A  2388    ;  213		return;	
                           A  2389    ;  214	}
                           A  2390    .LINE 214
                           A  2391    
0407B2 DDF9                A  2392    	LD	SP,IX
0407B4 DDE1                A  2393    	POP	IX
0407B6 C9                  A  2394    	RET	
                           A  2395    
                           A  2396    
                           A  2397    ;**************************** _vdp_bitmapCreate
                           A  2398    ;Name                         Addr/Register   S
                           A  2399    ;abgr                                 IX+15    
                           A  2400    ;height                               IX+12    
                           A  2401    ;width                                 IX+9    
                           A  2402    ;id                                    IX+6    
                           A  2403    
                           A  2404    
                           A  2405    ; Stack Frame Size: 21 (bytes)
                           A  2406    ;       Spill Code: 0 (instruction)
                           A  2407    
                           A  2408    
                           A  2409    .ENDFUNC "vdp_bitmapCreateSolidColor",214,"_vdp
                           A  2410    ;  215	
                           A  2411    ;  216	// Sprite VDP functions
                           A  2412    ;  217	void vdp_spriteSelect(UINT8 id)
                           A  2413    ;  218	{
0407B7                     A  2414    _vdp_spriteSelect:
                           A  2415    .DEFINE "_vdp_spriteSelect"
                           A  2416    
                           A  2417    .VALUE _vdp_spriteSelect
                           A  2418    
                           A  2419    .CLASS 2
                           A  2420    
                           A  2421    .TYPE 65
                           A  2422    
                           A  2423    .ENDEF
                           A  2424    
                           A  2425    .BEGFUNC "vdp_spriteSelect",218,"_vdp_spriteSel
                           A  2426    
                           A  2427    .LINE 218
                           A  2428    
                           A  2429    .DEFINE "id"
                           A  2430    
                           A  2431    .CLASS 65
                           A  2432    
                           A  2433    .VALUE 6
                           A  2434    
                           A  2435    .TYPE 12
                           A  2436    
                           A  2437    .ENDEF
                           A  2438    
0407B7 DDE5                A  2439    	PUSH	IX
0407B9 DD210000 00         A  2440    	LD	IX,0
0407BE DD39                A  2441    	ADD	IX,SP
                           A  2442    ;  219		putch(23); // vdu_sys
                           A  2443    .LINE 219
                           A  2444    
0407C0 01170000            A  2445    	LD	BC,23
0407C4 C5                  A  2446    	PUSH	BC
0407C5 CD EC 0C 04         A  2447    	CALL	_putch
0407C9 C1                  A  2448    	POP	BC
                           A  2449    ;  220		putch(27); // sprite command
                           A  2450    .LINE 220
                           A  2451    
0407CA 011B0000            A  2452    	LD	BC,27
0407CE C5                  A  2453    	PUSH	BC
0407CF CD EC 0C 04         A  2454    	CALL	_putch
0407D3 C1                  A  2455    	POP	BC
                           A  2456    ;  221		putch(4);  // select sprite
                           A  2457    .LINE 221
                           A  2458    
0407D4 01040000            A  2459    	LD	BC,4
0407D8 C5                  A  2460    	PUSH	BC
0407D9 CD EC 0C 04         A  2461    	CALL	_putch
0407DD C1                  A  2462    	POP	BC
                           A  2463    ;  222		putch(id);
                           A  2464    .LINE 222
                           A  2465    
0407DE DD7E06              A  2466    	LD	A,(IX+%6)
0407E1 B7ED62              A  2467    	UEXT	HL
0407E4 6F                  A  2468    	LD	L,A
0407E5 E5                  A  2469    	PUSH	HL
0407E6 CD EC 0C 04         A  2470    	CALL	_putch
0407EA C1                  A  2471    	POP	BC
                           A  2472    ;  223		return;			
                           A  2473    ;  224	}
                           A  2474    .LINE 224
                           A  2475    
0407EB DDF9                A  2476    	LD	SP,IX
0407ED DDE1                A  2477    	POP	IX
0407EF C9                  A  2478    	RET	
                           A  2479    
                           A  2480    
                           A  2481    ;**************************** _vdp_spriteSelect
                           A  2482    ;Name                         Addr/Register   S
                           A  2483    ;_putch                              IMPORT  --
                           A  2484    ;id                                    IX+6    
                           A  2485    
                           A  2486    
                           A  2487    ; Stack Frame Size: 9 (bytes)
                           A  2488    ;       Spill Code: 0 (instruction)
                           A  2489    
                           A  2490    
                           A  2491    .ENDFUNC "vdp_spriteSelect",224,"_vdp_spriteSel
                           A  2492    ;  225	
                           A  2493    ;  226	void vdp_spriteClearFramesSelected(void
                           A  2494    ;  227	{
0407F0                     A  2495    _vdp_spriteClearFramesSelected:
                           A  2496    .DEFINE "_vdp_spriteClearFramesSelected"
                           A  2497    
                           A  2498    .VALUE _vdp_spriteClearFramesSelected
                           A  2499    
                           A  2500    .CLASS 2
                           A  2501    
                           A  2502    .TYPE 65
                           A  2503    
                           A  2504    .ENDEF
                           A  2505    
                           A  2506    .BEGFUNC "vdp_spriteClearFramesSelected",227,"_
                           A  2507    
0407F0 DDE5                A  2508    	PUSH	IX
0407F2 DD210000 00         A  2509    	LD	IX,0
0407F7 DD39                A  2510    	ADD	IX,SP
                           A  2511    ;  228		putch(23); // vdu_sys
                           A  2512    .LINE 228
                           A  2513    
0407F9 01170000            A  2514    	LD	BC,23
0407FD C5                  A  2515    	PUSH	BC
0407FE CD EC 0C 04         A  2516    	CALL	_putch
040802 C1                  A  2517    	POP	BC
                           A  2518    ;  229		putch(27); // sprite command
                           A  2519    .LINE 229
                           A  2520    
040803 011B0000            A  2521    	LD	BC,27
040807 C5                  A  2522    	PUSH	BC
040808 CD EC 0C 04         A  2523    	CALL	_putch
04080C C1                  A  2524    	POP	BC
                           A  2525    ;  230		putch(5);  // clear frames
                           A  2526    .LINE 230
                           A  2527    
04080D 01050000            A  2528    	LD	BC,5
040811 C5                  A  2529    	PUSH	BC
040812 CD EC 0C 04         A  2530    	CALL	_putch
040816 C1                  A  2531    	POP	BC
                           A  2532    ;  231		return;				
                           A  2533    ;  232	}
                           A  2534    .LINE 232
                           A  2535    
040817 DDF9                A  2536    	LD	SP,IX
040819 DDE1                A  2537    	POP	IX
04081B C9                  A  2538    	RET	
                           A  2539    
                           A  2540    
                           A  2541    ;**************************** _vdp_spriteClearF
                           A  2542    ;Name                         Addr/Register   S
                           A  2543    ;_putch                              IMPORT  --
                           A  2544    
                           A  2545    
                           A  2546    ; Stack Frame Size: 6 (bytes)
                           A  2547    ;       Spill Code: 0 (instruction)
                           A  2548    
                           A  2549    
                           A  2550    .ENDFUNC "vdp_spriteClearFramesSelected",232,"_
                           A  2551    ;  233	
                           A  2552    ;  234	void vdp_spriteClearFrames(UINT8 bitmap
                           A  2553    ;  235	{
04081C                     A  2554    _vdp_spriteClearFrames:
                           A  2555    .DEFINE "_vdp_spriteClearFrames"
                           A  2556    
                           A  2557    .VALUE _vdp_spriteClearFrames
                           A  2558    
                           A  2559    .CLASS 2
                           A  2560    
                           A  2561    .TYPE 65
                           A  2562    
                           A  2563    .ENDEF
                           A  2564    
                           A  2565    .BEGFUNC "vdp_spriteClearFrames",235,"_vdp_spri
                           A  2566    
                           A  2567    .LINE 235
                           A  2568    
                           A  2569    .DEFINE "bitmapid"
                           A  2570    
                           A  2571    .CLASS 65
                           A  2572    
                           A  2573    .VALUE 6
                           A  2574    
                           A  2575    .TYPE 12
                           A  2576    
                           A  2577    .ENDEF
                           A  2578    
04081C DDE5                A  2579    	PUSH	IX
04081E DD210000 00         A  2580    	LD	IX,0
040823 DD39                A  2581    	ADD	IX,SP
                           A  2582    ;  236		vdp_spriteSelect(bitmapid);
                           A  2583    .LINE 236
                           A  2584    
040825 DD4E06              A  2585    	LD	C,(IX+%6)
040828 0600                A  2586    	LD	B,%0
04082A C5                  A  2587    	PUSH	BC
04082B CD B7 07 04         A  2588    	CALL	_vdp_spriteSelect
04082F C1                  A  2589    	POP	BC
                           A  2590    ;  237		vdp_spriteClearFramesSelected();
                           A  2591    .LINE 237
                           A  2592    
040830 CD F0 07 04         A  2593    	CALL	_vdp_spriteClearFramesSelected
                           A  2594    ;  238		return;				
                           A  2595    ;  239	}
                           A  2596    .LINE 239
                           A  2597    
040834 DDF9                A  2598    	LD	SP,IX
040836 DDE1                A  2599    	POP	IX
040838 C9                  A  2600    	RET	
                           A  2601    
                           A  2602    
                           A  2603    ;**************************** _vdp_spriteClearF
                           A  2604    ;Name                         Addr/Register   S
                           A  2605    ;bitmapid                              IX+6    
                           A  2606    
                           A  2607    
                           A  2608    ; Stack Frame Size: 9 (bytes)
                           A  2609    ;       Spill Code: 0 (instruction)
                           A  2610    
                           A  2611    
                           A  2612    .ENDFUNC "vdp_spriteClearFrames",239,"_vdp_spri
                           A  2613    ;  240	
                           A  2614    ;  241	void vdp_spriteAddFrameSelected(UINT8 b
                           A  2615    ;  242	{
040839                     A  2616    _vdp_spriteAddFrameSelected:
                           A  2617    .DEFINE "_vdp_spriteAddFrameSelected"
                           A  2618    
                           A  2619    .VALUE _vdp_spriteAddFrameSelected
                           A  2620    
                           A  2621    .CLASS 2
                           A  2622    
                           A  2623    .TYPE 65
                           A  2624    
                           A  2625    .ENDEF
                           A  2626    
                           A  2627    .BEGFUNC "vdp_spriteAddFrameSelected",242,"_vdp
                           A  2628    
                           A  2629    .LINE 242
                           A  2630    
                           A  2631    .DEFINE "bitmapid"
                           A  2632    
                           A  2633    .CLASS 65
                           A  2634    
                           A  2635    .VALUE 6
                           A  2636    
                           A  2637    .TYPE 12
                           A  2638    
                           A  2639    .ENDEF
                           A  2640    
040839 DDE5                A  2641    	PUSH	IX
04083B DD210000 00         A  2642    	LD	IX,0
040840 DD39                A  2643    	ADD	IX,SP
                           A  2644    ;  243		putch(23); // vdu_sys
                           A  2645    .LINE 243
                           A  2646    
040842 01170000            A  2647    	LD	BC,23
040846 C5                  A  2648    	PUSH	BC
040847 CD EC 0C 04         A  2649    	CALL	_putch
04084B C1                  A  2650    	POP	BC
                           A  2651    ;  244		putch(27); // sprite command
                           A  2652    .LINE 244
                           A  2653    
04084C 011B0000            A  2654    	LD	BC,27
040850 C5                  A  2655    	PUSH	BC
040851 CD EC 0C 04         A  2656    	CALL	_putch
040855 C1                  A  2657    	POP	BC
                           A  2658    ;  245		putch(6);  // add frame
                           A  2659    .LINE 245
                           A  2660    
040856 01060000            A  2661    	LD	BC,6
04085A C5                  A  2662    	PUSH	BC
04085B CD EC 0C 04         A  2663    	CALL	_putch
04085F C1                  A  2664    	POP	BC
                           A  2665    ;  246		putch(bitmapid);
                           A  2666    .LINE 246
                           A  2667    
040860 DD7E06              A  2668    	LD	A,(IX+%6)
040863 B7ED62              A  2669    	UEXT	HL
040866 6F                  A  2670    	LD	L,A
040867 E5                  A  2671    	PUSH	HL
040868 CD EC 0C 04         A  2672    	CALL	_putch
04086C C1                  A  2673    	POP	BC
                           A  2674    ;  247		return;	
                           A  2675    ;  248	}
                           A  2676    .LINE 248
                           A  2677    
04086D DDF9                A  2678    	LD	SP,IX
04086F DDE1                A  2679    	POP	IX
040871 C9                  A  2680    	RET	
                           A  2681    
                           A  2682    
                           A  2683    ;**************************** _vdp_spriteAddFra
                           A  2684    ;Name                         Addr/Register   S
                           A  2685    ;_putch                              IMPORT  --
                           A  2686    ;bitmapid                              IX+6    
                           A  2687    
                           A  2688    
                           A  2689    ; Stack Frame Size: 9 (bytes)
                           A  2690    ;       Spill Code: 0 (instruction)
                           A  2691    
                           A  2692    
                           A  2693    .ENDFUNC "vdp_spriteAddFrameSelected",248,"_vdp
                           A  2694    ;  249	
                           A  2695    ;  250	void vdp_spriteAddFrame(UINT8 id, UINT8
                           A  2696    ;  251	{
040872                     A  2697    _vdp_spriteAddFrame:
                           A  2698    .DEFINE "_vdp_spriteAddFrame"
                           A  2699    
                           A  2700    .VALUE _vdp_spriteAddFrame
                           A  2701    
                           A  2702    .CLASS 2
                           A  2703    
                           A  2704    .TYPE 65
                           A  2705    
                           A  2706    .ENDEF
                           A  2707    
                           A  2708    .BEGFUNC "vdp_spriteAddFrame",251,"_vdp_spriteA
                           A  2709    
                           A  2710    .LINE 251
                           A  2711    
                           A  2712    .DEFINE "id"
                           A  2713    
                           A  2714    .CLASS 65
                           A  2715    
                           A  2716    .VALUE 6
                           A  2717    
                           A  2718    .TYPE 12
                           A  2719    
                           A  2720    .ENDEF
                           A  2721    
                           A  2722    .DEFINE "bitmapid"
                           A  2723    
                           A  2724    .CLASS 65
                           A  2725    
                           A  2726    .VALUE 9
                           A  2727    
                           A  2728    .TYPE 12
                           A  2729    
                           A  2730    .ENDEF
                           A  2731    
040872 DDE5                A  2732    	PUSH	IX
040874 DD210000 00         A  2733    	LD	IX,0
040879 DD39                A  2734    	ADD	IX,SP
                           A  2735    ;  252		vdp_spriteSelect(id);
                           A  2736    .LINE 252
                           A  2737    
04087B DD4E06              A  2738    	LD	C,(IX+%6)
04087E 0600                A  2739    	LD	B,%0
040880 C5                  A  2740    	PUSH	BC
040881 CD B7 07 04         A  2741    	CALL	_vdp_spriteSelect
040885 C1                  A  2742    	POP	BC
                           A  2743    ;  253		vdp_spriteAddFrameSelected(bitmapid
                           A  2744    .LINE 253
                           A  2745    
040886 DD4E09              A  2746    	LD	C,(IX+%9)
040889 0600                A  2747    	LD	B,%0
04088B C5                  A  2748    	PUSH	BC
04088C CD 39 08 04         A  2749    	CALL	_vdp_spriteAddFrameSelected
040890 C1                  A  2750    	POP	BC
                           A  2751    ;  254		return;	
                           A  2752    ;  255	}
                           A  2753    .LINE 255
                           A  2754    
040891 DDF9                A  2755    	LD	SP,IX
040893 DDE1                A  2756    	POP	IX
040895 C9                  A  2757    	RET	
                           A  2758    
                           A  2759    
                           A  2760    ;**************************** _vdp_spriteAddFra
                           A  2761    ;Name                         Addr/Register   S
                           A  2762    ;bitmapid                              IX+9    
                           A  2763    ;id                                    IX+6    
                           A  2764    
                           A  2765    
                           A  2766    ; Stack Frame Size: 12 (bytes)
                           A  2767    ;       Spill Code: 0 (instruction)
                           A  2768    
                           A  2769    
                           A  2770    .ENDFUNC "vdp_spriteAddFrame",255,"_vdp_spriteA
                           A  2771    ;  256	
                           A  2772    ;  257	void vdp_spriteNextFrameSelected(void)
                           A  2773    ;  258	{
040896                     A  2774    _vdp_spriteNextFrameSelected:
                           A  2775    .DEFINE "_vdp_spriteNextFrameSelected"
                           A  2776    
                           A  2777    .VALUE _vdp_spriteNextFrameSelected
                           A  2778    
                           A  2779    .CLASS 2
                           A  2780    
                           A  2781    .TYPE 65
                           A  2782    
                           A  2783    .ENDEF
                           A  2784    
                           A  2785    .BEGFUNC "vdp_spriteNextFrameSelected",258,"_vd
                           A  2786    
040896 DDE5                A  2787    	PUSH	IX
040898 DD210000 00         A  2788    	LD	IX,0
04089D DD39                A  2789    	ADD	IX,SP
                           A  2790    ;  259		putch(23); // vdu_sys
                           A  2791    .LINE 259
                           A  2792    
04089F 01170000            A  2793    	LD	BC,23
0408A3 C5                  A  2794    	PUSH	BC
0408A4 CD EC 0C 04         A  2795    	CALL	_putch
0408A8 C1                  A  2796    	POP	BC
                           A  2797    ;  260		putch(27); // sprite command
                           A  2798    .LINE 260
                           A  2799    
0408A9 011B0000            A  2800    	LD	BC,27
0408AD C5                  A  2801    	PUSH	BC
0408AE CD EC 0C 04         A  2802    	CALL	_putch
0408B2 C1                  A  2803    	POP	BC
                           A  2804    ;  261		putch(8);  // next frame
                           A  2805    .LINE 261
                           A  2806    
0408B3 01080000            A  2807    	LD	BC,8
0408B7 C5                  A  2808    	PUSH	BC
0408B8 CD EC 0C 04         A  2809    	CALL	_putch
0408BC C1                  A  2810    	POP	BC
                           A  2811    ;  262		return;			
                           A  2812    ;  263	}
                           A  2813    .LINE 263
                           A  2814    
0408BD DDF9                A  2815    	LD	SP,IX
0408BF DDE1                A  2816    	POP	IX
0408C1 C9                  A  2817    	RET	
                           A  2818    
                           A  2819    
                           A  2820    ;**************************** _vdp_spriteNextFr
                           A  2821    ;Name                         Addr/Register   S
                           A  2822    ;_putch                              IMPORT  --
                           A  2823    
                           A  2824    
                           A  2825    ; Stack Frame Size: 6 (bytes)
                           A  2826    ;       Spill Code: 0 (instruction)
                           A  2827    
                           A  2828    
                           A  2829    .ENDFUNC "vdp_spriteNextFrameSelected",263,"_vd
                           A  2830    ;  264	
                           A  2831    ;  265	void vdp_spriteNextFrame(UINT8 id)
                           A  2832    ;  266	{
0408C2                     A  2833    _vdp_spriteNextFrame:
                           A  2834    .DEFINE "_vdp_spriteNextFrame"
                           A  2835    
                           A  2836    .VALUE _vdp_spriteNextFrame
                           A  2837    
                           A  2838    .CLASS 2
                           A  2839    
                           A  2840    .TYPE 65
                           A  2841    
                           A  2842    .ENDEF
                           A  2843    
                           A  2844    .BEGFUNC "vdp_spriteNextFrame",266,"_vdp_sprite
                           A  2845    
                           A  2846    .LINE 266
                           A  2847    
                           A  2848    .DEFINE "id"
                           A  2849    
                           A  2850    .CLASS 65
                           A  2851    
                           A  2852    .VALUE 6
                           A  2853    
                           A  2854    .TYPE 12
                           A  2855    
                           A  2856    .ENDEF
                           A  2857    
0408C2 DDE5                A  2858    	PUSH	IX
0408C4 DD210000 00         A  2859    	LD	IX,0
0408C9 DD39                A  2860    	ADD	IX,SP
                           A  2861    ;  267		vdp_spriteSelect(id);
                           A  2862    .LINE 267
                           A  2863    
0408CB DD4E06              A  2864    	LD	C,(IX+%6)
0408CE 0600                A  2865    	LD	B,%0
0408D0 C5                  A  2866    	PUSH	BC
0408D1 CD B7 07 04         A  2867    	CALL	_vdp_spriteSelect
0408D5 C1                  A  2868    	POP	BC
                           A  2869    ;  268		vdp_spriteNextFrameSelected();
                           A  2870    .LINE 268
                           A  2871    
0408D6 CD 96 08 04         A  2872    	CALL	_vdp_spriteNextFrameSelected
                           A  2873    ;  269		return;
                           A  2874    ;  270	}
                           A  2875    .LINE 270
                           A  2876    
0408DA DDF9                A  2877    	LD	SP,IX
0408DC DDE1                A  2878    	POP	IX
0408DE C9                  A  2879    	RET	
                           A  2880    
                           A  2881    
                           A  2882    ;**************************** _vdp_spriteNextFr
                           A  2883    ;Name                         Addr/Register   S
                           A  2884    ;id                                    IX+6    
                           A  2885    
                           A  2886    
                           A  2887    ; Stack Frame Size: 9 (bytes)
                           A  2888    ;       Spill Code: 0 (instruction)
                           A  2889    
                           A  2890    
                           A  2891    .ENDFUNC "vdp_spriteNextFrame",270,"_vdp_sprite
                           A  2892    ;  271	
                           A  2893    ;  272	void vdp_spritePreviousFrameSelected(vo
                           A  2894    ;  273	{
0408DF                     A  2895    _vdp_spritePreviousFrameSelected:
                           A  2896    .DEFINE "_vdp_spritePreviousFrameSelected"
                           A  2897    
                           A  2898    .VALUE _vdp_spritePreviousFrameSelected
                           A  2899    
                           A  2900    .CLASS 2
                           A  2901    
                           A  2902    .TYPE 65
                           A  2903    
                           A  2904    .ENDEF
                           A  2905    
                           A  2906    .BEGFUNC "vdp_spritePreviousFrameSelected",273,
                           A  2907    
0408DF DDE5                A  2908    	PUSH	IX
0408E1 DD210000 00         A  2909    	LD	IX,0
0408E6 DD39                A  2910    	ADD	IX,SP
                           A  2911    ;  274		putch(23); // vdu_sys
                           A  2912    .LINE 274
                           A  2913    
0408E8 01170000            A  2914    	LD	BC,23
0408EC C5                  A  2915    	PUSH	BC
0408ED CD EC 0C 04         A  2916    	CALL	_putch
0408F1 C1                  A  2917    	POP	BC
                           A  2918    ;  275		putch(27); // sprite command
                           A  2919    .LINE 275
                           A  2920    
0408F2 011B0000            A  2921    	LD	BC,27
0408F6 C5                  A  2922    	PUSH	BC
0408F7 CD EC 0C 04         A  2923    	CALL	_putch
0408FB C1                  A  2924    	POP	BC
                           A  2925    ;  276		putch(9); // previous frame
                           A  2926    .LINE 276
                           A  2927    
0408FC 01090000            A  2928    	LD	BC,9
040900 C5                  A  2929    	PUSH	BC
040901 CD EC 0C 04         A  2930    	CALL	_putch
040905 C1                  A  2931    	POP	BC
                           A  2932    ;  277		return;	
                           A  2933    ;  278	}
                           A  2934    .LINE 278
                           A  2935    
040906 DDF9                A  2936    	LD	SP,IX
040908 DDE1                A  2937    	POP	IX
04090A C9                  A  2938    	RET	
                           A  2939    
                           A  2940    
                           A  2941    ;**************************** _vdp_spritePrevio
                           A  2942    ;Name                         Addr/Register   S
                           A  2943    ;_putch                              IMPORT  --
                           A  2944    
                           A  2945    
                           A  2946    ; Stack Frame Size: 6 (bytes)
                           A  2947    ;       Spill Code: 0 (instruction)
                           A  2948    
                           A  2949    
                           A  2950    .ENDFUNC "vdp_spritePreviousFrameSelected",278,
                           A  2951    ;  279	
                           A  2952    ;  280	void vdp_spritePreviousFrame(UINT8 id)
                           A  2953    ;  281	{
04090B                     A  2954    _vdp_spritePreviousFrame:
                           A  2955    .DEFINE "_vdp_spritePreviousFrame"
                           A  2956    
                           A  2957    .VALUE _vdp_spritePreviousFrame
                           A  2958    
                           A  2959    .CLASS 2
                           A  2960    
                           A  2961    .TYPE 65
                           A  2962    
                           A  2963    .ENDEF
                           A  2964    
                           A  2965    .BEGFUNC "vdp_spritePreviousFrame",281,"_vdp_sp
                           A  2966    
                           A  2967    .LINE 281
                           A  2968    
                           A  2969    .DEFINE "id"
                           A  2970    
                           A  2971    .CLASS 65
                           A  2972    
                           A  2973    .VALUE 6
                           A  2974    
                           A  2975    .TYPE 12
                           A  2976    
                           A  2977    .ENDEF
                           A  2978    
04090B DDE5                A  2979    	PUSH	IX
04090D DD210000 00         A  2980    	LD	IX,0
040912 DD39                A  2981    	ADD	IX,SP
                           A  2982    ;  282		vdp_spriteSelect(id);
                           A  2983    .LINE 282
                           A  2984    
040914 DD4E06              A  2985    	LD	C,(IX+%6)
040917 0600                A  2986    	LD	B,%0
040919 C5                  A  2987    	PUSH	BC
04091A CD B7 07 04         A  2988    	CALL	_vdp_spriteSelect
04091E C1                  A  2989    	POP	BC
                           A  2990    ;  283		vdp_spritePreviousFrameSelected();
                           A  2991    .LINE 283
                           A  2992    
04091F CD DF 08 04         A  2993    	CALL	_vdp_spritePreviousFrameSelected
                           A  2994    ;  284		return;
                           A  2995    ;  285	}
                           A  2996    .LINE 285
                           A  2997    
040923 DDF9                A  2998    	LD	SP,IX
040925 DDE1                A  2999    	POP	IX
040927 C9                  A  3000    	RET	
                           A  3001    
                           A  3002    
                           A  3003    ;**************************** _vdp_spritePrevio
                           A  3004    ;Name                         Addr/Register   S
                           A  3005    ;id                                    IX+6    
                           A  3006    
                           A  3007    
                           A  3008    ; Stack Frame Size: 9 (bytes)
                           A  3009    ;       Spill Code: 0 (instruction)
                           A  3010    
                           A  3011    
                           A  3012    .ENDFUNC "vdp_spritePreviousFrame",285,"_vdp_sp
                           A  3013    ;  286	
                           A  3014    ;  287	void vdp_spriteSetFrameSelected(UINT8 f
                           A  3015    ;  288	{
040928                     A  3016    _vdp_spriteSetFrameSelected:
                           A  3017    .DEFINE "_vdp_spriteSetFrameSelected"
                           A  3018    
                           A  3019    .VALUE _vdp_spriteSetFrameSelected
                           A  3020    
                           A  3021    .CLASS 2
                           A  3022    
                           A  3023    .TYPE 65
                           A  3024    
                           A  3025    .ENDEF
                           A  3026    
                           A  3027    .BEGFUNC "vdp_spriteSetFrameSelected",288,"_vdp
                           A  3028    
                           A  3029    .LINE 288
                           A  3030    
                           A  3031    .DEFINE "framenumber"
                           A  3032    
                           A  3033    .CLASS 65
                           A  3034    
                           A  3035    .VALUE 6
                           A  3036    
                           A  3037    .TYPE 12
                           A  3038    
                           A  3039    .ENDEF
                           A  3040    
040928 DDE5                A  3041    	PUSH	IX
04092A DD210000 00         A  3042    	LD	IX,0
04092F DD39                A  3043    	ADD	IX,SP
                           A  3044    ;  289		putch(23); // vdu_sys
                           A  3045    .LINE 289
                           A  3046    
040931 01170000            A  3047    	LD	BC,23
040935 C5                  A  3048    	PUSH	BC
040936 CD EC 0C 04         A  3049    	CALL	_putch
04093A C1                  A  3050    	POP	BC
                           A  3051    ;  290		putch(27); // sprite command
                           A  3052    .LINE 290
                           A  3053    
04093B 011B0000            A  3054    	LD	BC,27
04093F C5                  A  3055    	PUSH	BC
040940 CD EC 0C 04         A  3056    	CALL	_putch
040944 C1                  A  3057    	POP	BC
                           A  3058    ;  291		putch(10); // set current frame
                           A  3059    .LINE 291
                           A  3060    
040945 010A0000            A  3061    	LD	BC,10
040949 C5                  A  3062    	PUSH	BC
04094A CD EC 0C 04         A  3063    	CALL	_putch
04094E C1                  A  3064    	POP	BC
                           A  3065    ;  292		putch(framenumber);
                           A  3066    .LINE 292
                           A  3067    
04094F DD7E06              A  3068    	LD	A,(IX+%6)
040952 B7ED62              A  3069    	UEXT	HL
040955 6F                  A  3070    	LD	L,A
040956 E5                  A  3071    	PUSH	HL
040957 CD EC 0C 04         A  3072    	CALL	_putch
04095B C1                  A  3073    	POP	BC
                           A  3074    ;  293		return;	
                           A  3075    ;  294	}
                           A  3076    .LINE 294
                           A  3077    
04095C DDF9                A  3078    	LD	SP,IX
04095E DDE1                A  3079    	POP	IX
040960 C9                  A  3080    	RET	
                           A  3081    
                           A  3082    
                           A  3083    ;**************************** _vdp_spriteSetFra
                           A  3084    ;Name                         Addr/Register   S
                           A  3085    ;_putch                              IMPORT  --
                           A  3086    ;framenumber                           IX+6    
                           A  3087    
                           A  3088    
                           A  3089    ; Stack Frame Size: 9 (bytes)
                           A  3090    ;       Spill Code: 0 (instruction)
                           A  3091    
                           A  3092    
                           A  3093    .ENDFUNC "vdp_spriteSetFrameSelected",294,"_vdp
                           A  3094    ;  295	
                           A  3095    ;  296	void vdp_spriteSetFrame(UINT8 id, UINT8
                           A  3096    ;  297	{
040961                     A  3097    _vdp_spriteSetFrame:
                           A  3098    .DEFINE "_vdp_spriteSetFrame"
                           A  3099    
                           A  3100    .VALUE _vdp_spriteSetFrame
                           A  3101    
                           A  3102    .CLASS 2
                           A  3103    
                           A  3104    .TYPE 65
                           A  3105    
                           A  3106    .ENDEF
                           A  3107    
                           A  3108    .BEGFUNC "vdp_spriteSetFrame",297,"_vdp_spriteS
                           A  3109    
                           A  3110    .LINE 297
                           A  3111    
                           A  3112    .DEFINE "id"
                           A  3113    
                           A  3114    .CLASS 65
                           A  3115    
                           A  3116    .VALUE 6
                           A  3117    
                           A  3118    .TYPE 12
                           A  3119    
                           A  3120    .ENDEF
                           A  3121    
                           A  3122    .DEFINE "framenumber"
                           A  3123    
                           A  3124    .CLASS 65
                           A  3125    
                           A  3126    .VALUE 9
                           A  3127    
                           A  3128    .TYPE 12
                           A  3129    
                           A  3130    .ENDEF
                           A  3131    
040961 DDE5                A  3132    	PUSH	IX
040963 DD210000 00         A  3133    	LD	IX,0
040968 DD39                A  3134    	ADD	IX,SP
                           A  3135    ;  298		vdp_spriteSelect(id);
                           A  3136    .LINE 298
                           A  3137    
04096A DD4E06              A  3138    	LD	C,(IX+%6)
04096D 0600                A  3139    	LD	B,%0
04096F C5                  A  3140    	PUSH	BC
040970 CD B7 07 04         A  3141    	CALL	_vdp_spriteSelect
040974 C1                  A  3142    	POP	BC
                           A  3143    ;  299		vdp_spriteNextFrameSelected();
                           A  3144    .LINE 299
                           A  3145    
040975 CD 96 08 04         A  3146    	CALL	_vdp_spriteNextFrameSelected
                           A  3147    ;  300		return;
                           A  3148    ;  301	}
                           A  3149    .LINE 301
                           A  3150    
040979 DDF9                A  3151    	LD	SP,IX
04097B DDE1                A  3152    	POP	IX
04097D C9                  A  3153    	RET	
                           A  3154    
                           A  3155    
                           A  3156    ;**************************** _vdp_spriteSetFra
                           A  3157    ;Name                         Addr/Register   S
                           A  3158    ;framenumber                           IX+9    
                           A  3159    ;id                                    IX+6    
                           A  3160    
                           A  3161    
                           A  3162    ; Stack Frame Size: 12 (bytes)
                           A  3163    ;       Spill Code: 0 (instruction)
                           A  3164    
                           A  3165    
                           A  3166    .ENDFUNC "vdp_spriteSetFrame",301,"_vdp_spriteS
                           A  3167    ;  302	
                           A  3168    ;  303	void vdp_spriteShowSelected(void)
                           A  3169    ;  304	{
04097E                     A  3170    _vdp_spriteShowSelected:
                           A  3171    .DEFINE "_vdp_spriteShowSelected"
                           A  3172    
                           A  3173    .VALUE _vdp_spriteShowSelected
                           A  3174    
                           A  3175    .CLASS 2
                           A  3176    
                           A  3177    .TYPE 65
                           A  3178    
                           A  3179    .ENDEF
                           A  3180    
                           A  3181    .BEGFUNC "vdp_spriteShowSelected",304,"_vdp_spr
                           A  3182    
04097E DDE5                A  3183    	PUSH	IX
040980 DD210000 00         A  3184    	LD	IX,0
040985 DD39                A  3185    	ADD	IX,SP
                           A  3186    ;  305		putch(23); // vdu_sys
                           A  3187    .LINE 305
                           A  3188    
040987 01170000            A  3189    	LD	BC,23
04098B C5                  A  3190    	PUSH	BC
04098C CD EC 0C 04         A  3191    	CALL	_putch
040990 C1                  A  3192    	POP	BC
                           A  3193    ;  306		putch(27); // sprite command
                           A  3194    .LINE 306
                           A  3195    
040991 011B0000            A  3196    	LD	BC,27
040995 C5                  A  3197    	PUSH	BC
040996 CD EC 0C 04         A  3198    	CALL	_putch
04099A C1                  A  3199    	POP	BC
                           A  3200    ;  307		putch(11); // show sprite
                           A  3201    .LINE 307
                           A  3202    
04099B 010B0000            A  3203    	LD	BC,11
04099F C5                  A  3204    	PUSH	BC
0409A0 CD EC 0C 04         A  3205    	CALL	_putch
0409A4 C1                  A  3206    	POP	BC
                           A  3207    ;  308		return;			
                           A  3208    ;  309	}
                           A  3209    .LINE 309
                           A  3210    
0409A5 DDF9                A  3211    	LD	SP,IX
0409A7 DDE1                A  3212    	POP	IX
0409A9 C9                  A  3213    	RET	
                           A  3214    
                           A  3215    
                           A  3216    ;**************************** _vdp_spriteShowSe
                           A  3217    ;Name                         Addr/Register   S
                           A  3218    ;_putch                              IMPORT  --
                           A  3219    
                           A  3220    
                           A  3221    ; Stack Frame Size: 6 (bytes)
                           A  3222    ;       Spill Code: 0 (instruction)
                           A  3223    
                           A  3224    
                           A  3225    .ENDFUNC "vdp_spriteShowSelected",309,"_vdp_spr
                           A  3226    ;  310	
                           A  3227    ;  311	void vdp_spriteShow(UINT8 id)
                           A  3228    ;  312	{
0409AA                     A  3229    _vdp_spriteShow:
                           A  3230    .DEFINE "_vdp_spriteShow"
                           A  3231    
                           A  3232    .VALUE _vdp_spriteShow
                           A  3233    
                           A  3234    .CLASS 2
                           A  3235    
                           A  3236    .TYPE 65
                           A  3237    
                           A  3238    .ENDEF
                           A  3239    
                           A  3240    .BEGFUNC "vdp_spriteShow",312,"_vdp_spriteShow"
                           A  3241    
                           A  3242    .LINE 312
                           A  3243    
                           A  3244    .DEFINE "id"
                           A  3245    
                           A  3246    .CLASS 65
                           A  3247    
                           A  3248    .VALUE 6
                           A  3249    
                           A  3250    .TYPE 12
                           A  3251    
                           A  3252    .ENDEF
                           A  3253    
0409AA DDE5                A  3254    	PUSH	IX
0409AC DD210000 00         A  3255    	LD	IX,0
0409B1 DD39                A  3256    	ADD	IX,SP
                           A  3257    ;  313		vdp_spriteSelect(id);
                           A  3258    .LINE 313
                           A  3259    
0409B3 DD4E06              A  3260    	LD	C,(IX+%6)
0409B6 0600                A  3261    	LD	B,%0
0409B8 C5                  A  3262    	PUSH	BC
0409B9 CD B7 07 04         A  3263    	CALL	_vdp_spriteSelect
0409BD C1                  A  3264    	POP	BC
                           A  3265    ;  314		vdp_spriteShowSelected();
                           A  3266    .LINE 314
                           A  3267    
0409BE CD 7E 09 04         A  3268    	CALL	_vdp_spriteShowSelected
                           A  3269    ;  315		return;
                           A  3270    ;  316	}
                           A  3271    .LINE 316
                           A  3272    
0409C2 DDF9                A  3273    	LD	SP,IX
0409C4 DDE1                A  3274    	POP	IX
0409C6 C9                  A  3275    	RET	
                           A  3276    
                           A  3277    
                           A  3278    ;**************************** _vdp_spriteShow *
                           A  3279    ;Name                         Addr/Register   S
                           A  3280    ;id                                    IX+6    
                           A  3281    
                           A  3282    
                           A  3283    ; Stack Frame Size: 9 (bytes)
                           A  3284    ;       Spill Code: 0 (instruction)
                           A  3285    
                           A  3286    
                           A  3287    .ENDFUNC "vdp_spriteShow",316,"_vdp_spriteShow"
                           A  3288    ;  317	
                           A  3289    ;  318	void vdp_spriteHideSelected(void)
                           A  3290    ;  319	{
0409C7                     A  3291    _vdp_spriteHideSelected:
                           A  3292    .DEFINE "_vdp_spriteHideSelected"
                           A  3293    
                           A  3294    .VALUE _vdp_spriteHideSelected
                           A  3295    
                           A  3296    .CLASS 2
                           A  3297    
                           A  3298    .TYPE 65
                           A  3299    
                           A  3300    .ENDEF
                           A  3301    
                           A  3302    .BEGFUNC "vdp_spriteHideSelected",319,"_vdp_spr
                           A  3303    
0409C7 DDE5                A  3304    	PUSH	IX
0409C9 DD210000 00         A  3305    	LD	IX,0
0409CE DD39                A  3306    	ADD	IX,SP
                           A  3307    ;  320		putch(23); // vdu_sys
                           A  3308    .LINE 320
                           A  3309    
0409D0 01170000            A  3310    	LD	BC,23
0409D4 C5                  A  3311    	PUSH	BC
0409D5 CD EC 0C 04         A  3312    	CALL	_putch
0409D9 C1                  A  3313    	POP	BC
                           A  3314    ;  321		putch(27); // sprite command
                           A  3315    .LINE 321
                           A  3316    
0409DA 011B0000            A  3317    	LD	BC,27
0409DE C5                  A  3318    	PUSH	BC
0409DF CD EC 0C 04         A  3319    	CALL	_putch
0409E3 C1                  A  3320    	POP	BC
                           A  3321    ;  322		putch(12); // hide sprite
                           A  3322    .LINE 322
                           A  3323    
0409E4 010C0000            A  3324    	LD	BC,12
0409E8 C5                  A  3325    	PUSH	BC
0409E9 CD EC 0C 04         A  3326    	CALL	_putch
0409ED C1                  A  3327    	POP	BC
                           A  3328    ;  323		return;		
                           A  3329    ;  324	}
                           A  3330    .LINE 324
                           A  3331    
0409EE DDF9                A  3332    	LD	SP,IX
0409F0 DDE1                A  3333    	POP	IX
0409F2 C9                  A  3334    	RET	
                           A  3335    
                           A  3336    
                           A  3337    ;**************************** _vdp_spriteHideSe
                           A  3338    ;Name                         Addr/Register   S
                           A  3339    ;_putch                              IMPORT  --
                           A  3340    
                           A  3341    
                           A  3342    ; Stack Frame Size: 6 (bytes)
                           A  3343    ;       Spill Code: 0 (instruction)
                           A  3344    
                           A  3345    
                           A  3346    .ENDFUNC "vdp_spriteHideSelected",324,"_vdp_spr
                           A  3347    ;  325	
                           A  3348    ;  326	void vdp_spriteHide(UINT8 id)
                           A  3349    ;  327	{
0409F3                     A  3350    _vdp_spriteHide:
                           A  3351    .DEFINE "_vdp_spriteHide"
                           A  3352    
                           A  3353    .VALUE _vdp_spriteHide
                           A  3354    
                           A  3355    .CLASS 2
                           A  3356    
                           A  3357    .TYPE 65
                           A  3358    
                           A  3359    .ENDEF
                           A  3360    
                           A  3361    .BEGFUNC "vdp_spriteHide",327,"_vdp_spriteHide"
                           A  3362    
                           A  3363    .LINE 327
                           A  3364    
                           A  3365    .DEFINE "id"
                           A  3366    
                           A  3367    .CLASS 65
                           A  3368    
                           A  3369    .VALUE 6
                           A  3370    
                           A  3371    .TYPE 12
                           A  3372    
                           A  3373    .ENDEF
                           A  3374    
0409F3 DDE5                A  3375    	PUSH	IX
0409F5 DD210000 00         A  3376    	LD	IX,0
0409FA DD39                A  3377    	ADD	IX,SP
                           A  3378    ;  328		vdp_spriteSelect(id);
                           A  3379    .LINE 328
                           A  3380    
0409FC DD4E06              A  3381    	LD	C,(IX+%6)
0409FF 0600                A  3382    	LD	B,%0
040A01 C5                  A  3383    	PUSH	BC
040A02 CD B7 07 04         A  3384    	CALL	_vdp_spriteSelect
040A06 C1                  A  3385    	POP	BC
                           A  3386    ;  329		vdp_spriteHideSelected();
                           A  3387    .LINE 329
                           A  3388    
040A07 CD C7 09 04         A  3389    	CALL	_vdp_spriteHideSelected
                           A  3390    ;  330		return;
                           A  3391    ;  331	}
                           A  3392    .LINE 331
                           A  3393    
040A0B DDF9                A  3394    	LD	SP,IX
040A0D DDE1                A  3395    	POP	IX
040A0F C9                  A  3396    	RET	
                           A  3397    
                           A  3398    
                           A  3399    ;**************************** _vdp_spriteHide *
                           A  3400    ;Name                         Addr/Register   S
                           A  3401    ;id                                    IX+6    
                           A  3402    
                           A  3403    
                           A  3404    ; Stack Frame Size: 9 (bytes)
                           A  3405    ;       Spill Code: 0 (instruction)
                           A  3406    
                           A  3407    
                           A  3408    .ENDFUNC "vdp_spriteHide",331,"_vdp_spriteHide"
                           A  3409    ;  332	
                           A  3410    ;  333	void vdp_spriteMoveToSelected(UINT16 x,
                           A  3411    ;  334	{
040A10                     A  3412    _vdp_spriteMoveToSelected:
                           A  3413    .DEFINE "_vdp_spriteMoveToSelected"
                           A  3414    
                           A  3415    .VALUE _vdp_spriteMoveToSelected
                           A  3416    
                           A  3417    .CLASS 2
                           A  3418    
                           A  3419    .TYPE 65
                           A  3420    
                           A  3421    .ENDEF
                           A  3422    
                           A  3423    .BEGFUNC "vdp_spriteMoveToSelected",334,"_vdp_s
                           A  3424    
                           A  3425    .LINE 334
                           A  3426    
                           A  3427    .DEFINE "x"
                           A  3428    
                           A  3429    .CLASS 65
                           A  3430    
                           A  3431    .VALUE 6
                           A  3432    
                           A  3433    .TYPE 13
                           A  3434    
                           A  3435    .ENDEF
                           A  3436    
                           A  3437    .DEFINE "y"
                           A  3438    
                           A  3439    .CLASS 65
                           A  3440    
                           A  3441    .VALUE 9
                           A  3442    
                           A  3443    .TYPE 13
                           A  3444    
                           A  3445    .ENDEF
                           A  3446    
040A10 DDE5                A  3447    	PUSH	IX
040A12 DD210000 00         A  3448    	LD	IX,0
040A17 DD39                A  3449    	ADD	IX,SP
                           A  3450    ;  335		putch(23); // vdu_sys
                           A  3451    .LINE 335
                           A  3452    
040A19 01170000            A  3453    	LD	BC,23
040A1D C5                  A  3454    	PUSH	BC
040A1E CD EC 0C 04         A  3455    	CALL	_putch
040A22 C1                  A  3456    	POP	BC
                           A  3457    ;  336		putch(27); // sprite command
                           A  3458    .LINE 336
                           A  3459    
040A23 011B0000            A  3460    	LD	BC,27
040A27 C5                  A  3461    	PUSH	BC
040A28 CD EC 0C 04         A  3462    	CALL	_putch
040A2C C1                  A  3463    	POP	BC
                           A  3464    ;  337		putch(13); // move to
                           A  3465    .LINE 337
                           A  3466    
040A2D 010D0000            A  3467    	LD	BC,13
040A31 C5                  A  3468    	PUSH	BC
040A32 CD EC 0C 04         A  3469    	CALL	_putch
040A36 C1                  A  3470    	POP	BC
                           A  3471    ;  338		write16bit(x);
                           A  3472    .LINE 338
                           A  3473    
040A37 DD0706              A  3474    	LD	BC,(IX+%6)
040A3A C5                  A  3475    	PUSH	BC
040A3B CD F2 01 04         A  3476    	CALL	_write16bit
040A3F C1                  A  3477    	POP	BC
                           A  3478    ;  339		write16bit(y);
                           A  3479    .LINE 339
                           A  3480    
040A40 DD0709              A  3481    	LD	BC,(IX+%9)
040A43 C5                  A  3482    	PUSH	BC
040A44 CD F2 01 04         A  3483    	CALL	_write16bit
040A48 C1                  A  3484    	POP	BC
                           A  3485    ;  340		return;	
                           A  3486    ;  341	}
                           A  3487    .LINE 341
                           A  3488    
040A49 DDF9                A  3489    	LD	SP,IX
040A4B DDE1                A  3490    	POP	IX
040A4D C9                  A  3491    	RET	
                           A  3492    
                           A  3493    
                           A  3494    ;**************************** _vdp_spriteMoveTo
                           A  3495    ;Name                         Addr/Register   S
                           A  3496    ;_putch                              IMPORT  --
                           A  3497    ;y                                     IX+9    
                           A  3498    ;x                                     IX+6    
                           A  3499    
                           A  3500    
                           A  3501    ; Stack Frame Size: 12 (bytes)
                           A  3502    ;       Spill Code: 0 (instruction)
                           A  3503    
                           A  3504    
                           A  3505    .ENDFUNC "vdp_spriteMoveToSelected",341,"_vdp_s
                           A  3506    ;  342	
                           A  3507    ;  343	void vdp_spriteMoveTo(UINT8 id, UINT16 
                           A  3508    ;  344	{
040A4E                     A  3509    _vdp_spriteMoveTo:
                           A  3510    .DEFINE "_vdp_spriteMoveTo"
                           A  3511    
                           A  3512    .VALUE _vdp_spriteMoveTo
                           A  3513    
                           A  3514    .CLASS 2
                           A  3515    
                           A  3516    .TYPE 65
                           A  3517    
                           A  3518    .ENDEF
                           A  3519    
                           A  3520    .BEGFUNC "vdp_spriteMoveTo",344,"_vdp_spriteMov
                           A  3521    
                           A  3522    .LINE 344
                           A  3523    
                           A  3524    .DEFINE "id"
                           A  3525    
                           A  3526    .CLASS 65
                           A  3527    
                           A  3528    .VALUE 6
                           A  3529    
                           A  3530    .TYPE 12
                           A  3531    
                           A  3532    .ENDEF
                           A  3533    
                           A  3534    .DEFINE "x"
                           A  3535    
                           A  3536    .CLASS 65
                           A  3537    
                           A  3538    .VALUE 9
                           A  3539    
                           A  3540    .TYPE 13
                           A  3541    
                           A  3542    .ENDEF
                           A  3543    
                           A  3544    .DEFINE "y"
                           A  3545    
                           A  3546    .CLASS 65
                           A  3547    
                           A  3548    .VALUE 12
                           A  3549    
                           A  3550    .TYPE 13
                           A  3551    
                           A  3552    .ENDEF
                           A  3553    
040A4E DDE5                A  3554    	PUSH	IX
040A50 DD210000 00         A  3555    	LD	IX,0
040A55 DD39                A  3556    	ADD	IX,SP
                           A  3557    ;  345		vdp_spriteSelect(id);
                           A  3558    .LINE 345
                           A  3559    
040A57 DD4E06              A  3560    	LD	C,(IX+%6)
040A5A 0600                A  3561    	LD	B,%0
040A5C C5                  A  3562    	PUSH	BC
040A5D CD B7 07 04         A  3563    	CALL	_vdp_spriteSelect
040A61 C1                  A  3564    	POP	BC
                           A  3565    ;  346		vdp_spriteMoveToSelected(x,y);
                           A  3566    .LINE 346
                           A  3567    
040A62 DD070C              A  3568    	LD	BC,(IX+%C)
040A65 C5                  A  3569    	PUSH	BC
040A66 DD0709              A  3570    	LD	BC,(IX+%9)
040A69 C5                  A  3571    	PUSH	BC
040A6A CD 10 0A 04         A  3572    	CALL	_vdp_spriteMoveToSelected
040A6E C1                  A  3573    	POP	BC
040A6F C1                  A  3574    	POP	BC
                           A  3575    ;  347		return;
                           A  3576    ;  348	}
                           A  3577    .LINE 348
                           A  3578    
040A70 DDF9                A  3579    	LD	SP,IX
040A72 DDE1                A  3580    	POP	IX
040A74 C9                  A  3581    	RET	
                           A  3582    
                           A  3583    
                           A  3584    ;**************************** _vdp_spriteMoveTo
                           A  3585    ;Name                         Addr/Register   S
                           A  3586    ;y                                    IX+12    
                           A  3587    ;x                                     IX+9    
                           A  3588    ;id                                    IX+6    
                           A  3589    
                           A  3590    
                           A  3591    ; Stack Frame Size: 15 (bytes)
                           A  3592    ;       Spill Code: 0 (instruction)
                           A  3593    
                           A  3594    
                           A  3595    .ENDFUNC "vdp_spriteMoveTo",348,"_vdp_spriteMov
                           A  3596    ;  349	
                           A  3597    ;  350	void vdp_spriteMoveBySelected(UINT16 x,
                           A  3598    ;  351	{
040A75                     A  3599    _vdp_spriteMoveBySelected:
                           A  3600    .DEFINE "_vdp_spriteMoveBySelected"
                           A  3601    
                           A  3602    .VALUE _vdp_spriteMoveBySelected
                           A  3603    
                           A  3604    .CLASS 2
                           A  3605    
                           A  3606    .TYPE 65
                           A  3607    
                           A  3608    .ENDEF
                           A  3609    
                           A  3610    .BEGFUNC "vdp_spriteMoveBySelected",351,"_vdp_s
                           A  3611    
                           A  3612    .LINE 351
                           A  3613    
                           A  3614    .DEFINE "x"
                           A  3615    
                           A  3616    .CLASS 65
                           A  3617    
                           A  3618    .VALUE 6
                           A  3619    
                           A  3620    .TYPE 13
                           A  3621    
                           A  3622    .ENDEF
                           A  3623    
                           A  3624    .DEFINE "y"
                           A  3625    
                           A  3626    .CLASS 65
                           A  3627    
                           A  3628    .VALUE 9
                           A  3629    
                           A  3630    .TYPE 13
                           A  3631    
                           A  3632    .ENDEF
                           A  3633    
040A75 DDE5                A  3634    	PUSH	IX
040A77 DD210000 00         A  3635    	LD	IX,0
040A7C DD39                A  3636    	ADD	IX,SP
                           A  3637    ;  352		putch(23); // vdu_sys
                           A  3638    .LINE 352
                           A  3639    
040A7E 01170000            A  3640    	LD	BC,23
040A82 C5                  A  3641    	PUSH	BC
040A83 CD EC 0C 04         A  3642    	CALL	_putch
040A87 C1                  A  3643    	POP	BC
                           A  3644    ;  353		putch(27); // sprite command
                           A  3645    .LINE 353
                           A  3646    
040A88 011B0000            A  3647    	LD	BC,27
040A8C C5                  A  3648    	PUSH	BC
040A8D CD EC 0C 04         A  3649    	CALL	_putch
040A91 C1                  A  3650    	POP	BC
                           A  3651    ;  354		putch(14); // move by
                           A  3652    .LINE 354
                           A  3653    
040A92 010E0000            A  3654    	LD	BC,14
040A96 C5                  A  3655    	PUSH	BC
040A97 CD EC 0C 04         A  3656    	CALL	_putch
040A9B C1                  A  3657    	POP	BC
                           A  3658    ;  355		write16bit(x);
                           A  3659    .LINE 355
                           A  3660    
040A9C DD0706              A  3661    	LD	BC,(IX+%6)
040A9F C5                  A  3662    	PUSH	BC
040AA0 CD F2 01 04         A  3663    	CALL	_write16bit
040AA4 C1                  A  3664    	POP	BC
                           A  3665    ;  356		write16bit(y);
                           A  3666    .LINE 356
                           A  3667    
040AA5 DD0709              A  3668    	LD	BC,(IX+%9)
040AA8 C5                  A  3669    	PUSH	BC
040AA9 CD F2 01 04         A  3670    	CALL	_write16bit
040AAD C1                  A  3671    	POP	BC
                           A  3672    ;  357		return;	
                           A  3673    ;  358	}
                           A  3674    .LINE 358
                           A  3675    
040AAE DDF9                A  3676    	LD	SP,IX
040AB0 DDE1                A  3677    	POP	IX
040AB2 C9                  A  3678    	RET	
                           A  3679    
                           A  3680    
                           A  3681    ;**************************** _vdp_spriteMoveBy
                           A  3682    ;Name                         Addr/Register   S
                           A  3683    ;_putch                              IMPORT  --
                           A  3684    ;y                                     IX+9    
                           A  3685    ;x                                     IX+6    
                           A  3686    
                           A  3687    
                           A  3688    ; Stack Frame Size: 12 (bytes)
                           A  3689    ;       Spill Code: 0 (instruction)
                           A  3690    
                           A  3691    
                           A  3692    .ENDFUNC "vdp_spriteMoveBySelected",358,"_vdp_s
                           A  3693    ;  359	
                           A  3694    ;  360	void vdp_spriteMoveBy(UINT8 id, UINT16 
                           A  3695    ;  361	{
040AB3                     A  3696    _vdp_spriteMoveBy:
                           A  3697    .DEFINE "_vdp_spriteMoveBy"
                           A  3698    
                           A  3699    .VALUE _vdp_spriteMoveBy
                           A  3700    
                           A  3701    .CLASS 2
                           A  3702    
                           A  3703    .TYPE 65
                           A  3704    
                           A  3705    .ENDEF
                           A  3706    
                           A  3707    .BEGFUNC "vdp_spriteMoveBy",361,"_vdp_spriteMov
                           A  3708    
                           A  3709    .LINE 361
                           A  3710    
                           A  3711    .DEFINE "id"
                           A  3712    
                           A  3713    .CLASS 65
                           A  3714    
                           A  3715    .VALUE 6
                           A  3716    
                           A  3717    .TYPE 12
                           A  3718    
                           A  3719    .ENDEF
                           A  3720    
                           A  3721    .DEFINE "x"
                           A  3722    
                           A  3723    .CLASS 65
                           A  3724    
                           A  3725    .VALUE 9
                           A  3726    
                           A  3727    .TYPE 13
                           A  3728    
                           A  3729    .ENDEF
                           A  3730    
                           A  3731    .DEFINE "y"
                           A  3732    
                           A  3733    .CLASS 65
                           A  3734    
                           A  3735    .VALUE 12
                           A  3736    
                           A  3737    .TYPE 13
                           A  3738    
                           A  3739    .ENDEF
                           A  3740    
040AB3 DDE5                A  3741    	PUSH	IX
040AB5 DD210000 00         A  3742    	LD	IX,0
040ABA DD39                A  3743    	ADD	IX,SP
                           A  3744    ;  362		vdp_spriteSelect(id);
                           A  3745    .LINE 362
                           A  3746    
040ABC DD4E06              A  3747    	LD	C,(IX+%6)
040ABF 0600                A  3748    	LD	B,%0
040AC1 C5                  A  3749    	PUSH	BC
040AC2 CD B7 07 04         A  3750    	CALL	_vdp_spriteSelect
040AC6 C1                  A  3751    	POP	BC
                           A  3752    ;  363		vdp_spriteMoveBySelected(x,y);
                           A  3753    .LINE 363
                           A  3754    
040AC7 DD070C              A  3755    	LD	BC,(IX+%C)
040ACA C5                  A  3756    	PUSH	BC
040ACB DD0709              A  3757    	LD	BC,(IX+%9)
040ACE C5                  A  3758    	PUSH	BC
040ACF CD 75 0A 04         A  3759    	CALL	_vdp_spriteMoveBySelected
040AD3 C1                  A  3760    	POP	BC
040AD4 C1                  A  3761    	POP	BC
                           A  3762    ;  364		return;
                           A  3763    ;  365	}
                           A  3764    .LINE 365
                           A  3765    
040AD5 DDF9                A  3766    	LD	SP,IX
040AD7 DDE1                A  3767    	POP	IX
040AD9 C9                  A  3768    	RET	
                           A  3769    
                           A  3770    
                           A  3771    ;**************************** _vdp_spriteMoveBy
                           A  3772    ;Name                         Addr/Register   S
                           A  3773    ;y                                    IX+12    
                           A  3774    ;x                                     IX+9    
                           A  3775    ;id                                    IX+6    
                           A  3776    
                           A  3777    
                           A  3778    ; Stack Frame Size: 15 (bytes)
                           A  3779    ;       Spill Code: 0 (instruction)
                           A  3780    
                           A  3781    
                           A  3782    .ENDFUNC "vdp_spriteMoveBy",365,"_vdp_spriteMov
                           A  3783    ;  366	
                           A  3784    ;  367	void vdp_spriteActivateTotal(UINT8 numb
                           A  3785    ;  368	{
040ADA                     A  3786    _vdp_spriteActivateTotal:
                           A  3787    .DEFINE "_vdp_spriteActivateTotal"
                           A  3788    
                           A  3789    .VALUE _vdp_spriteActivateTotal
                           A  3790    
                           A  3791    .CLASS 2
                           A  3792    
                           A  3793    .TYPE 65
                           A  3794    
                           A  3795    .ENDEF
                           A  3796    
                           A  3797    .BEGFUNC "vdp_spriteActivateTotal",368,"_vdp_sp
                           A  3798    
                           A  3799    .LINE 368
                           A  3800    
                           A  3801    .DEFINE "number"
                           A  3802    
                           A  3803    .CLASS 65
                           A  3804    
                           A  3805    .VALUE 6
                           A  3806    
                           A  3807    .TYPE 12
                           A  3808    
                           A  3809    .ENDEF
                           A  3810    
040ADA DDE5                A  3811    	PUSH	IX
040ADC DD210000 00         A  3812    	LD	IX,0
040AE1 DD39                A  3813    	ADD	IX,SP
                           A  3814    ;  369		putch(23); // vdu_sys
                           A  3815    .LINE 369
                           A  3816    
040AE3 01170000            A  3817    	LD	BC,23
040AE7 C5                  A  3818    	PUSH	BC
040AE8 CD EC 0C 04         A  3819    	CALL	_putch
040AEC C1                  A  3820    	POP	BC
                           A  3821    ;  370		putch(27); // sprite command
                           A  3822    .LINE 370
                           A  3823    
040AED 011B0000            A  3824    	LD	BC,27
040AF1 C5                  A  3825    	PUSH	BC
040AF2 CD EC 0C 04         A  3826    	CALL	_putch
040AF6 C1                  A  3827    	POP	BC
                           A  3828    ;  371		putch(7);  // set number of sprites
                           A  3829    .LINE 371
                           A  3830    
040AF7 01070000            A  3831    	LD	BC,7
040AFB C5                  A  3832    	PUSH	BC
040AFC CD EC 0C 04         A  3833    	CALL	_putch
040B00 C1                  A  3834    	POP	BC
                           A  3835    ;  372		putch(number);
                           A  3836    .LINE 372
                           A  3837    
040B01 DD7E06              A  3838    	LD	A,(IX+%6)
040B04 B7ED62              A  3839    	UEXT	HL
040B07 6F                  A  3840    	LD	L,A
040B08 E5                  A  3841    	PUSH	HL
040B09 CD EC 0C 04         A  3842    	CALL	_putch
040B0D C1                  A  3843    	POP	BC
                           A  3844    ;  373		return;	
                           A  3845    ;  374	}
                           A  3846    .LINE 374
                           A  3847    
040B0E DDF9                A  3848    	LD	SP,IX
040B10 DDE1                A  3849    	POP	IX
040B12 C9                  A  3850    	RET	
                           A  3851    
                           A  3852    
                           A  3853    ;**************************** _vdp_spriteActiva
                           A  3854    ;Name                         Addr/Register   S
                           A  3855    ;_putch                              IMPORT  --
                           A  3856    ;number                                IX+6    
                           A  3857    
                           A  3858    
                           A  3859    ; Stack Frame Size: 9 (bytes)
                           A  3860    ;       Spill Code: 0 (instruction)
                           A  3861    
                           A  3862    
                           A  3863    .ENDFUNC "vdp_spriteActivateTotal",374,"_vdp_sp
                           A  3864    ;  375	
                           A  3865    ;  376	void vdp_spriteRefresh(void)
                           A  3866    ;  377	{
040B13                     A  3867    _vdp_spriteRefresh:
                           A  3868    .DEFINE "_vdp_spriteRefresh"
                           A  3869    
                           A  3870    .VALUE _vdp_spriteRefresh
                           A  3871    
                           A  3872    .CLASS 2
                           A  3873    
                           A  3874    .TYPE 65
                           A  3875    
                           A  3876    .ENDEF
                           A  3877    
                           A  3878    .BEGFUNC "vdp_spriteRefresh",377,"_vdp_spriteRe
                           A  3879    
040B13 DDE5                A  3880    	PUSH	IX
040B15 DD210000 00         A  3881    	LD	IX,0
040B1A DD39                A  3882    	ADD	IX,SP
                           A  3883    ;  378		putch(23);	// vdu_sys
                           A  3884    .LINE 378
                           A  3885    
040B1C 01170000            A  3886    	LD	BC,23
040B20 C5                  A  3887    	PUSH	BC
040B21 CD EC 0C 04         A  3888    	CALL	_putch
040B25 C1                  A  3889    	POP	BC
                           A  3890    ;  379		putch(27);	// sprite command
                           A  3891    .LINE 379
                           A  3892    
040B26 011B0000            A  3893    	LD	BC,27
040B2A C5                  A  3894    	PUSH	BC
040B2B CD EC 0C 04         A  3895    	CALL	_putch
040B2F C1                  A  3896    	POP	BC
                           A  3897    ;  380		putch(15);	// refresh all sprites
                           A  3898    .LINE 380
                           A  3899    
040B30 010F0000            A  3900    	LD	BC,15
040B34 C5                  A  3901    	PUSH	BC
040B35 CD EC 0C 04         A  3902    	CALL	_putch
040B39 C1                  A  3903    	POP	BC
                           A  3904    ;  381		return;
                           A  3905    ;  382	}
                           A  3906    .LINE 382
                           A  3907    
040B3A DDF9                A  3908    	LD	SP,IX
040B3C DDE1                A  3909    	POP	IX
040B3E C9                  A  3910    	RET	
                           A  3911    
                           A  3912    
                           A  3913    ;**************************** _vdp_spriteRefres
                           A  3914    ;Name                         Addr/Register   S
                           A  3915    ;_putch                              IMPORT  --
                           A  3916    
                           A  3917    
                           A  3918    ; Stack Frame Size: 6 (bytes)
                           A  3919    ;       Spill Code: 0 (instruction)
                           A  3920    
                           A  3921    
                           A  3922    .ENDFUNC "vdp_spriteRefresh",382,"_vdp_spriteRe
                           A  3923    ;  383	
                           A  3924    ;  384	UINT8 vdp_cursorGetXpos(void)
                           A  3925    ;  385	{
040B3F                     A  3926    _vdp_cursorGetXpos:
                           A  3927    .DEFINE "_vdp_cursorGetXpos"
                           A  3928    
                           A  3929    .VALUE _vdp_cursorGetXpos
                           A  3930    
                           A  3931    .CLASS 2
                           A  3932    
                           A  3933    .TYPE 76
                           A  3934    
                           A  3935    .ENDEF
                           A  3936    
                           A  3937    .BEGFUNC "vdp_cursorGetXpos",385,"_vdp_cursorGe
                           A  3938    
                           A  3939    .LINE 385
                           A  3940    
                           A  3941    .DEFINE "delay"
                           A  3942    
                           A  3943    .CLASS 65
                           A  3944    
                           A  3945    .VALUE -3
                           A  3946    
                           A  3947    .TYPE 14
                           A  3948    
                           A  3949    .ENDEF
                           A  3950    
040B3F DDE5                A  3951    	PUSH	IX
040B41 DD210000 00         A  3952    	LD	IX,0
040B46 DD39                A  3953    	ADD	IX,SP
040B48 C5                  A  3954    	PUSH	BC
                           A  3955    ;  386		unsigned int delay;
                           A  3956    ;  387		
                           A  3957    ;  388		putch(23);	// VDP command
                           A  3958    .LINE 388
                           A  3959    
040B49 01170000            A  3960    	LD	BC,23
040B4D C5                  A  3961    	PUSH	BC
040B4E CD EC 0C 04         A  3962    	CALL	_putch
040B52 C1                  A  3963    	POP	BC
                           A  3964    ;  389		putch(0);	// VDP command
                           A  3965    .LINE 389
                           A  3966    
040B53 01000000            A  3967    	LD	BC,0
040B57 C5                  A  3968    	PUSH	BC
040B58 CD EC 0C 04         A  3969    	CALL	_putch
040B5C C1                  A  3970    	POP	BC
                           A  3971    ;  390		putch(2);	// Request cursor posit
                           A  3972    .LINE 390
                           A  3973    
040B5D 01020000            A  3974    	LD	BC,2
040B61 C5                  A  3975    	PUSH	BC
040B62 CD EC 0C 04         A  3976    	CALL	_putch
040B66 C1                  A  3977    	POP	BC
                           A  3978    ;  391		
                           A  3979    ;  392		delay = 255;
                           A  3980    .LINE 392
                           A  3981    
040B67 01FF0000            A  3982    	LD	BC,255
040B6B DD0FFD              A  3983    	LD	(IX+%FFFFFFFD),BC
                           A  3984    ;  393		while(delay--);
040B6E                     A  3985    L_59:
                           A  3986    .LINE 393
                           A  3987    
040B6E DD27FD              A  3988    	LD	HL,(IX+%FFFFFFFD)
040B71 DD31FD              A  3989    	LD	IY,(IX+%FFFFFFFD)
040B74 ED33FF              A  3990    	LEA	IY,IY+%FFFFFFFF
040B77 DD3EFD              A  3991    	LD	(IX+%FFFFFFFD),IY
040B7A CD E3 6A 04         A  3992    	CALL	__icmpzero
040B7E 20 EE               A  3993    	JR	NZ,L_59
                           A  3994    ;  394		return(getsysvar_cursorX());
                           A  3995    .LINE 394
                           A  3996    
040B80 CD 2A 0D 04         A  3997    	CALL	_getsysvar_cursorX
                           A  3998    ;  395	
                           A  3999    ;  396	}
                           A  4000    .LINE 396
                           A  4001    
040B84 DDF9                A  4002    	LD	SP,IX
040B86 DDE1                A  4003    	POP	IX
040B88 C9                  A  4004    	RET	
                           A  4005    
                           A  4006    
                           A  4007    ;**************************** _vdp_cursorGetXpo
                           A  4008    ;Name                         Addr/Register   S
                           A  4009    ;_getsysvar_cursorX                  IMPORT  --
                           A  4010    ;_putch                              IMPORT  --
                           A  4011    ;delay                                 IX-3    
                           A  4012    
                           A  4013    
                           A  4014    ; Stack Frame Size: 9 (bytes)
                           A  4015    ;       Spill Code: 0 (instruction)
                           A  4016    
                           A  4017    
                           A  4018    .ENDFUNC "vdp_cursorGetXpos",396,"_vdp_cursorGe
                           A  4019    ;  397	
                           A  4020    ;  398	UINT8 vdp_cursorGetYpos(void)
                           A  4021    ;  399	{
040B89                     A  4022    _vdp_cursorGetYpos:
                           A  4023    .DEFINE "_vdp_cursorGetYpos"
                           A  4024    
                           A  4025    .VALUE _vdp_cursorGetYpos
                           A  4026    
                           A  4027    .CLASS 2
                           A  4028    
                           A  4029    .TYPE 76
                           A  4030    
                           A  4031    .ENDEF
                           A  4032    
                           A  4033    .BEGFUNC "vdp_cursorGetYpos",399,"_vdp_cursorGe
                           A  4034    
                           A  4035    .LINE 399
                           A  4036    
                           A  4037    .DEFINE "delay"
                           A  4038    
                           A  4039    .CLASS 65
                           A  4040    
                           A  4041    .VALUE -3
                           A  4042    
                           A  4043    .TYPE 14
                           A  4044    
                           A  4045    .ENDEF
                           A  4046    
040B89 DDE5                A  4047    	PUSH	IX
040B8B DD210000 00         A  4048    	LD	IX,0
040B90 DD39                A  4049    	ADD	IX,SP
040B92 C5                  A  4050    	PUSH	BC
                           A  4051    ;  400		unsigned int delay;
                           A  4052    ;  401		
                           A  4053    ;  402		putch(23);	// VDP command
                           A  4054    .LINE 402
                           A  4055    
040B93 01170000            A  4056    	LD	BC,23
040B97 C5                  A  4057    	PUSH	BC
040B98 CD EC 0C 04         A  4058    	CALL	_putch
040B9C C1                  A  4059    	POP	BC
                           A  4060    ;  403		putch(0);	// VDP command
                           A  4061    .LINE 403
                           A  4062    
040B9D 01000000            A  4063    	LD	BC,0
040BA1 C5                  A  4064    	PUSH	BC
040BA2 CD EC 0C 04         A  4065    	CALL	_putch
040BA6 C1                  A  4066    	POP	BC
                           A  4067    ;  404		putch(2);	// Request cursor posit
                           A  4068    .LINE 404
                           A  4069    
040BA7 01020000            A  4070    	LD	BC,2
040BAB C5                  A  4071    	PUSH	BC
040BAC CD EC 0C 04         A  4072    	CALL	_putch
040BB0 C1                  A  4073    	POP	BC
                           A  4074    ;  405		
                           A  4075    ;  406		delay = 255;
                           A  4076    .LINE 406
                           A  4077    
040BB1 01FF0000            A  4078    	LD	BC,255
040BB5 DD0FFD              A  4079    	LD	(IX+%FFFFFFFD),BC
                           A  4080    ;  407		while(delay--);
040BB8                     A  4081    L_64:
                           A  4082    .LINE 407
                           A  4083    
040BB8 DD27FD              A  4084    	LD	HL,(IX+%FFFFFFFD)
040BBB DD31FD              A  4085    	LD	IY,(IX+%FFFFFFFD)
040BBE ED33FF              A  4086    	LEA	IY,IY+%FFFFFFFF
040BC1 DD3EFD              A  4087    	LD	(IX+%FFFFFFFD),IY
040BC4 CD E3 6A 04         A  4088    	CALL	__icmpzero
040BC8 20 EE               A  4089    	JR	NZ,L_64
                           A  4090    ;  408		return(getsysvar_cursorY());
                           A  4091    .LINE 408
                           A  4092    
040BCA CD 36 0D 04         A  4093    	CALL	_getsysvar_cursorY
                           A  4094    ;  409	}
                           A  4095    .LINE 409
                           A  4096    
040BCE DDF9                A  4097    	LD	SP,IX
040BD0 DDE1                A  4098    	POP	IX
040BD2 C9                  A  4099    	RET	
                           A  4100    
                           A  4101    
                           A  4102    ;**************************** _vdp_cursorGetYpo
                           A  4103    ;Name                         Addr/Register   S
                           A  4104    ;_getsysvar_cursorY                  IMPORT  --
                           A  4105    ;_putch                              IMPORT  --
                           A  4106    ;delay                                 IX-3    
                           A  4107    
                           A  4108    
                           A  4109    ; Stack Frame Size: 9 (bytes)
                           A  4110    ;       Spill Code: 0 (instruction)
                           A  4111    
                           A  4112    
                           A  4113    .ENDFUNC "vdp_cursorGetYpos",409,"_vdp_cursorGe
                           A  4114    ;  410	
                           A  4115    ;  411	char vdp_asciiCodeAt(unsigned char x, u
                           A  4116    ;  412	{
040BD3                     A  4117    _vdp_asciiCodeAt:
                           A  4118    .DEFINE "_vdp_asciiCodeAt"
                           A  4119    
                           A  4120    .VALUE _vdp_asciiCodeAt
                           A  4121    
                           A  4122    .CLASS 2
                           A  4123    
                           A  4124    .TYPE 66
                           A  4125    
                           A  4126    .ENDEF
                           A  4127    
                           A  4128    .BEGFUNC "vdp_asciiCodeAt",412,"_vdp_asciiCodeA
                           A  4129    
                           A  4130    .LINE 412
                           A  4131    
                           A  4132    .DEFINE "x"
                           A  4133    
                           A  4134    .CLASS 65
                           A  4135    
                           A  4136    .VALUE 6
                           A  4137    
                           A  4138    .TYPE 12
                           A  4139    
                           A  4140    .ENDEF
                           A  4141    
                           A  4142    .DEFINE "y"
                           A  4143    
                           A  4144    .CLASS 65
                           A  4145    
                           A  4146    .VALUE 9
                           A  4147    
                           A  4148    .TYPE 12
                           A  4149    
                           A  4150    .ENDEF
                           A  4151    
                           A  4152    .DEFINE "delay"
                           A  4153    
                           A  4154    .CLASS 65
                           A  4155    
                           A  4156    .VALUE -3
                           A  4157    
                           A  4158    .TYPE 14
                           A  4159    
                           A  4160    .ENDEF
                           A  4161    
040BD3 DDE5                A  4162    	PUSH	IX
040BD5 DD210000 00         A  4163    	LD	IX,0
040BDA DD39                A  4164    	ADD	IX,SP
040BDC C5                  A  4165    	PUSH	BC
                           A  4166    ;  413		unsigned int delay;
                           A  4167    ;  414		
                           A  4168    ;  415		putch(23);	// VDP command
                           A  4169    .LINE 415
                           A  4170    
040BDD 01170000            A  4171    	LD	BC,23
040BE1 C5                  A  4172    	PUSH	BC
040BE2 CD EC 0C 04         A  4173    	CALL	_putch
040BE6 C1                  A  4174    	POP	BC
                           A  4175    ;  416		putch(0);	// VDP command
                           A  4176    .LINE 416
                           A  4177    
040BE7 01000000            A  4178    	LD	BC,0
040BEB C5                  A  4179    	PUSH	BC
040BEC CD EC 0C 04         A  4180    	CALL	_putch
040BF0 C1                  A  4181    	POP	BC
                           A  4182    ;  417		putch(3);	// Request ascii code a
                           A  4183    .LINE 417
                           A  4184    
040BF1 01030000            A  4185    	LD	BC,3
040BF5 C5                  A  4186    	PUSH	BC
040BF6 CD EC 0C 04         A  4187    	CALL	_putch
040BFA C1                  A  4188    	POP	BC
                           A  4189    ;  418		putch(x);
                           A  4190    .LINE 418
                           A  4191    
040BFB DD7E06              A  4192    	LD	A,(IX+%6)
040BFE B7ED62              A  4193    	UEXT	HL
040C01 6F                  A  4194    	LD	L,A
040C02 E5                  A  4195    	PUSH	HL
040C03 CD EC 0C 04         A  4196    	CALL	_putch
040C07 C1                  A  4197    	POP	BC
                           A  4198    ;  419		putch(0);
                           A  4199    .LINE 419
                           A  4200    
040C08 01000000            A  4201    	LD	BC,0
040C0C C5                  A  4202    	PUSH	BC
040C0D CD EC 0C 04         A  4203    	CALL	_putch
040C11 C1                  A  4204    	POP	BC
                           A  4205    ;  420		putch(y);
                           A  4206    .LINE 420
                           A  4207    
040C12 DD7E09              A  4208    	LD	A,(IX+%9)
040C15 B7ED62              A  4209    	UEXT	HL
040C18 6F                  A  4210    	LD	L,A
040C19 E5                  A  4211    	PUSH	HL
040C1A CD EC 0C 04         A  4212    	CALL	_putch
040C1E C1                  A  4213    	POP	BC
                           A  4214    ;  421		putch(0);
                           A  4215    .LINE 421
                           A  4216    
040C1F 01000000            A  4217    	LD	BC,0
040C23 C5                  A  4218    	PUSH	BC
040C24 CD EC 0C 04         A  4219    	CALL	_putch
040C28 C1                  A  4220    	POP	BC
                           A  4221    ;  422		
                           A  4222    ;  423		delay = 64000;
                           A  4223    .LINE 423
                           A  4224    
040C29 0100FA00            A  4225    	LD	BC,64000
040C2D DD0FFD              A  4226    	LD	(IX+%FFFFFFFD),BC
                           A  4227    ;  424		while(delay--);
040C30                     A  4228    L_69:
                           A  4229    .LINE 424
                           A  4230    
040C30 DD27FD              A  4231    	LD	HL,(IX+%FFFFFFFD)
040C33 DD31FD              A  4232    	LD	IY,(IX+%FFFFFFFD)
040C36 ED33FF              A  4233    	LEA	IY,IY+%FFFFFFFF
040C39 DD3EFD              A  4234    	LD	(IX+%FFFFFFFD),IY
040C3C CD E3 6A 04         A  4235    	CALL	__icmpzero
040C40 20 EE               A  4236    	JR	NZ,L_69
                           A  4237    ;  425		return(getsysvar_scrchar());
                           A  4238    .LINE 425
                           A  4239    
040C42 CD 42 0D 04         A  4240    	CALL	_getsysvar_scrchar
                           A  4241    ;  426	}
                           A  4242    .LINE 426
                           A  4243    
040C46 DDF9                A  4244    	LD	SP,IX
040C48 DDE1                A  4245    	POP	IX
040C4A C9                  A  4246    	RET	
                           A  4247    
                           A  4248    
                           A  4249    ;**************************** _vdp_asciiCodeAt 
                           A  4250    ;Name                         Addr/Register   S
                           A  4251    ;_getsysvar_scrchar                  IMPORT  --
                           A  4252    ;_putch                              IMPORT  --
                           A  4253    ;delay                                 IX-3    
                           A  4254    ;y                                     IX+9    
                           A  4255    ;x                                     IX+6    
                           A  4256    
                           A  4257    
                           A  4258    ; Stack Frame Size: 15 (bytes)
                           A  4259    ;       Spill Code: 0 (instruction)
                           A  4260    
                           A  4261    
                           A  4262    .ENDFUNC "vdp_asciiCodeAt",426,"_vdp_asciiCodeA
                           A  4263    ;  427	
                           A  4264    ;  428	void vdp_cursorDisable(void)
                           A  4265    ;  429	{
040C4B                     A  4266    _vdp_cursorDisable:
                           A  4267    .DEFINE "_vdp_cursorDisable"
                           A  4268    
                           A  4269    .VALUE _vdp_cursorDisable
                           A  4270    
                           A  4271    .CLASS 2
                           A  4272    
                           A  4273    .TYPE 65
                           A  4274    
                           A  4275    .ENDEF
                           A  4276    
                           A  4277    .BEGFUNC "vdp_cursorDisable",429,"_vdp_cursorDi
                           A  4278    
040C4B DDE5                A  4279    	PUSH	IX
040C4D DD210000 00         A  4280    	LD	IX,0
040C52 DD39                A  4281    	ADD	IX,SP
                           A  4282    ;  430		putch(23);
                           A  4283    .LINE 430
                           A  4284    
040C54 01170000            A  4285    	LD	BC,23
040C58 C5                  A  4286    	PUSH	BC
040C59 CD EC 0C 04         A  4287    	CALL	_putch
040C5D C1                  A  4288    	POP	BC
                           A  4289    ;  431		putch(1);
                           A  4290    .LINE 431
                           A  4291    
040C5E 01010000            A  4292    	LD	BC,1
040C62 C5                  A  4293    	PUSH	BC
040C63 CD EC 0C 04         A  4294    	CALL	_putch
040C67 C1                  A  4295    	POP	BC
                           A  4296    ;  432		putch(0);
                           A  4297    .LINE 432
                           A  4298    
040C68 01000000            A  4299    	LD	BC,0
040C6C C5                  A  4300    	PUSH	BC
040C6D CD EC 0C 04         A  4301    	CALL	_putch
040C71 C1                  A  4302    	POP	BC
                           A  4303    ;  433	}
                           A  4304    .LINE 433
                           A  4305    
040C72 DDF9                A  4306    	LD	SP,IX
040C74 DDE1                A  4307    	POP	IX
040C76 C9                  A  4308    	RET	
                           A  4309    
                           A  4310    
                           A  4311    ;**************************** _vdp_cursorDisabl
                           A  4312    ;Name                         Addr/Register   S
                           A  4313    ;_putch                              IMPORT  --
                           A  4314    
                           A  4315    
                           A  4316    ; Stack Frame Size: 6 (bytes)
                           A  4317    ;       Spill Code: 0 (instruction)
                           A  4318    
                           A  4319    
                           A  4320    .ENDFUNC "vdp_cursorDisable",433,"_vdp_cursorDi
                           A  4321    ;  434	
                           A  4322    ;  435	void vdp_cursorEnable(void)
                           A  4323    ;  436	{
040C77                     A  4324    _vdp_cursorEnable:
                           A  4325    .DEFINE "_vdp_cursorEnable"
                           A  4326    
                           A  4327    .VALUE _vdp_cursorEnable
                           A  4328    
                           A  4329    .CLASS 2
                           A  4330    
                           A  4331    .TYPE 65
                           A  4332    
                           A  4333    .ENDEF
                           A  4334    
                           A  4335    .BEGFUNC "vdp_cursorEnable",436,"_vdp_cursorEna
                           A  4336    
040C77 DDE5                A  4337    	PUSH	IX
040C79 DD210000 00         A  4338    	LD	IX,0
040C7E DD39                A  4339    	ADD	IX,SP
                           A  4340    ;  437		putch(23);
                           A  4341    .LINE 437
                           A  4342    
040C80 01170000            A  4343    	LD	BC,23
040C84 C5                  A  4344    	PUSH	BC
040C85 CD EC 0C 04         A  4345    	CALL	_putch
040C89 C1                  A  4346    	POP	BC
                           A  4347    ;  438		putch(1);
                           A  4348    .LINE 438
                           A  4349    
040C8A 01010000            A  4350    	LD	BC,1
040C8E C5                  A  4351    	PUSH	BC
040C8F CD EC 0C 04         A  4352    	CALL	_putch
040C93 C1                  A  4353    	POP	BC
                           A  4354    ;  439		putch(1);
                           A  4355    .LINE 439
                           A  4356    
040C94 01010000            A  4357    	LD	BC,1
040C98 C5                  A  4358    	PUSH	BC
040C99 CD EC 0C 04         A  4359    	CALL	_putch
040C9D C1                  A  4360    	POP	BC
                           A  4361    ;  440	}
                           A  4362    .LINE 440
                           A  4363    
040C9E DDF9                A  4364    	LD	SP,IX
040CA0 DDE1                A  4365    	POP	IX
040CA2 C9                  A  4366    	RET	
                           A  4367    
                           A  4368    
                           A  4369    ;**************************** _vdp_cursorEnable
                           A  4370    ;Name                         Addr/Register   S
                           A  4371    ;_putch                              IMPORT  --
                           A  4372    
                           A  4373    
                           A  4374    ; Stack Frame Size: 6 (bytes)
                           A  4375    ;       Spill Code: 0 (instruction)
                           A  4376    
                           A  4377    
                           A  4378    .ENDFUNC "vdp_cursorEnable",440,"_vdp_cursorEna
                           A  4379    ;  441	
                           A  4380    ;  442	void vdp_scroll(unsigned char extent, u
                           A  4381    ;  443	{
040CA3                     A  4382    _vdp_scroll:
                           A  4383    .DEFINE "_vdp_scroll"
                           A  4384    
                           A  4385    .VALUE _vdp_scroll
                           A  4386    
                           A  4387    .CLASS 2
                           A  4388    
                           A  4389    .TYPE 65
                           A  4390    
                           A  4391    .ENDEF
                           A  4392    
                           A  4393    .BEGFUNC "vdp_scroll",443,"_vdp_scroll"
                           A  4394    
                           A  4395    .LINE 443
                           A  4396    
                           A  4397    .DEFINE "extent"
                           A  4398    
                           A  4399    .CLASS 65
                           A  4400    
                           A  4401    .VALUE 6
                           A  4402    
                           A  4403    .TYPE 12
                           A  4404    
                           A  4405    .ENDEF
                           A  4406    
                           A  4407    .DEFINE "direction"
                           A  4408    
                           A  4409    .CLASS 65
                           A  4410    
                           A  4411    .VALUE 9
                           A  4412    
                           A  4413    .TYPE 12
                           A  4414    
                           A  4415    .ENDEF
                           A  4416    
                           A  4417    .DEFINE "speed"
                           A  4418    
                           A  4419    .CLASS 65
                           A  4420    
                           A  4421    .VALUE 12
                           A  4422    
                           A  4423    .TYPE 12
                           A  4424    
                           A  4425    .ENDEF
                           A  4426    
040CA3 DDE5                A  4427    	PUSH	IX
040CA5 DD210000 00         A  4428    	LD	IX,0
040CAA DD39                A  4429    	ADD	IX,SP
                           A  4430    ;  444		putch(23);
                           A  4431    .LINE 444
                           A  4432    
040CAC 01170000            A  4433    	LD	BC,23
040CB0 C5                  A  4434    	PUSH	BC
040CB1 CD EC 0C 04         A  4435    	CALL	_putch
040CB5 C1                  A  4436    	POP	BC
                           A  4437    ;  445		putch(7);	// scroll
                           A  4438    .LINE 445
                           A  4439    
040CB6 01070000            A  4440    	LD	BC,7
040CBA C5                  A  4441    	PUSH	BC
040CBB CD EC 0C 04         A  4442    	CALL	_putch
040CBF C1                  A  4443    	POP	BC
                           A  4444    ;  446		putch(extent);
                           A  4445    .LINE 446
                           A  4446    
040CC0 DD7E06              A  4447    	LD	A,(IX+%6)
040CC3 B7ED62              A  4448    	UEXT	HL
040CC6 6F                  A  4449    	LD	L,A
040CC7 E5                  A  4450    	PUSH	HL
040CC8 CD EC 0C 04         A  4451    	CALL	_putch
040CCC C1                  A  4452    	POP	BC
                           A  4453    ;  447		putch(direction);
                           A  4454    .LINE 447
                           A  4455    
040CCD DD7E09              A  4456    	LD	A,(IX+%9)
040CD0 B7ED62              A  4457    	UEXT	HL
040CD3 6F                  A  4458    	LD	L,A
040CD4 E5                  A  4459    	PUSH	HL
040CD5 CD EC 0C 04         A  4460    	CALL	_putch
040CD9 C1                  A  4461    	POP	BC
                           A  4462    ;  448		putch(speed);
                           A  4463    .LINE 448
                           A  4464    
040CDA DD7E0C              A  4465    	LD	A,(IX+%C)
040CDD B7ED62              A  4466    	UEXT	HL
040CE0 6F                  A  4467    	LD	L,A
040CE1 E5                  A  4468    	PUSH	HL
040CE2 CD EC 0C 04         A  4469    	CALL	_putch
040CE6 C1                  A  4470    	POP	BC
                           A  4471    .LINE 449
                           A  4472    
040CE7 DDF9                A  4473    	LD	SP,IX
040CE9 DDE1                A  4474    	POP	IX
040CEB C9                  A  4475    	RET	
                           A  4476    
                           A  4477    
                           A  4478    ;**************************** _vdp_scroll *****
                           A  4479    ;Name                         Addr/Register   S
                           A  4480    ;_putch                              IMPORT  --
                           A  4481    ;speed                                IX+12    
                           A  4482    ;direction                             IX+9    
                           A  4483    ;extent                                IX+6    
                           A  4484    
                           A  4485    
                           A  4486    ; Stack Frame Size: 15 (bytes)
                           A  4487    ;       Spill Code: 0 (instruction)
                           A  4488    
                           A  4489    
                           A  4490    .ENDFUNC "vdp_scroll",449,"_vdp_scroll"
                           A  4491    	XREF _getsysvar_scrchar:ROM
                           A  4492    	XREF _getsysvar_cursorY:ROM
                           A  4493    	XREF _getsysvar_cursorX:ROM
                           A  4494    	XREF _putch:ROM
                           A  4495    	XREF __imuls:ROM
                           A  4496    	XREF __lshru:ROM
                           A  4497    	XREF __stoiu:ROM
                           A  4498    	XREF __icmpzero:ROM
                           A  4499    	XREF __ishru_b:ROM
                           A  4500    	XREF __ishrs_b:ROM
                           A  4501    	XDEF _vdp_scroll
                           A  4502    	XDEF _vdp_cursorEnable
                           A  4503    	XDEF _vdp_cursorDisable
                           A  4504    	XDEF _vdp_asciiCodeAt
                           A  4505    	XDEF _vdp_cursorGetYpos
                           A  4506    	XDEF _vdp_cursorGetXpos
                           A  4507    	XDEF _vdp_spriteRefresh
                           A  4508    	XDEF _vdp_spriteActivateTotal
                           A  4509    	XDEF _vdp_spriteMoveBy
                           A  4510    	XDEF _vdp_spriteMoveBySelected
                           A  4511    	XDEF _vdp_spriteMoveTo
                           A  4512    	XDEF _vdp_spriteMoveToSelected
                           A  4513    	XDEF _vdp_spriteHide
                           A  4514    	XDEF _vdp_spriteHideSelected
                           A  4515    	XDEF _vdp_spriteShow
                           A  4516    	XDEF _vdp_spriteShowSelected
                           A  4517    	XDEF _vdp_spriteSetFrame
                           A  4518    	XDEF _vdp_spriteSetFrameSelected
                           A  4519    	XDEF _vdp_spritePreviousFrame
                           A  4520    	XDEF _vdp_spritePreviousFrameSelected
                           A  4521    	XDEF _vdp_spriteNextFrame
                           A  4522    	XDEF _vdp_spriteNextFrameSelected
                           A  4523    	XDEF _vdp_spriteAddFrame
                           A  4524    	XDEF _vdp_spriteAddFrameSelected
                           A  4525    	XDEF _vdp_spriteClearFrames
                           A  4526    	XDEF _vdp_spriteClearFramesSelected
                           A  4527    	XDEF _vdp_spriteSelect
                           A  4528    	XDEF _vdp_bitmapCreateSolidColor
                           A  4529    	XDEF _vdp_bitmapCreateSolidColorSelected
                           A  4530    	XDEF _vdp_bitmapDraw
                           A  4531    	XDEF _vdp_bitmapDrawSelected
                           A  4532    	XDEF _vdp_bitmapSendData
                           A  4533    	XDEF _vdp_bitmapSendDataSelected
                           A  4534    	XDEF _vdp_bitmapSelect
                           A  4535    	XDEF _vdp_plotSetOrigin
                           A  4536    	XDEF _vdp_plotCircleCircumference
                           A  4537    	XDEF _vdp_plotCircleRadius
                           A  4538    	XDEF _vdp_plotTriangle
                           A  4539    	XDEF _vdp_plotPoint
                           A  4540    	XDEF _vdp_plotLineTo
                           A  4541    	XDEF _vdp_plotMoveTo
                           A  4542    	XDEF _vdp_plot
                           A  4543    	XDEF _vdp_plotColour
                           A  4544    	XDEF _vdp_clearGraphics
                           A  4545    	XDEF _vdp_bgcolour
                           A  4546    	XDEF _vdp_fgcolour
                           A  4547    	XDEF _vdp_colour
                           A  4548    	XDEF _vdp_cursorGoto
                           A  4549    	XDEF _vdp_cursorUp
                           A  4550    	XDEF _vdp_cursorHome
                           A  4551    	XDEF _vdp_cls
                           A  4552    	XDEF _vdp_mode
                           A  4553    	XDEF _write32bit
                           A  4554    	XDEF _write16bit
                           A  4555    	END


Errors: 0
Warnings: 0
Lines Assembled: 4556
